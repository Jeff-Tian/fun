var JSON,Canvas2Image;(function(n,t,i){if(typeof i.com=="undefined"&&(i.com={}),n.console)i.com.Console=n.console;else{function r(){if(this.consoleObject=null,this.environment={newLine:"<br />",logMode:"html"},!(arguments.length<=0))if(arguments.length<=1)switch(typeof arguments[0]){case"string":this.consoleObject=t(arguments[0]);break;case"object":this.consoleObject=t(arguments[0])}else this.environment.newLine=arguments[1];if(!this._initialized){var n=this;r.prototype.write=function(n){if(this.consoleObject){var t=this.consoleObject[this.environment.logMode]();t+=n;this.consoleObject[this.environment.logMode](t)}else alert(n)};r.prototype.writeLine=function(n){arguments.length<=0?this.write(this.environment.newLine):this.write(n+this.environment.newLine)};r.prototype.error=function(n){typeof n=="string"?this.writeLine(String.format('<div style="color: red;">Error encountered.{1}message: {2}<\/div>',this.environment.newLine,n)):this.writeLine(String.format("<div style=\"color: red;\">Error '{0}' encountered.{1}number: {2}{1}message: {3}{1}description: {4}<\/div>",n.name,this.environment.newLine,n.number,n.message,n.description))};r.prototype.info=function(n){this.writeLine(n)};r.prototype.log=function(n,t){this.writeLine(n);this.writeLine(!t?"":t.toString()?t.toString():t)};this._initialized=!0}}i.com.console=r;i.com.Console=new r}})(window,jQuery,zizhujy),function(n){n.color={};n.color.make=function(t,i,r,u){var f={};return f.r=t||0,f.g=i||0,f.b=r||0,f.a=u!=null?u:1,f.add=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]+=t;return f.normalize()},f.scale=function(n,t){for(var i=0;i<n.length;++i)f[n.charAt(i)]*=t;return f.normalize()},f.toString=function(){return f.a>=1?"rgb("+[f.r,f.g,f.b].join(",")+")":"rgba("+[f.r,f.g,f.b,f.a].join(",")+")"},f.normalize=function(){function n(n,t,i){return t<n?n:t>i?i:t}return f.r=n(0,parseInt(f.r,10),255),f.g=n(0,parseInt(f.g,10),255),f.b=n(0,parseInt(f.b,10),255),f.a=n(0,f.a,1),f},f.clone=function(){return n.color.make(f.r,f.b,f.g,f.a)},f.normalize()};n.color.extract=function(t,i){var r;do{if(r=t.css(i).toLowerCase(),r!==""&&r!=="transparent")break;t=t.parent()}while(!n.nodeName(t.get(0),"body"));return r==="rgba(0, 0, 0, 0)"&&(r="transparent"),n.color.parse(r)};n.color.parse=function(i){var r,u=n.color.make,f;return(r=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i),r)?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)):(r=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i),r)?u(parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),parseFloat(r[4])):(r=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i),r)?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55):(r=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i),r)?u(parseFloat(r[1])*2.55,parseFloat(r[2])*2.55,parseFloat(r[3])*2.55,parseFloat(r[4])):(r=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i),r)?u(parseInt(r[1],16),parseInt(r[2],16),parseInt(r[3],16)):(r=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i),r)?u(parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16),parseInt(r[3]+r[3],16)):(f=n.trim(i).toLowerCase(),f==="transparent"?u(255,255,255,0):(r=t[f]||[0,0,0],u(r[0],r[1],r[2])))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(n){function i(t,i){var r=i.children("."+t)[0];if(r==null&&(r=document.createElement("canvas"),r.className=t,n(r).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!r.getContext))if(window.G_vmlCanvasManager)r=window.G_vmlCanvasManager.initElement(r);else throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");this.element=r;var u=this.context=r.getContext("2d"),f=window.devicePixelRatio||1,e=u.webkitBackingStorePixelRatio||u.mozBackingStorePixelRatio||u.msBackingStorePixelRatio||u.oBackingStorePixelRatio||u.backingStorePixelRatio||1;this.pixelRatio=f/e;this.resize(i.width(),i.height());this.textContainer=null;this.text={};this._textCache={}}function r(r,e,o,s){function it(n,t){t=[v].concat(t);for(var i=0;i<n.length;++i)n[i].apply(this,t)}function oi(){for(var t,u={Canvas:i},r=0;r<s.length;++r)t=s[r],t.init(v,u),t.options&&n.extend(!0,h,t.options)}function si(t){var o;n.extend(!0,h,t);t&&t.colors&&(h.colors=t.colors);h.xaxis.color==null&&(h.xaxis.color=n.color.parse(h.grid.color).scale("a",.22).toString());h.yaxis.color==null&&(h.yaxis.color=n.color.parse(h.grid.color).scale("a",.22).toString());h.xaxis.tickColor==null&&(h.xaxis.tickColor=h.grid.tickColor||h.xaxis.color);h.yaxis.tickColor==null&&(h.yaxis.tickColor=h.grid.tickColor||h.yaxis.color);h.grid.borderColor==null&&(h.grid.borderColor=h.grid.color);h.grid.tickColor==null&&(h.grid.tickColor=n.color.parse(h.grid.color).scale("a",.22).toString());for(var i,c=r.css("font-size"),l=c?+c.replace("px",""):13,f={style:r.css("font-style"),size:Math.round(.8*l),variant:r.css("font-variant"),weight:r.css("font-weight"),family:r.css("font-family")},e,s=h.xaxes.length||1,u=0;u<s;++u)i=h.xaxes[u],i&&!i.tickColor&&(i.tickColor=i.color),i&&(!i.label&&i.axisLabel&&(i.label=i.axisLabel),!i.labelPadding&&i.axisLabelPadding&&(i.labelPadding=i.axisLabelPadding)),i=n.extend(!0,{},h.xaxis,i),h.xaxes[u]=i,i.font&&(i.font=n.extend({},f,i.font)),(i.tickFont||i.font)&&(i.tickFont=n.extend({},i.font||f,i.tickFont),i.tickFont.color||(i.tickFont.color=i.color),i.tickFont.lineHeight||(i.tickFont.lineHeight=Math.round(i.tickFont.size*1.15))),i.label&&(i.labelFont||i.font)&&(i.labelFont=n.extend({},i.font||f,i.labelFont),i.labelFont.color||(i.labelFont.color=i.color),i.labelFont.lineHeight||(i.labelFont.lineHeight=Math.round(i.labelFont.size*1.15))),i.font&&(i.font.color||(i.font.color=i.color),i.font.lineHeight||(i.font.lineHeight=Math.round(i.font.size*1.15)));for(s=h.yaxes.length||1,u=0;u<s;++u)i=h.yaxes[u],i&&!i.tickColor&&(i.tickColor=i.color),i&&(!i.label&&i.axisLabel&&(i.label=i.axisLabel),!i.labelPadding&&i.axisLabelPadding&&(i.labelPadding=i.axisLabelPadding)),i=n.extend(!0,{},h.yaxis,i),h.yaxes[u]=i,i.font&&(i.font=n.extend({},f,i.font)),(i.tickFont||i.font)&&(i.tickFont=n.extend({},i.font||f,i.tickFont),i.tickFont.color||(i.tickFont.color=i.color),i.tickFont.lineHeight||(i.tickFont.lineHeight=Math.round(i.tickFont.size*1.15))),i.label&&(i.labelFont||i.font)&&(i.labelFont=n.extend({},i.font||f,i.labelFont),i.labelFont.color||(i.labelFont.color=i.color),i.labelFont.lineHeight||(i.labelFont.lineHeight=Math.round(i.labelFont.size*1.15))),i.font&&(i.font.color||(i.font.color=i.color),i.font.lineHeight||(i.font.lineHeight=Math.round(i.font.size*1.15)));if(e=h.grid.markings,n.isArray(e))for(u=0;u<e.length;++u)e[u].font&&(e[u].font=n.extend({},f,e[u].font));for(h.xaxis.noTicks&&h.xaxis.ticks==null&&(h.xaxis.ticks=h.xaxis.noTicks),h.yaxis.noTicks&&h.yaxis.ticks==null&&(h.yaxis.ticks=h.yaxis.noTicks),h.x2axis&&(h.xaxes[1]=n.extend(!0,{},h.xaxis,h.x2axis),h.xaxes[1].position="top"),h.y2axis&&(h.yaxes[1]=n.extend(!0,{},h.yaxis,h.y2axis),h.yaxes[1].position="right"),h.grid.coloredAreas&&(h.grid.markings=h.grid.coloredAreas),h.grid.coloredAreasColor&&(h.grid.markingsColor=h.grid.coloredAreasColor),h.lines&&n.extend(!0,h.series.lines,h.lines),h.points&&n.extend(!0,h.series.points,h.points),h.bars&&n.extend(!0,h.series.bars,h.bars),h.shadowSize!=null&&(h.series.shadowSize=h.shadowSize),h.highlightColor!=null&&(h.series.highlightColor=h.highlightColor),u=0;u<h.xaxes.length;++u)st(w,u+1).options=h.xaxes[u];for(u=0;u<h.yaxes.length;++u)st(k,u+1).options=h.yaxes[u];for(o in b)h.hooks[o]&&h.hooks[o].length&&(b[o]=b[o].concat(h.hooks[o]));it(b.processOptions,[h])}function lt(n){a=hi(n);li();ai()}function hi(t){for(var r,u=[],i=0;i<t.length;++i)r=n.extend(!0,{},h.series),t[i].data!=null?(r.data=t[i].data,delete t[i].data,n.extend(!0,r,t[i]),t[i].data=r.data):r.data=t[i],u.push(r);return u}function ot(n,i){var r=n[i+"axis"];return typeof r=="object"&&(r=r.n),t(r)||(r=1),r}function ut(){return n.grep(w.concat(k),function(n){return n})}function at(n){for(var i={},t,r=0;r<w.length;++r)t=w[r],t&&t.used&&(i["x"+t.n]=t.c2p(n.left));for(r=0;r<k.length;++r)t=k[r],t&&t.used&&(i["y"+t.n]=t.c2p(n.top));return i.x1!==undefined&&(i.x=i.x1),i.y1!==undefined&&(i.y=i.y1),i}function ci(n){for(var u={},t,i,r=0;r<w.length;++r)if(t=w[r],t&&t.used&&(i="x"+t.n,n[i]==null&&t.n===1&&(i="x"),n[i]!=null)){u.left=t.p2c(n[i]);break}for(r=0;r<k.length;++r)if(t=k[r],t&&t.used&&(i="y"+t.n,n[i]==null&&t.n===1&&(i="y"),n[i]!=null)){u.top=t.p2c(n[i]);break}return u}function st(t,i){return t[i-1]||(t[i-1]={n:i,direction:t===w?"x":"y",options:n.extend(!0,{},t===w?h.xaxis:h.yaxis)}),t[i-1]}function li(){for(var e=a.length,o=-1,f,c,i,l,v,r=0;r<a.length;++r)f=a[r].color,f!=null&&(e--,t(f)&&f>o&&(o=f));e<=o&&(e=o+1);var y,s=[],p=h.colors,b=p.length,u=0;for(r=0;r<e;r++)y=n.color.parse(p[r%b]||"#666"),r%b==0&&r&&(u=u>=0?u<.5?-u-.2:0:-u),s[r]=y.scale("rgb",1+u);for(c=0,r=0;r<a.length;++r){if(i=a[r],i.color==null?(i.color=s[c].toString(),++c):t(i.color)&&(i.color=s[i.color].toString()),i.lines.show==null){v=!0;for(l in i)if(i[l]&&i[l].show){v=!1;break}v&&(i.lines.show=!0)}i.lines.zero==null&&(i.lines.zero=!!i.lines.fill);i.xaxis=st(w,ot(i,"x"));i.yaxis=st(k,ot(i,"y"))}}function ai(){function w(n,t,i){t<n.datamin&&t!==-l&&(n.datamin=t);i>n.datamax&&i!==l&&(n.datamax=i)}var y=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,l=Number.MAX_VALUE,u,o,v,r,t,s,h,i,e,rt,ft,f,et,k,c;for(n.each(ut(),function(n,t){t.datamin=y;t.datamax=p;t.used=!1}),u=0;u<a.length;++u)t=a[u],t.datapoints={points:[]},it(b.processRawData,[t,t.data,t.datapoints]);for(u=0;u<a.length;++u)if(t=a[u],ft=t.data,f=t.datapoints.format,f||(f=[],f.push({x:!0,number:!0,required:!0}),f.push({y:!0,number:!0,required:!0}),(t.bars.show||t.lines.show&&t.lines.fill)&&(et=!!(t.bars.show&&t.bars.zero||t.lines.show&&t.lines.zero),f.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:et}),t.bars.horizontal&&(delete f[f.length-1].y,f[f.length-1].x=!0)),t.datapoints.format=f),t.datapoints.pointsize==null)for(t.datapoints.pointsize=f.length,h=t.datapoints.pointsize,s=t.datapoints.points,t.xaxis.used=t.yaxis.used=!0,o=v=0;o<ft.length;++o,v+=h){if(rt=ft[o],k=rt==null,!k)for(r=0;r<h;++r)i=rt[r],e=f[r],e&&(e.number&&i!=null&&(i=+i,isNaN(i)?i=null:i===Infinity?i=l:i===-Infinity&&(i=-l)),i==null&&(e.required&&(k=!0),e.defaultValue!=null&&(i=e.defaultValue))),s[v+r]=i;if(k)for(r=0;r<h;++r)i=s[v+r],i!=null&&(e=f[r],e.autoscale!==!1&&(e.x&&w(t.xaxis,i,i),e.y&&w(t.yaxis,i,i))),s[v+r]=null}for(u=0;u<a.length;++u)t=a[u],it(b.processDatapoints,[t,t.datapoints]);for(u=0;u<a.length;++u){t=a[u];s=t.datapoints.points;h=t.datapoints.pointsize;f=t.datapoints.format;var d=y,g=y,nt=p,tt=p;for(o=0;o<s.length;o+=h)if(s[o]!=null)for(r=0;r<h;++r)(i=s[o+r],e=f[r],e&&e.autoscale!==!1&&i!==l&&i!==-l)&&(e.x&&(i<d&&(d=i),i>nt&&(nt=i)),e.y&&(i<g&&(g=i),i>tt&&(tt=i)));if(t.bars.show){switch(t.bars.align){case"left":c=0;break;case"right":c=-t.bars.barWidth;break;default:c=-t.bars.barWidth/2}t.bars.horizontal?(g+=c,tt+=c+t.bars.barWidth):(d+=c,nt+=c+t.bars.barWidth)}w(t.xaxis,d,nt);w(t.yaxis,g,tt)}n.each(ut(),function(n,t){t.datamin===y&&(t.datamin=null);t.datamax===p&&(t.datamax=null)})}function vi(){r.css("padding",0).children().filter(function(){return!n(this).hasClass("flot-overlay")&&!n(this).hasClass("flot-base")}).remove();r.css("position")==="static"&&r.css("position","relative");y=new i("flot-base",r);rt=new i("flot-overlay",r);c=y.context;p=rt.context;g=n(rt.element).unbind();var t=r.data("plot");t&&(t.shutdown(),rt.clear());r.data("plot",v)}function yi(){h.grid.hoverable&&(g.mousemove(gt),g.bind("mouseleave",ni));h.grid.clickable&&g.click(ti);it(b.bindEvents,[g])}function vt(){ft&&clearTimeout(ft);g.unbind("mousemove",gt);g.unbind("mouseleave",ni);g.unbind("click",ti);it(b.shutdown,[g])}function pi(n){function u(n){return n}var i,r,t=n.options.transform||u,f=n.options.inverseTransform;n.direction==="x"?(i=n.scale=nt/Math.abs(t(n.max)-t(n.min)),r=Math.min(t(n.max),t(n.min))):(i=n.scale=d/Math.abs(t(n.max)-t(n.min)),i=-i,r=Math.max(t(n.max),t(n.min)));n.p2c=t===u?function(n){return(n-r)*i}:function(n){return(t(n)-r)*i};n.c2p=f?function(n){return f(r+n/i)}:function(n){return r+n/i}}function wi(n){for(var e,o,t=n.options,r=n.ticks||[],i=t.tickWidth||t.labelWidth||0,u=t.tickHeight||t.labelHeight||0,s=i||n.direction==="x"?Math.floor(y.width/(r.length||1)):null,h=n.direction+"Axis "+n.direction+n.n+"Axis",c="flot-"+n.direction+"-axis flot-"+n.direction+n.n+"-axis "+h,l=t.tickFont||"flot-tick-label tickLabel",f=0;f<r.length;++f)(e=r[f],e.label)&&(o=y.getTextInfo(c,e.label,l,null,s),i=Math.max(i,o.width),u=Math.max(u,o.height));n.tickWidth=t.tickWidth||t.labelWidth||i;n.tickHeight=t.tickHeight||t.labelHeight||u;n.labelWidth=n.tickWidth;n.labelHeight=n.tickHeight}function bi(t){var u=t.tickWidth,f=t.tickHeight,i=t.options,e=i.tickLength,o=i.position,r=h.grid.axisMargin,s=h.grid.labelMargin,c=t.direction==="x",v=!0,p=!0,b=!0,a=!1;if(n.each(c?w:k,function(n,i){i&&i.reserveSpace&&(i===t?a=!0:i.options.position===o&&(a?p=!1:v=!1),a||(b=!1))}),p&&(r=0),e==null&&(e=b?"full":5),isNaN(+e)||(s+=+e),i.label){var g="Axis "+t.direction+t.n+"Axis",nt="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+t.direction+g,tt=i.labelFont||"flot-axis-label axisLabels "+t.direction+t.n+"axisLabel",it=c?0:i.position==="right"?90:-90,d=y.getTextInfo(nt,i.label,tt,it);u+=d.width+i.labelPadding;f+=d.height+i.labelPadding}c?(f+=s,o==="top"?(t.box={top:l.top+r,height:f},l.top+=f+r):(l.bottom+=f+r,t.box={top:y.height-l.bottom,height:f})):(u+=s,o==="right"?(l.right+=u+r,t.box={left:y.width-l.right,width:u}):(t.box={left:l.left+r,width:u},l.left+=u+r));t.position=o;t.tickLength=e;t.box.padding=s;t.innermost=v}function ki(n){n.direction==="x"?(n.box.left=l.left-n.tickWidth/2,n.box.width=y.width-l.left-l.right+n.tickWidth):(n.box.top=l.top-n.tickHeight/2,n.box.height=y.height-l.bottom-l.top+n.tickHeight)}function di(){var i=h.grid.minBorderMargin,r,t;if(i==null)for(i=0,r=0;r<a.length;++r)i=Math.max(i,2*(a[r].points.radius+a[r].points.lineWidth/2));t={left:i,right:i,top:i,bottom:i};n.each(ut(),function(n,i){if(i.reserveSpace&&i.ticks&&i.ticks.length){var r=i.ticks[i.ticks.length-1];i.direction==="x"?(t.left=Math.max(t.left,i.tickWidth/2),r.v<=i.max&&(t.right=Math.max(t.right,i.tickWidth/2))):(t.bottom=Math.max(t.bottom,i.tickHeight/2),r.v<=i.max&&(t.top=Math.max(t.top,i.tickHeight/2)))}});l.left=Math.ceil(Math.max(t.left,l.left));l.right=Math.ceil(Math.max(t.right,l.right));l.top=Math.ceil(Math.max(t.top,l.top));l.bottom=Math.ceil(Math.max(t.bottom,l.bottom))}function yt(){var e=ut(),u=h.grid.show,o=h.grid.margin||0,f,i,r;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(l[i]=t(o)?o:o[i]||0);it(b.processOffset,[l]);for(i in l)l[i]+=typeof h.grid.borderWidth=="object"?u?h.grid.borderWidth[i]:0:u?h.grid.borderWidth:0;if(n.each(e,function(n,t){t.show=t.options.show;t.show==null&&(t.show=t.used);t.reserveSpace=t.show||t.options.reserveSpace;gi(t)}),u){for(r=n.grep(e,function(n){return n.reserveSpace}),n.each(r,function(n,t){nr(t);tr(t);ir(t,t.ticks);wi(t)}),f=r.length-1;f>=0;--f)bi(r[f]);di();n.each(r,function(n,t){ki(t)})}nt=y.width-l.left-l.right;d=y.height-l.bottom-l.top;n.each(e,function(n,t){pi(t)});u&&fr();cr()}function gi(n){var t=n.options,r=+(t.min!=null?t.min:n.datamin),i=+(t.max!=null?t.max:n.datamax),f=i-r,e,u;f===0?(e=i===0?1:.01,t.min==null&&(r-=e),(t.max==null||t.min!=null)&&(i+=e)):(u=t.autoscaleMargin,u!=null&&(t.min==null&&(r-=f*u,r<0&&n.datamin!=null&&n.datamin>=0&&(r=0)),t.max==null&&(i+=f*u,i>0&&n.datamax!=null&&n.datamax<=0&&(i=0))));n.min=r;n.max=i}function nr(i){var r=i.options,b,l,c,f,e,h,p,a;b=t(r.ticks)&&r.ticks>0?r.ticks:.3*Math.sqrt(i.direction==="x"?y.width:y.height);var v=(i.max-i.min)/b,s=-Math.floor(Math.log(v)/Math.LN10),o=r.tickDecimals;if(o!=null&&s>o&&(s=o),l=Math.pow(10,-s),c=v/l,c<1.5?f=1:c<3?(f=2,c>2.25&&(o==null||s+1<=o)&&(f=2.5,++s)):f=c<7.5?5:10,Big?f=Big(f).times(Big(l)):f*=l,r.minTickSize!=null&&f<r.minTickSize&&(f=r.minTickSize),i.delta=v,i.tickDecimals=Math.max(0,o!=null?o:s),i.tickSize=r.tickSize||f,r.mode==="time"&&!i.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");i.tickGenerator||(i.tickGenerator=function(n){var r=[],f=u(n.min,n.tickSize,Big),i=0,t=Number.NaN,e;do e=t,t=f+i*n.tickSize,Big&&(t=Big(f).plus(Big(i).times(n.tickSize)).toString()),r.push(t),++i;while(t<n.max&&t!==e);return r},i.tickFormatter=function(n,t){var u=t.tickDecimals?Math.pow(10,t.tickDecimals):1,i=""+Math.round(n*u)/u,f,r;return t.tickDecimals!=null&&(f=i.indexOf("."),r=f===-1?0:i.length-f-1,r<t.tickDecimals)?(r?i:i+".")+(""+u).substr(1,t.tickDecimals-r):i});n.isFunction(r.tickFormatter)&&(i.tickFormatter=function(n,t){return""+r.tickFormatter(n,t)});r.alignTicksWithAxis!=null&&(e=(i.direction==="x"?w:k)[r.alignTicksWithAxis-1],e&&e.used&&e!==i&&(h=i.tickGenerator(i),h.length>0&&(r.min==null&&(i.min=Math.min(i.min,h[0])),r.max==null&&h.length>1&&(i.max=Math.max(i.max,h[h.length-1]))),i.tickGenerator=function(n){for(var r=[],t,i=0;i<e.ticks.length;++i)t=(e.ticks[i].v-e.min)/(e.max-e.min),t=n.min+t*(n.max-n.min),r.push(t);return r},i.mode||r.tickDecimals!=null||(p=Math.max(0,-Math.floor(Math.log(i.delta)/Math.LN10)+1),a=i.tickGenerator(i),a.length>1&&/\..*0$/.test((a[1]-a[0]).toFixed(p))||(i.tickDecimals=p))))}function tr(i){var r=i.options.ticks,o=[],s,f,e,u;for(r==null||t(r)&&r>0?o=i.tickGenerator(i):r&&(o=n.isFunction(r)?r(i):r),i.ticks=[],s=0;s<o.length;++s)e=null,u=o[s],typeof u=="object"?(f=+u[0],u.length>1&&(e=u[1])):f=+u,e==null&&(e=i.tickFormatter(f,i)),isNaN(f)||i.ticks.push({v:f,label:e})}function ir(n,t){n.options.autoscaleMargin&&t.length>0&&(n.options.min==null&&(n.min=Math.min(n.min,t[0].v)),n.options.max==null&&t.length>1&&(n.max=Math.max(n.max,t[t.length-1].v)))}function pt(){var n,t;for(y.clear(),it(b.drawBackground,[c]),n=h.grid,n.show&&n.backgroundColor&&rr(),n.show&&!n.aboveData&&bt(),t=0;t<a.length;++t)it(b.drawSeries,[c,a[t]]),er(a[t]);it(b.draw,[c]);n.show&&n.aboveData&&bt();y.render();et()}function wt(n,t){for(var s,f,i,r,u,o=ut(),e=0;e<o.length;++e)if(f=o[e],f.direction===t&&(u=t+f.n+"axis",n[u]||f.n!==1||(u=t+"axis"),n[u])){i=n[u].from;r=n[u].to;break}return n[u]||(f=t==="x"?w[0]:k[0],i=n[t+"1"],r=n[t+"2"]),i!=null&&r!=null&&i>r&&(s=i,i=r,r=s),{from:i,to:r,axis:f}}function rr(){c.save();c.translate(l.left,l.top);c.fillStyle=ei(h.grid.backgroundColor,d,0,"rgba(255, 255, 255, 0)");c.fillRect(0,0,nt,d);c.restore()}function bt(){var o,r,t,u,k,g,tt,p;c.save();c.translate(l.left,l.top);k="flot-markings";y.removeText(k);var rt=[],ft=[],b=h.grid.markings;if(b)for(n.isFunction(b)&&(r=v.getAxes(),r.xmin=r.xaxis.min,r.xmax=r.xaxis.max,r.ymin=r.yaxis.min,r.ymax=r.yaxis.max,b=b(r)),o=0;o<b.length;++o)g=b[o],g.aboveGrid?ft.push(g):rt.push(g);for(kt(rt,k),r=ut(),t=h.grid.borderWidth,tt=0;tt<r.length;++tt){var i=r[tt],it=i.box,w=i.tickLength,f,e,s,a;if(i.show&&i.ticks.length!==0){for(c.lineWidth=1,i.direction==="x"?(f=0,e=w==="full"?i.position==="top"?0:d:it.top-l.top+(i.position==="top"?it.height:0)):(e=0,f=w==="full"?i.position==="left"?0:nt:it.left-l.left+(i.position==="left"?it.width:0)),i.innermost||(c.strokeStyle=i.options.color,c.beginPath(),s=a=0,i.direction==="x"?s=nt+1:a=d+1,c.lineWidth===1&&(i.direction==="x"?e=Math.floor(e)+.5:f=Math.floor(f)+.5),c.moveTo(f,e),c.lineTo(f+s,e+a),c.stroke()),c.strokeStyle=i.options.tickColor,c.beginPath(),o=0;o<i.ticks.length;++o)(p=i.ticks[o].v,s=a=0,isNaN(p)||p<i.min||p>i.max||w==="full"&&(typeof t=="object"&&t[i.position]>0||t>0)&&(p===i.min||p===i.max))||(i.direction==="x"?(f=i.p2c(p),a=w==="full"?-d:w,i.position==="top"&&(a=-a)):(e=i.p2c(p),s=w==="full"?-nt:w,i.position==="left"&&(s=-s)),c.lineWidth===1&&(i.direction==="x"?f=Math.floor(f)+.5:e=Math.floor(e)+.5),c.moveTo(f,e),c.lineTo(f+s,e+a));c.stroke()}}kt(ft,k);t&&(u=h.grid.borderColor,typeof t=="object"||typeof u=="object"?(typeof t!="object"&&(t={top:t,right:t,bottom:t,left:t}),typeof u!="object"&&(u={top:u,right:u,bottom:u,left:u}),t.top>0&&(c.strokeStyle=u.top,c.lineWidth=t.top,c.beginPath(),c.moveTo(0-t.left,0-t.top/2),c.lineTo(nt,0-t.top/2),c.stroke()),t.right>0&&(c.strokeStyle=u.right,c.lineWidth=t.right,c.beginPath(),c.moveTo(nt+t.right/2,0-t.top),c.lineTo(nt+t.right/2,d),c.stroke()),t.bottom>0&&(c.strokeStyle=u.bottom,c.lineWidth=t.bottom,c.beginPath(),c.moveTo(nt+t.right,d+t.bottom/2),c.lineTo(0,d+t.bottom/2),c.stroke()),t.left>0&&(c.strokeStyle=u.left,c.lineWidth=t.left,c.beginPath(),c.moveTo(0-t.left/2,d+t.bottom),c.lineTo(0-t.left/2,0),c.stroke())):(c.lineWidth=t,c.strokeStyle=h.grid.borderColor,c.strokeRect(-t/2,-t/2,nt+t,d+t)));c.restore()}function kt(n,t){if(n)for(var i=0;i<n.length;i++)ur(n[i],t)}function ur(n,t){var i=wt(n,"x"),r=wt(n,"y"),u,e;if((i.from==null&&(i.from=i.axis.min),i.to==null&&(i.to=i.axis.max),r.from==null&&(r.from=r.axis.min),r.to==null&&(r.to=r.axis.max),!(i.to<i.axis.min)&&!(i.from>i.axis.max)&&!(r.to<r.axis.min)&&!(r.from>r.axis.max))&&(i.from=Math.max(i.from,i.axis.min),i.to=Math.min(i.to,i.axis.max),r.from=Math.max(r.from,r.axis.min),r.to=Math.min(r.to,r.axis.max),i.from=i.axis.p2c(i.from),i.to=i.axis.p2c(i.to),r.from=r.axis.p2c(r.from),r.to=r.axis.p2c(r.to),(i.from!==i.to||i.from!==r.to)&&(i.from===i.to||r.from===r.to?(c.beginPath(),c.strokeStyle=n.color||h.grid.markingsColor,c.lineWidth=n.lineWidth||h.grid.markingsLineWidth,c.moveTo(i.from,r.from),c.lineTo(i.to,r.to),c.stroke()):(c.fillStyle=n.color||h.grid.markingsColor,n.rounded?(f(c,i.from,r.to,i.to-i.from,r.from-r.to,n.rounded),c.fill()):c.fillRect(i.from,r.to,i.to-i.from,r.from-r.to))),n.text)){if(u=i.from+l.left,e=r.to+l.top,!!n.textAlign)switch(n.textAlign.toLowerCase()){case"right":u=i.to+l.left;break;case"center":u=(i.from+l.left+i.to+l.left)/2}if(!!n.textBaseline)switch(n.textBaseline.toLowerCase()){case"bottom":e=r.from+l.top;break;case"middle":e=(r.from+l.top+r.to+l.top)/2}y.addText(t,u,e,n.text,n.font||"flot-marking",0,null,n.textAlign,n.textBaseline)}}function fr(){n.each(ut(),function(n,t){var i=t.box,r=t.options,v=t.direction+"Axis "+t.direction+t.n+"Axis",f="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+v,e=r.labelFont||"flot-axis-label axisLabels "+t.direction+t.n+"axisLabel",p=r.tickFont||"flot-tick-label tickLabel",u,o,s,c,a,h;if(y.removeText(f),t.show&&t.ticks.length!==0)for(r.label&&(t.direction==="x"?r.position==="top"?y.addText(f,i.left+i.width/2,i.top,r.label,e,0,null,"center","top"):y.addText(f,i.left+i.width/2,i.top+i.height,r.label,e,0,null,"center","bottom"):r.position==="right"?y.addText(f,i.left+i.width,i.top+i.height/2,r.label,e,90,null,"right","middle"):y.addText(f,i.left,i.top+i.height/2,r.label,e,-90,null,"left","middle")),h=0;h<t.ticks.length;++h)(u=t.ticks[h],!u.label||u.v<t.min||u.v>t.max)||(t.direction==="x"?(c="center",o=l.left+t.p2c(u.v),t.position==="bottom"?s=i.top+i.padding:(s=i.top+i.height-i.padding,a="bottom")):(a="middle",s=l.top+t.p2c(u.v),t.position==="left"?(o=i.left+i.width-i.padding,c="right"):o=i.left+i.padding),y.addText(f,o,s,u.label,p,null,null,c,a))})}function er(n){n.lines.show&&or(n);n.bars.show&&hr(n);n.points.show&&sr(n)}function or(n){function u(t,i,r,u,f){var v=t.points,y=t.pointsize,l=n.lines.steps,p=null,w=null,a;for(c.beginPath(),a=y;a<v.length;a+=y){var o=v[a-y],e=v[a-y+1],s=v[a],h=v[a+1];if(o!=null&&s!=null){if(e<=h&&e<f.min){if(h<f.min)continue;o=l?s:(f.min-e)/(h-e)*(s-o)+o;e=f.min}else if(h<=e&&h<f.min){if(e<f.min)continue;s=l?s:(f.min-e)/(h-e)*(s-o)+o;h=f.min}if(e>=h&&e>f.max){if(h>f.max)continue;o=l?s:(f.max-e)/(h-e)*(s-o)+o;e=f.max}else if(h>=e&&h>f.max){if(e>f.max)continue;s=l?s:(f.max-e)/(h-e)*(s-o)+o;h=f.max}if(o<=s&&o<u.min){if(s<u.min)continue;e=l?e:(u.min-o)/(s-o)*(h-e)+e;o=u.min}else if(s<=o&&s<u.min){if(o<u.min)continue;h=l?e:(u.min-o)/(s-o)*(h-e)+e;s=u.min}if(o>=s&&o>u.max){if(s>u.max)continue;e=l?e:(u.max-o)/(s-o)*(h-e)+e;o=u.max}else if(s>=o&&s>u.max){if(o>u.max)continue;h=l?e:(u.max-o)/(s-o)*(h-e)+e;s=u.max}(o!==p||e!==w)&&c.moveTo(u.p2c(o)+i,f.p2c(e)+r);p=s;w=h;l&&(o<s?c.lineTo(u.p2c(s)+i,f.p2c(e)+r):c.lineTo(u.p2c(o)+i,f.p2c(h)+r));c.lineTo(u.p2c(s)+i,f.p2c(h)+r)}}c.stroke()}function e(t,i,r){for(var a=t.points,s=t.pointsize,h=n.lines.steps,d=Math.min(Math.max(0,r.min),r.max),l=0,v=!1,y=1,b=0,k=0,p,w;;){if(s>0&&l>a.length+s)break;l+=s;var u=a[l-s],f=a[l-s+y],e=a[l],o=a[l+y];if(v){if(s>0&&u!=null&&e==null){k=l;s=-s;y=2;continue}if(s<0&&l===b+s){c.fill();v=!1;s=-s;y=1;l=b=k+s;continue}}if(u!=null&&e!=null){if(u<=e&&u<i.min){if(e<i.min)continue;f=h?f:(i.min-u)/(e-u)*(o-f)+f;u=i.min}else if(e<=u&&e<i.min){if(u<i.min)continue;o=h?f:(i.min-u)/(e-u)*(o-f)+f;e=i.min}if(u>=e&&u>i.max){if(e>i.max)continue;f=h?f:(i.max-u)/(e-u)*(o-f)+f;u=i.max}else if(e>=u&&e>i.max){if(u>i.max)continue;o=h?f:(i.max-u)/(e-u)*(o-f)+f;e=i.max}if(v||(c.beginPath(),c.moveTo(i.p2c(u),r.p2c(d)),v=!0),f>=r.max&&o>=r.max){c.lineTo(i.p2c(u),r.p2c(r.max));c.lineTo(i.p2c(e),r.p2c(r.max));continue}else if(f<=r.min&&o<=r.min){c.lineTo(i.p2c(u),r.p2c(r.min));c.lineTo(i.p2c(e),r.p2c(r.min));continue}p=u;w=e;f<=o&&f<r.min&&o>=r.min?(u=h?e:(r.min-f)/(o-f)*(e-u)+u,f=r.min):o<=f&&o<r.min&&f>=r.min&&(e=h?e:(r.min-f)/(o-f)*(e-u)+u,o=r.min);f>=o&&f>r.max&&o<=r.max?(u=h?e:(r.max-f)/(o-f)*(e-u)+u,f=r.max):o>=f&&o>r.max&&f<=r.max&&(e=h?e:(r.max-f)/(o-f)*(e-u)+u,o=r.max);u!==p&&c.lineTo(i.p2c(p),r.p2c(f));c.lineTo(i.p2c(u),r.p2c(f));h&&(u<e?c.lineTo(i.p2c(e),r.p2c(f)):c.lineTo(i.p2c(u),r.p2c(o)));c.lineTo(i.p2c(e),r.p2c(o));e!==w&&(c.lineTo(i.p2c(e),r.p2c(o)),c.lineTo(i.p2c(w),r.p2c(o)))}}}var t,i,r,f;c.save();c.translate(l.left,l.top);c.lineJoin="round";t=n.lines.lineWidth;i=n.shadowSize;t>0&&i>0&&(c.lineWidth=i,c.strokeStyle="rgba(0,0,0,0.1)",r=Math.PI/18,u(n.datapoints,Math.sin(r)*(t/2+i/2),Math.cos(r)*(t/2+i/2),n.xaxis,n.yaxis),c.lineWidth=i/2,u(n.datapoints,Math.sin(r)*(t/2+i/4),Math.cos(r)*(t/2+i/4),n.xaxis,n.yaxis));c.lineWidth=t;c.strokeStyle=n.color;f=ht(n.lines,n.color,0,d);f&&(c.fillStyle=f,e(n.datapoints,n.xaxis,n.yaxis));t>0&&u(n.datapoints,0,0,n.xaxis,n.yaxis);c.restore()}function sr(n){function r(n,t,i,r,u,f,e,o){for(var s,h,a=n.points,v=n.pointsize,l=0;l<a.length;l+=v)(s=a[l],h=a[l+1],s==null||s<f.min||s>f.max||h<e.min||h>e.max)||(c.beginPath(),s=f.p2c(s),h=e.p2c(h)+r,o==="circle"?c.arc(s,h,t,0,u?Math.PI:Math.PI*2,!1):o(c,s,h,t,u),c.closePath(),i&&(c.fillStyle=i,c.fill()),c.stroke())}var t;c.save();c.translate(l.left,l.top);var i=n.points.lineWidth,e=n.shadowSize,u=n.points.radius,f=n.points.symbol;i===0&&(i=.0001);i>0&&e>0&&(t=e/2,c.lineWidth=t,c.strokeStyle="rgba(0,0,0,0.1)",r(n.datapoints,u,null,t+t/2,!0,n.xaxis,n.yaxis,f),c.strokeStyle="rgba(0,0,0,0.2)",r(n.datapoints,u,null,t/2,!0,n.xaxis,n.yaxis,f));c.lineWidth=i;c.strokeStyle=n.points.strokeColor||n.color;r(n.datapoints,u,ht(n.points,n.color),0,!1,n.xaxis,n.yaxis,f);c.restore()}function dt(n,t,i,r,u,f,e,o,s,h,c){var l,y,a,v,p,w,b,k,d;(h?(k=w=b=!0,p=!1,l=i,y=n,v=t+r,a=t+u,y<l&&(d=y,y=l,l=d,p=!0,w=!1)):(p=w=b=!0,k=!1,l=n+r,y=n+u,a=i,v=t,v<a&&(d=v,v=a,a=d,k=!0,b=!1)),y<e.min||l>e.max||v<o.min||a>o.max)||(l<e.min&&(l=e.min,p=!1),y>e.max&&(y=e.max,w=!1),a<o.min&&(a=o.min,k=!1),v>o.max&&(v=o.max,b=!1),l=e.p2c(l),a=o.p2c(a),y=e.p2c(y),v=o.p2c(v),f&&(s.fillStyle=f(a,v),s.fillRect(l,v,y-l,a-v)),c>0&&(p||w||b||k)&&(s.beginPath(),s.moveTo(l,a),p?s.lineTo(l,v):s.moveTo(l,v),b?s.lineTo(y,v):s.moveTo(y,v),w?s.lineTo(y,a):s.moveTo(y,a),k?s.lineTo(l,a):s.moveTo(l,a),s.stroke()))}function hr(n){function r(t,i,r,u,f,e){for(var s=t.points,h=t.pointsize,o=0;o<s.length;o+=h)s[o]!=null&&dt(s[o],s[o+1],s[o+2],i,r,u,f,e,c,n.bars.horizontal,n.bars.lineWidth)}var t,i;c.save();c.translate(l.left,l.top);c.lineWidth=n.bars.lineWidth;c.strokeStyle=n.color;switch(n.bars.align){case"left":t=0;break;case"right":t=-n.bars.barWidth;break;default:t=-n.bars.barWidth/2}i=n.bars.fill?function(t,i){return ht(n.bars,n.color,t,i)}:null;r(n.datapoints,t,t+n.bars.barWidth,i,n.xaxis,n.yaxis);c.restore()}function ht(i,r,u,f){var o=i.fill,e;return o?i.fillColor?ei(i.fillColor,u,f,r):(e=n.color.parse(r),e.a=t(o)?o:.4,e.normalize(),e.toString()):null}function cr(){var u,p,e,w,i,d,c,o,b,g,nt,y,t,k;if(h.legend.container!=null?n(h.legend.container).html(""):r.find(".legend").remove(),h.legend.show){for(u=[],p=h.legend.labelFormatter,i=0;i<a.length;++i)e=a[i],e.label&&(w=p?p(e.label,e):e.label,w&&u.push({label:w,color:e.color}));if(u.length!==0){for(h.legend.sorted&&(n.isFunction(h.legend.sorted)?u.sort(h.legend.sorted):h.legend.sorted==="reverse"?u.reverse():(d=h.legend.sorted!=="descending",u.sort(function(n,t){return n.label===t.label?0:n.label<t.label!==d?1:-1}))),c=n("<table><\/table>").css({"font-size":"smaller",color:h.grid.color}),o=null,i=0;i<u.length;++i)b=u[i],i%h.legend.noColumns==0&&(o!==null&&c.append(o),o=n("<tr><\/tr>")),g=n("<div><\/div>").css({width:"4px",height:0,border:"5px solid "+b.color,overflow:"hidden"}),nt=n("<div><\/div>").css({border:"1px solid "+h.legend.labelBoxBorderColor,padding:"1px"}),o.append(n("<td><\/td>").addClass("legendColorBox").append(nt.append(g)),n("<td><\/td>").addClass("legendLabel").html(b.label));if(c.append(o),h.legend.container!=null)n(h.legend.container).html(c);else{var s={position:"absolute"},v=h.legend.position,f=h.legend.margin;f[0]==null&&(f=[f,f]);v.charAt(0)==="n"?s.top=f[1]+l.top+"px":v.charAt(0)==="s"&&(s.bottom=f[1]+l.bottom+"px");v.charAt(1)==="e"?s.right=f[0]+l.right+"px":v.charAt(1)==="w"&&(s.left=f[0]+l.left+"px");y=n("<div><\/div>").addClass("legend").append(c.css(s)).appendTo(r);h.legend.backgroundOpacity!==0&&(t=h.legend.backgroundColor,t==null&&(t=h.grid.backgroundColor,t=t&&typeof t=="string"?n.color.parse(t):n.color.extract(y,"background-color"),t.a=1,t=t.toString()),k=y.children(),n("<div><\/div>").css(s).css({width:k.width()+"px",height:k.height()+"px","background-color":t,opacity:h.legend.backgroundOpacity}).prependTo(y))}}}}function lr(n,t,i){for(var b=h.grid.mouseActiveRadius,it=b*b+1,l=null,r,s,p,tt,w,u=a.length-1;u>=0;--u)if(i(a[u])){var f=a[u],k=f.xaxis,d=f.yaxis,c=f.datapoints.points,v=k.c2p(n),y=d.c2p(t),g=b/k.scale,nt=b/d.scale,e,o;if(s=f.datapoints.pointsize,k.options.inverseTransform&&(g=Number.MAX_VALUE),d.options.inverseTransform&&(nt=Number.MAX_VALUE),f.lines.show||f.points.show)for(r=0;r<c.length;r+=s)if((e=c[r],o=c[r+1],e!=null)&&!(e-v>g)&&!(e-v<-g)&&!(o-y>nt)&&!(o-y<-nt)){var rt=Math.abs(k.p2c(e)-n),ut=Math.abs(d.p2c(o)-t),ft=rt*rt+ut*ut;ft<it&&(it=ft,l=[u,r/s])}if(f.bars.show&&!l){switch(f.bars.align){case"left":p=0;break;case"right":p=-f.bars.barWidth;break;default:p=-f.bars.barWidth/2}for(tt=p+f.bars.barWidth,r=0;r<c.length;r+=s)(e=c[r],o=c[r+1],w=c[r+2],e!=null)&&(a[u].bars.horizontal?v<=Math.max(w,e)&&v>=Math.min(w,e)&&y>=o+p&&y<=o+tt:v>=e+p&&v<=e+tt&&y>=Math.min(w,o)&&y<=Math.max(w,o))&&(l=[u,r/s])}}return l?(u=l[0],r=l[1],s=a[u].datapoints.pointsize,{datapoint:a[u].datapoints.points.slice(r*s,(r+1)*s),dataIndex:r,series:a[u],seriesIndex:u}):null}function gt(n){h.grid.hoverable&&ct("plothover",n,function(n){return n.hoverable!==!1})}function ni(n){h.grid.hoverable&&ct("plothover",n,function(){return!1})}function ti(n){ct("plotclick",n,function(n){return n.clickable!==!1})}function ct(n,t,i){var e=g.offset(),c=t.pageX-e.left-l.left,a=t.pageY-e.top-l.top,s=at({left:c,top:a}),u,o,f;if(s.pageX=t.pageX,s.pageY=t.pageY,u=lr(c,a,i),u&&(u.pageX=parseInt(u.series.xaxis.p2c(u.datapoint[0])+e.left+l.left,10),u.pageY=parseInt(u.series.yaxis.p2c(u.datapoint[1])+e.top+l.top,10)),h.grid.autoHighlight){for(o=0;o<tt.length;++o)f=tt[o],f.auto!==n||u&&f.series===u.series&&f.point[0]===u.datapoint[0]&&f.point[1]===u.datapoint[1]||ui(f.series,f.point);u&&ri(u.series,u.datapoint,n)}r.trigger(n,[s,u])}function et(){var n=h.interaction.redrawOverlayInterval;if(n===-1){ii();return}ft||(ft=setTimeout(ii,n))}function ii(){ft=null;p.save();rt.clear();p.translate(l.left,l.top);for(var n,t=0;t<tt.length;++t)n=tt[t],n.series.bars.show?vr(n.series,n.point):ar(n.series,n.point);p.restore();it(b.drawOverlay,[p])}function ri(n,i,r){var u,f;t(n)&&(n=a[n]);t(i)&&(u=n.datapoints.pointsize,i=n.datapoints.points.slice(u*i,u*(i+1)));f=fi(n,i);f===-1?(tt.push({series:n,point:i,auto:r}),et()):r||(tt[f].auto=!1)}function ui(n,i){var r,u;if(n==null&&i==null){tt=[];et();return}t(n)&&(n=a[n]);t(i)&&(r=n.datapoints.pointsize,i=n.datapoints.points.slice(r*i,r*(i+1)));u=fi(n,i);u!==-1&&(tt.splice(u,1),et())}function fi(n,t){for(var r,i=0;i<tt.length;++i)if(r=tt[i],r.series===n&&r.point[0]===t[0]&&r.point[1]===t[1])return i;return-1}function ar(t,i){var r=i[0],u=i[1],o=t.xaxis,s=t.yaxis,h=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),f,e;r<o.min||r>o.max||u<s.min||u>s.max||(t.points.show?(f=t.points.radius+t.points.lineWidth/2,e=1.5*f):(f=t.points.radius,e=.5*f),p.lineWidth=f,p.strokeStyle=h,r=o.p2c(r),u=s.p2c(u),p.beginPath(),t.points.symbol==="circle"?p.arc(r,u,e,0,2*Math.PI,!1):t.points.symbol(p,r,u,e,!1),p.closePath(),p.stroke())}function vr(t,i){var u=typeof t.highlightColor=="string"?t.highlightColor:n.color.parse(t.color).scale("a",.5).toString(),f=u,r;switch(t.bars.align){case"left":r=0;break;case"right":r=-t.bars.barWidth;break;default:r=-t.bars.barWidth/2}p.lineWidth=t.bars.lineWidth;p.strokeStyle=u;dt(i[0],i[1],i[2]||0,r,r+t.bars.barWidth,function(){return f},t.xaxis,t.yaxis,p,t.bars.horizontal,t.bars.lineWidth)}function ei(t,i,r,u){var s,e,h,f,o;if(typeof t=="string")return t;for(s=c.createLinearGradient(0,r,0,i),e=0,h=t.colors.length;e<h;++e)f=t.colors[e],typeof f!="string"&&(o=n.color.parse(u),f.brightness!=null&&(o=o.scale("rgb",f.brightness)),f.opacity!=null&&(o.a*=f.opacity),f=o.toString()),s.addColorStop(e/(h-1),f);return s}var a=[],h={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,color:null,font:null,min:null,max:null,autoscaleMargin:null,transform:null,inverseTransform:null,ticks:null,tickSize:null,minTickSize:null,tickFormatter:null,tickDecimals:null,tickColor:null,tickLength:null,tickWidth:null,tickHeight:null,tickFont:null,label:null,labelFont:null,labelPadding:2,reserveSpace:null,alignTicksWithAxis:null},yaxis:{position:"left",autoscaleMargin:.02,labelPadding:2},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",strokeColor:null,symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},y=null,rt=null,g=null,c=null,p=null,w=[],k=[],l={left:0,right:0,top:0,bottom:0},nt=0,d=0,b={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},v=this,tt,ft;v.setData=lt;v.setupGrid=yt;v.draw=pt;v.getPlaceholder=function(){return r};v.getCanvas=function(){return y.element};v.getPlotOffset=function(){return l};v.width=function(){return nt};v.height=function(){return d};v.offset=function(){var n=g.offset();return n.left+=l.left,n.top+=l.top,n};v.getData=function(){return a};v.getAxes=function(){var t={};return n.each(w.concat(k),function(n,i){i&&(t[i.direction+(i.n!==1?i.n:"")+"axis"]=i)}),t};v.getXAxes=function(){return w};v.getYAxes=function(){return k};v.c2p=at;v.p2c=ci;v.getOptions=function(){return h};v.highlight=ri;v.unhighlight=ui;v.triggerRedrawOverlay=et;v.pointOffset=function(n){return{left:parseInt(w[ot(n,"x")-1].p2c(+n.x)+l.left,10),top:parseInt(k[ot(n,"y")-1].p2c(+n.y)+l.top,10)}};v.shutdown=vt;v.destroy=function(){vt();r.removeData("plot").empty();a=[];h=null;y=null;rt=null;g=null;c=null;p=null;w=[];k=[];b=null;tt=[];v=null};v.resize=function(n,t){n=n||r.width();t=t||r.height();y.resize(n,t);rt.resize(n,t)};v.hooks=b;oi(v);si(o);vi();lt(e);yt();pt();yi();tt=[];ft=null}function u(n,t,i){var r=t*Math.floor(n/t);return i?i(t).times(i(n).div(i(t)).round()).toString():r}function f(n,t,i,r,u,f){var e=t+r,o=i+u;return n.beginPath(),n.moveTo(t+f,i),n.lineTo(e-f,i),n.quadraticCurveTo(e,i,e,i+f),n.lineTo(e,i+u-f),n.quadraticCurveTo(e,o,e-f,o),n.lineTo(t+f,o),n.quadraticCurveTo(t,o,t,o-f),n.lineTo(t,i+f),n.quadraticCurveTo(t,i,t+f,i),n.closePath(),n}var t=n.isNumeric||function(n){return n-parseFloat(n)>=0};i.prototype.resize=function(n,t){if(n<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+n+", height = "+t);var i=this.element,u=this.context,r=this.pixelRatio;this.width!==n&&(i.width=n*r,i.style.width=n+"px",this.width=n);this.height!==t&&(i.height=t*r,i.style.height=t+"px",this.height=t);u.restore();u.save();u.scale(r,r)};i.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)};i.prototype.render=function(){var h=this._textCache,i,r,u,c,f,l,t,e,o,s,n;for(i in h)if(Object.prototype.hasOwnProperty.call(h,i)){r=this.getTextLayer(i);u=h[i];r.hide();for(c in u)if(Object.prototype.hasOwnProperty.call(u,c)){f=u[c];for(l in f)if(Object.prototype.hasOwnProperty.call(f,l)){t=f[l];for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){for(o=t[e].positions,s=0;n=o[s];s++)n.active?n.rendered||(r.append(n.element),n.rendered=!0):(o.splice(s--,1),n.rendered&&n.element.detach());o.length===0&&delete t[e]}}}r.show()}};i.prototype.getTextLayer=function(t){var i=this.text[t];return i==null&&(this.textContainer==null&&(this.textContainer=n("<div class='flot-text'><\/div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[t]=n("<div><\/div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i};i.prototype.getTextInfo=function(t,i,r,u,f){var g,y,p,w,nt,c,a,v;if(i=""+i,u=(360+(u||0))%360,g=typeof r=="object"?r.style+" "+r.variant+" "+r.weight+" "+r.size+"px/"+r.lineHeight+"px "+r.family:r,y=this._textCache[t],y==null&&(y=this._textCache[t]={}),p=y[g],p==null&&(p=y[g]={}),w=p[u],w==null&&(w=p[u]={}),nt=w[i],nt==null){if(c=n("<div><\/div>").html(i).css({position:"absolute","max-width":f,top:-9999}).appendTo(this.getTextLayer(t)),typeof r=="object"?c.css({font:g,color:r.color}):typeof r=="string"&&c.addClass(r),a=c.outerWidth(!0),v=c.outerHeight(!0),u){var it=u*Math.PI/180,s=Math.sin(it),h=Math.cos(it),tt=h.toFixed(6),rt=(-s).toFixed(6),ut=s.toFixed(6),l;if(n.support.leadingWhitespace){var e=a/2,o=v/2,b=Math.floor(e)+"px "+Math.floor(o)+"px",k,d;u<90?(k=Math.floor(e*h+o*s-e),d=Math.floor(e*s+o*h-o)):u<180?(k=Math.floor(o*s-e*h-e),d=Math.floor(e*s-o*h-o)):u<270?(k=Math.floor(-e*h-o*s-e),d=Math.floor(-e*s-o*h-o)):(k=Math.floor(e*h-o*s-e),d=Math.floor(o*h-e*s-o));l="matrix("+tt+","+ut+","+rt+","+tt+","+k+","+d+")";c.css({width:a+1,transform:l,"-o-transform":l,"-ms-transform":l,"-moz-transform":l,"-webkit-transform":l,"transform-origin":b,"-o-transform-origin":b,"-ms-transform-origin":b,"-moz-transform-origin":b,"-webkit-transform-origin":b})}else l="progid:DXImageTransform.Microsoft.Matrix(M11="+tt+", M12="+rt+", M21="+ut+", M22="+tt+",sizingMethod='auto expand')",c.css({width:a+1,filter:l,"-ms-filter":l,"background-color":"#fff"});var ft=Math.abs(h),et=Math.abs(s),ot=a;a=Math.round(ft*a+et*v);v=Math.round(et*ot+ft*v)}nt=w[i]={width:a,height:v,element:c,positions:[]};c.detach()}return nt};i.prototype.addText=function(n,t,i,r,u,f,e,o,s){var h=this.getTextInfo(n,r,u,f,e),l=h.positions,a,c;for(o==="center"?t-=h.width/2:o==="right"&&(t-=h.width),s==="middle"?i-=h.height/2:s==="bottom"&&(i-=h.height),a=0;c=l[a];a++)if(c.x===t&&c.y===i){c.active=!0;return}c={active:!0,rendered:!1,element:l.length?h.element.clone():h.element,x:t,y:i};l.push(c);c.element.css({top:Math.round(i),left:Math.round(t),"text-align":o})};i.prototype.removeText=function(n,t,i,r,u,f){var e,h,o,s,a,c,v,l,y;if(r==null){if(s=this._textCache[n],s!=null)for(a in s)if(Object.prototype.hasOwnProperty.call(s,a)){c=s[a];for(v in c)if(Object.prototype.hasOwnProperty.call(c,v)){l=c[v];for(y in l)if(Object.prototype.hasOwnProperty.call(l,y))for(h=l[y].positions,e=0;o=h[e];e++)o.active=!1}}}else for(h=this.getTextInfo(n,r,u,f).positions,e=0;o=h[e];e++)o.x===t&&o.y===i&&(o.active=!1)};n.plot=function(t,i,u){return new r(n(t),i,u,n.plot.plugins)};n.plot.version="0.9.0-alpha";n.plot.plugins=[];n.fn.plot=function(t,i){return this.each(function(){n.plot(this,t,i)})}}(jQuery),function(n){function o(o,h){var a={"default":function(r,u){f(r,!0);t=new i.Canvas("flot-base",r.getPlaceholder());e(r);s(r,u);n(".flot-text").show()},rectangular:function(o,s){function p(n){for(var s,h,i=n.options,c=n.ticks||[],f=i.labelWidth||0,e=i.labelHeight||0,v=n.direction+"Axis "+n.direction+n.n+"Axis",l="flot-"+n.direction+"-axis flot-"+n.direction+n.n+"-axis "+v,a=i.font||"flot-tick-label tickLabel",o=0;o<c.length;++o)(s=c[o],s.label)&&(h=t.getTextInfo(l,s.label,a),i.labelWidth==null&&(f=Math.max(f,h.width)),i.labelHeight==null&&(e=Math.max(e,h.height)));n.labelWidth=Math.ceil(f);n.labelHeight=Math.ceil(e);r=l;u=a}function w(n,t){return t*Math.floor(n/t)}function b(n){var i=n.options,c,h,o,r;c=typeof i.ticks=="number"&&i.ticks>0?i.ticks:.3*Math.sqrt(n.direction=="x"?t.width:t.height);var s=(n.max-n.min)/c,f=-Math.floor(Math.log(s)/Math.LN10),u=i.tickDecimals;if(u!=null&&f>u&&(f=u),h=Math.pow(10,-f),o=s/h,o<1.5?r=1:o<3?(r=2,o>2.25&&(u==null||f+1<=u)&&(r=2.5,++f)):r=o<7.5?5:10,r*=h,i.minTickSize!=null&&r<i.minTickSize&&(r=i.minTickSize),n.delta=s,n.tickDecimals=Math.max(0,u!=null?u:f),n.tickSize=i.tickSize||r,i.mode=="time"&&!n.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");var l=[],y=w(n.min,n.tickSize),a=0,e=Number.NaN,v;do v=e,e=y+a*n.tickSize,l.push({v:e,label:e}),++a;while(e<n.max&&e!=v);return p(n),l}function v(n,i,f){var k,a,v,e,s,w,nt,h,c;if(f.ticks=b(f),i.save(),k=n.getPlotOffset(),i.translate(k.left,k.top),a=n.p2c({x:0,y:0}),i.textAlign="end",i.textBaseline="middle",!!f.ticks&&!!f.ticks.length)for(v=0;v<f.ticks.length;v++)if(e=f.ticks[v],!(e.v<f.min)&&!(e.v>f.max)){var o=f.p2c(e.v),y=0,d=0,p=0,g=0;if(f.direction=="x"?(y=o,d=y,p=0,g=n.height()):(y=0,d=n.width(),p=o,g=p),e.v!="0"&&(i.beginPath(),i.strokeStyle=f.options.tickColor,i.moveTo(y,p),i.lineTo(d,g),i.stroke()),typeof e.label!="undefined"){if(s=f.labelWidth,w=f.labelHeight,!r||!u||(nt=t.getTextInfo(r,e.label,u),s=nt.width,w=nt.height),h=0,c=0,f.direction=="x")if(e.label!="0")h=o+s/2,c=a.top+w/2;else continue;else e.label!="0"?(h=a.left-s/2,c=o):(h=a.left-s/2,c=o+w/2);i.fillStyle=l.grid.borderColor;i.strokeStyle=l.grid.borderColor;i.beginPath();i.fillText(e.label,h,c);i.stroke()}}i.restore()}var a;f(o,!1);var l=o.getOptions(),y=o.getAxes(),h=y.xaxis,c=y.yaxis;typeof l!="undefined"&&(typeof h.min!="undefined"&&(l.xaxis.min=h.min),typeof h.max!="undefined"&&(l.xaxis.max=h.max),typeof c.min!="undefined"&&(l.yaxis.min=c.min),typeof c.max!="undefined"&&(l.yaxis.max=c.max));n.extend(!0,l.xaxis,{min:h.min,max:h.max});n.extend(!0,l.yaxis,{min:c.min,max:c.max});n.extend(!0,h,l.xaxis);n.extend(!0,c,l.yaxis);h.used=!0;c.used=!0;e(o);t=new i.Canvas("flot-coordinate",o.getPlaceholder());n(".flot-coordinate").remove().insertBefore(n(".flot-overlay"));s.save();s.strokeStyle=l.grid.borderColor;s.lineWidth=1;a=o.getPlotOffset();s.translate(a.left,a.top);s.beginPath();s.moveTo(h.p2c(h.min),c.p2c(0));s.lineTo(h.p2c(h.max),c.p2c(0));s.stroke();s.moveTo(h.p2c(0),c.p2c(c.min));s.lineTo(h.p2c(0),c.p2c(c.max));s.stroke();s.restore();v(o,s,h);v(o,s,c)},auto:function(n,t){var i=n.getAxes(),r=i.xaxis,u=i.yaxis;r.min<=0&&r.max>=0&&u.min<=0&&u.max>=0?this.rectangular&&this.rectangular(n,t):this["default"]&&this["default"](n,t)}},p=o.getOptions(),v=p.coordinate.type.split("|"),y=n(".flot-text"),c,l;for(y.hide(),c=0;c<v.length;c++)l=v[c],a[l]&&a[l](o,h,y)}function f(t,i){var f=t.getOptions(),r=t.getXAxes(),u=t.getYAxes();n.each(r,function(n,t){t.show=i;t.reserveSpace=i;t.options.show=i;t.options.reserveSpace=i});n.each(u,function(n,t){t.show=i;t.reserveSpace=i;t.options.show=i;t.options.reserveSpace=i})}function e(t){var u=t.getOptions(),e=t.getAxes(),r=e.xaxis,i=e.yaxis,o,s,h,f;u.coordinate.ratioXY&&(n.extend(!0,r.options,{min:r.min,max:r.max}),n.extend(!0,i.options,{min:i.min,max:i.max}),o=parseFloat(u.coordinate.ratioXY),r.options=r.options||{},r.options.max||(r.options.max=r.max||10),r.options.min||(r.options.min=r.min||-10),s=r.options.max-r.options.min,h=s/(o*t.width()/t.height()),i.options=i.options||{},i.options.max||(i.options.max=i.max||10),i.options.min||(i.options.min=i.min||-10),f=(i.options.max-i.options.min)/h,i.options.max=i.options.max/f,i.options.min=i.options.min/f,n.extend(!0,u,{xaxis:{options:{min:r.options.min,max:r.options.max}},yaxis:{options:{min:i.options.min,max:i.options.max}}}),t.setupGrid())}function s(n){var u=n.getOptions(),e=n.getAxes(),i=e.xaxis,r=e.yaxis,t=n.getCanvas().getContext("2d"),f;t.save();t.strokeStyle=u.grid.borderColor;t.lineWidth=1;f=n.getPlotOffset();t.translate(f.left,f.top);t.beginPath();t.moveTo(i.p2c(i.min)-1,r.p2c(r.min));t.lineTo(i.p2c(i.max),r.p2c(r.min));t.closePath();t.stroke();t.beginPath();t.moveTo(i.p2c(i.min),r.p2c(r.min)-1);t.lineTo(i.p2c(i.min),r.p2c(r.max));t.closePath();t.stroke();t.lineWidth=1;t.beginPath();t.moveTo(i.p2c(i.max)+1,r.p2c(r.min));t.lineTo(i.p2c(i.max)+1-15,r.p2c(r.min)-7);t.lineTo(i.p2c(i.max)+1-10,r.p2c(r.min));t.lineTo(i.p2c(i.max)+1-15,r.p2c(r.min)+7);t.lineTo(i.p2c(i.max)+1,r.p2c(r.min));t.closePath();t.fillStyle=u.grid.borderColor;t.fill();t.beginPath();t.moveTo(i.p2c(i.min),r.p2c(r.max)-1);t.lineTo(i.p2c(i.min)-7,r.p2c(r.max)- -14);t.lineTo(i.p2c(i.min),r.p2c(r.max)- -9);t.lineTo(i.p2c(i.min)+7,r.p2c(r.max)- -14);t.lineTo(i.p2c(i.min),r.p2c(r.max)-1);t.closePath();t.fillStyle=u.grid.borderColor;t.fill();t.restore()}function h(t,r){i=r;t.hooks.drawBackground.push(o);t.hooks.bindEvents.push(function(){var i=t.getOptions();!i.xaxis.highlightTick||!i.xaxis.highlightColor||n(".flot-x-axis ."+i.xaxis.highlightTick).css({color:i.xaxis.highlightColor});!i.yaxis.highlightTick||!i.yaxis.highlightColor||n(".flot-y-axis ."+i.yaxis.highlightTick).css({color:i.yaxis.highlightColor});n(".flot-text").filter(function(){return n(this).text()===""}).remove()})}var i=null,t=null,r="",u="",c={coordinate:{type:"default"},xaxis:{tickFormatter:function(n){return n}},yaxis:{tickFormatter:function(n){return n}}};n.plot.plugins.push({init:h,options:c,name:"coordinate",version:"1.6"})}(jQuery),function($){function processSeries(plot,series,data_,datapoints){var options=plot.getOptions(),handlers={explicitFunctionFx:function(plot,series,data_){var axes=plot.getAxes(),xaxis=axes.xaxis,yaxis=axes.yaxis,inputParts=series.input.trim().split("="),step,data,x,y;if(inputParts&&inputParts.length==2){for(step=(xaxis.options.max-xaxis.options.min)/50,data=[],x=xaxis.options.min;x<=xaxis.options.max;x+=step)y=eval(inputParts[1]),data.push([x,y]);data_=data;series.data=data}}},type;series.input&&options.seriesParserEnabled&&(type=series.inputType,handlers[type]&&handlers[type](plot,series,data_,datapoints))}function init(n){n.hooks.processRawData.push(processSeries)}var options={seriesParserEnabled:!1};$.plot.plugins.push({init:init,options:options,name:"seriesParser",version:"1.0"})}(jQuery),function(n){function t(n,t){var i={point:function(n,t,i,r){var u=r;n.rect(t-u,i-u,u*2,u*2)},pixel:function(n,t,i,r){var u=r;n.rect(t,i,u,u)}},r=t.points.symbol;i[r]&&(t.points.symbol=i[r])}function i(n){n.hooks.processDatapoints.push(t)}n.plot.plugins.push({init:i,name:"plotSymbols",version:"1.0"})}(jQuery),function(n){function t(n,t){var i={square:function(n,t,i,r){var u=r*Math.sqrt(Math.PI)/2;n.rect(t-u,i-u,u+u,u+u)},diamond:function(n,t,i,r){var u=r*Math.sqrt(Math.PI/2);n.moveTo(t-u,i);n.lineTo(t,i-u);n.lineTo(t+u,i);n.lineTo(t,i+u);n.lineTo(t-u,i)},triangle:function(n,t,i,r,u){var f=r*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3)),e=f*Math.sin(Math.PI/3);n.moveTo(t-f/2,i+e/2);n.lineTo(t+f/2,i+e/2);u||(n.lineTo(t,i-e/2),n.lineTo(t-f/2,i+e/2))},cross:function(n,t,i,r){var u=r*Math.sqrt(Math.PI)/2;n.moveTo(t-u,i-u);n.lineTo(t+u,i+u);n.moveTo(t-u,i+u);n.lineTo(t+u,i-u)}},r=t.points.symbol;i[r]&&(t.points.symbol=i[r])}function i(n){n.hooks.processDatapoints.push(t)}n.plot.plugins.push({init:i,name:"symbols",version:"1.0"})}(jQuery),function(){typeof zizhujy=="undefined"&&(zizhujy={});window.zizhujy=zizhujy;typeof zizhujy.com=="undefined"&&(zizhujy.com={});typeof zizhujy.com.LaTexLex=="undefined"&&(zizhujy.com.LaTexLex={version:1.2,TokenEnum:{FUNCTION_NAME:{value:-1,name:"Function Name",code:"sin",regex:/^(\\?sin|\\?cosec|\\?cos|\\?tan|\\?cot|\\?pow|\\?exp|sqrt|\\?sign|\\?log|\\?ln|\\?sec|\\?sgn|\\?arcsin|\\?arccos|\\?arctan|\\?arccot|\\?abs|\\?asin|\\?acos|\\?atan|\\?acot)$/},CONSTANT_VALUE:{value:0,name:"Constant Value",code:"PI",regex:/^(PI|\\PI|E|\\E|e|\\e|pi|\\pi)$/},VARIABLE_NAME:{value:1,name:"Variable Name",code:"x",regex:/^[a-zA-Z][a-zA-Z0-9]*$/},DIGITAL_NUMBER:{value:2,name:"Digital Number",code:"123`repetend`",regex:/^(\d+|\d*\.\d+(?:`\d+`)?|\d*.`\d+`)$/},IDENTIFIER:{value:3,name:"Identifier",code:"abc",regex:/^[A-Za-z]\w*$/},PLUS_OPERATOR:{value:4,name:"Plus Operator",code:"+",regex:/^\+$/},POWER_OPERATOR:{value:5,name:"Power Operator",code:"^",regex:/^\^$/},MINUS_OPERATOR:{value:6,name:"Minus Operator",code:"-",regex:/^\-$/},MULTIPLY_OPERATOR:{value:7,name:"Multiply Operator",code:"*",regex:/^\*$/},DIVIDE_OPERATOR:{value:8,name:"Divide Operator",code:"/",regex:/^\/$/},EVALUATION_OPERATOR:{value:9,name:"Evaluation Operator",code:"=",regex:/^=$/},LATEX_NAME:{value:10,name:"LaTex Name",code:"\\frac",regex:/^(\\frac|\\sqrt|\\cdot|\\left|\\right)$/},DOLLAR_SIGN:{value:11,name:"Dollar Sign",code:"$",regex:/^\$$/},NEW_LINE:{value:12,name:"New Line",code:"\r\n",regex:/^[\r\n]$/},WHITE_SPACE:{value:13,name:"White Space",code:" ",regex:/^\s+$/},OPEN_PARENTHESIS:{value:14,name:"Open Parenthesis",code:"(",regex:/^\($/},CLOSING_PARENTHESIS:{value:15,name:"Closing Parenthesis",code:")",regex:/^\)$/},OPEN_BRACE:{value:16,name:"Open Brace",code:"{",regex:/^\{$/},CLOSING_BRACE:{value:17,name:"Closing Brace",code:"}",regex:/^\}$/},SEMICOLON:{value:18,name:"Semicolon",code:";",regex:/^;$/},COMMA:{value:19,name:"Comma",code:",",regex:/^,$/},LESS_THAN:{value:20,name:"Less Than",code:"<",regex:/^<$/},LATEX_NAME_OPEN_BRACE:{value:21,name:"Open Brace inside LaTex command",code:"\\{",regex:/^\\\{$/},LATEX_NAME_CLOSING_BRACE:{value:22,name:"Closing Brace inside LaTex command",code:"\\}",regex:/^\\\}$/},PIPE:{value:23,name:"Pipe line",code:"|",regex:/^\|$/},GREATER_THAN:{value:24,name:"Greater Than",code:">",regex:/^>$/},LESS_THAN_OR_EQUAL_TO:{value:25,name:"Less than or equal to",code:"le ",regex:/^\\[Ll][Ee] ?$/},GREATER_THAN_OR_EQUAL_TO:{value:26,name:"Greater than or equal to",code:"ge ",regex:/^\\[Gg][Ee] ?$/},END_OF_SOURCE:{value:89,name:"End of Source",code:"",regex:/^$/},NONSENSE:{value:99,name:"Nonsense",code:"@",regex:/^[&#]+$/},OTHER:{value:999,name:"Other",code:"...",regex:null}},CharClassEnum:{LETTER:{value:0,name:"Letter",code:"A"},DIGIT:{value:1,name:"Digit",code:"0"},POINT:{value:2,name:"Point",code:"."},OPEN_PARENTHESIS:{value:3,name:"Open Parenthesis",code:"("},CLOSING_PARENTHESIS:{value:4,name:"Closing Parenthesis",code:")"},OPEN_BRACE:{value:5,name:"Open Brace",code:"{"},CLOSING_BRACE:{value:6,name:"Closing Brace",code:"}"},PLUS_OPERATOR:{value:7,name:"Plus Operator",code:"+"},POWER_OPERATOR:{value:8,name:"Power Operator",code:"^"},MINUS_OPERATOR:{value:9,name:"Minus Operator",code:"-"},MULTIPLY_OPERATOR:{value:10,name:"Multiply Operator",code:"*"},DIVIDE_OPERATOR:{value:11,name:"Divide Operator",code:"/"},EVALUATION_OPERATOR:{value:12,name:"Evaluation Operator",code:"="},BACK_SLASH:{value:13,name:"Back Slash",code:"\\"},DOLLAR_SIGN:{value:14,name:"Dollar Sign",code:"$"},NEW_LINE:{value:15,name:"New Line",code:"\r\n"},WHITE_SPACE:{value:16,name:"White Space",code:" "},END_OF_SOURCE:{value:17,name:"End of Source",code:""},SEMICOLON:{value:18,name:"Semicolon",code:";"},COMMA:{value:19,name:"Comma",code:","},NONSENSE:{value:99,name:"Nonsense",code:"@"},OTHER:{value:999,name:"Other",code:"..."}},source:"",index:0,peekStore:{source:0,index:0,nextChar:"",lexeme:"",charClass:{value:17,name:"Nonsense",code:"@"}},nextChar:"",lexeme:"",charClass:{value:17,name:"Nonsense",code:"@"},tokenLexemeList:[],getChar:function(){this.nextChar=this.source.substr(this.index,1);switch(this.nextChar){case"A":case"B":case"C":case"D":case"E":case"F":case"G":case"H":case"I":case"J":case"K":case"L":case"M":case"N":case"O":case"P":case"Q":case"R":case"S":case"T":case"U":case"V":case"W":case"X":case"Y":case"Z":case"a":case"b":case"c":case"d":case"e":case"f":case"g":case"h":case"i":case"j":case"k":case"l":case"m":case"n":case"o":case"p":case"q":case"r":case"s":case"t":case"u":case"v":case"w":case"x":case"y":case"z":case"_":this.charClass=this.CharClassEnum.LETTER;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"`":this.charClass=this.CharClassEnum.DIGIT;break;case".":this.charClass=this.CharClassEnum.POINT;break;case"(":this.charClass=this.CharClassEnum.OPEN_PARENTHESIS;break;case")":this.charClass=this.CharClassEnum.CLOSING_PARENTHESIS;break;case"{":this.charClass=this.CharClassEnum.OPEN_BRACE;break;case"}":this.charClass=this.CharClassEnum.CLOSING_BRACE;break;case"+":this.charClass=this.CharClassEnum.PLUS_OPERATOR;break;case"-":this.charClass=this.CharClassEnum.MINUS_OPERATOR;break;case"^":this.charClass=this.CharClassEnum.POWER_OPERATOR;break;case"*":this.charClass=this.CharClassEnum.MULTIPLY_OPERATOR;break;case"/":this.charClass=this.CharClassEnum.DIVIDE_OPERATOR;break;case"=":this.charClass=this.CharClassEnum.EVALUATION_OPERATOR;break;case"\\":this.charClass=this.CharClassEnum.BACK_SLASH;break;case"$":this.charClass=this.CharClassEnum.DOLLAR_SIGN;break;case"\r":case"\n":this.charClass=this.CharClassEnum.NEW_LINE;break;case" ":this.charClass=this.CharClassEnum.WHITE_SPACE;break;case"@":this.charClass=this.CharClassEnum.NONSENSE;break;case";":this.charClass=this.CharClassEnum.SEMICOLON;break;case",":this.charClass=this.CharClassEnum.COMMA;break;case"":this.charClass=this.CharClassEnum.END_OF_SOURCE;break;default:this.charClass=this.CharClassEnum.OTHER}},addChar:function(){this.charClass!=this.CharClassEnum.WHITE_SPACE&&this.charClass!=this.CharClassEnum.NEW_LINE&&(this.lexeme+=this.nextChar);this.index++},TokenLexemeStruct:function(n,t){this.token=n;this.lexeme=t},lookup:function(n){var i=this.TokenEnum.NONSENSE;for(var t in this.TokenEnum)if(!!this.TokenEnum[t].regex&&this.TokenEnum[t].regex instanceof RegExp&&this.TokenEnum[t].regex.test(n)){i=this.TokenEnum[t];break}return this.lexeme="",new this.TokenLexemeStruct(i,n)},eos:function(){return this.index>=this.source.length},lex:function(){if(this.eos())return new this.TokenLexemeStruct(this.TokenEnum.END_OF_SOURCE,"");this.getChar();switch(this.charClass){case this.CharClassEnum.LETTER:for(this.addChar(),this.getChar();this.charClass==this.CharClassEnum.LETTER||this.charClass==this.CharClassEnum.DIGIT;)this.addChar(),this.getChar();return this.lookup(this.lexeme);case this.CharClassEnum.DIGIT:for(this.addChar(),this.getChar();this.charClass==this.CharClassEnum.DIGIT;)this.addChar(),this.getChar();if(this.charClass==this.CharClassEnum.POINT){for(this.addChar(),this.getChar();this.charClass==this.CharClassEnum.DIGIT;)this.addChar(),this.getChar();return this.lookup(this.lexeme)}return this.lookup(this.lexeme);case this.CharClassEnum.POINT:for(this.addChar(),this.getChar();this.charClass==this.CharClassEnum.DIGIT;)this.addChar(),this.getChar();return this.lookup(this.lexeme);case this.CharClassEnum.OPEN_PARENTHESIS:return this.addChar(),this.getChar(),this.lookup(this.lexeme);case this.CharClassEnum.BACK_SLASH:if(this.addChar(),this.getChar(),this.charClass==this.CharClassEnum.LETTER)for(this.addChar(),this.getChar();this.charClass==this.CharClassEnum.LETTER;)this.addChar(),this.getChar();else this.addChar(),this.getChar();return this.lookup(this.lexeme);case this.CharClassEnum.COMMA:return this.addChar(),this.getChar(),this.lookup(this.lexeme);case this.CharClassEnum.WHITE_SPACE:for(this.addChar(),this.getChar();this.charClass==this.CharClassEnum.WHITE_SPACE;)this.addChar(),this.getChar();return null;case this.CharClassEnum.NEW_LINE:for(this.addChar(),this.getChar();this.charClass==this.CharClassEnum.NEW_LINE;)this.addChar(),this.getChar();return null;default:return this.addChar(),this.lookup(this.lexeme)}},init:function(n){this.source=n;this.index=0;this.nextChar="";this.lexeme="";this.charClass=this.CharClassEnum.NONSENSE},run:function(){for(arguments.length>0&&this.init(arguments[0]),this.tokenLexemeList.clear();!this.eos();){var n=this.lex();!n||this.tokenLexemeList.push(n)}return this.tokenLexemeList},beginPeek:function(){this.peekStore.source=this.source;this.peekStore.index=this.index;this.peekStore.nextChar=this.nextChar;this.peekStore.lexeme=this.lexeme;this.peekStore.charClass=this.charClass},endPeek:function(){this.source=this.peekStore.source;this.index=this.peekStore.index;this.nextChar=this.peekStore.nextChar;this.lexeme=this.peekStore.lexeme;this.charClass=this.peekStore.charClass},htmlTokenLexemeListToTable:function(){var t="Token",i="Lexeme",n;arguments.length>0&&(t=arguments[0]);arguments.length>1&&(i=arguments[1]);var r=new StringBuffer;for(n=0;n<this.tokenLexemeList.length;n++)r.append("<tr><td>{0}<\/td><td>{1}<\/td><\/tr>".format(this.tokenLexemeList[n].token.name,this.tokenLexemeList[n].lexeme));return'<table class="tbGridView"><thead><tr><th>{0}<\/th><th>{1}<\/th><\/tr><\/thead><tbody>{2}<\/tbody><\/table>'.format(t,i,r.toString())}})}(),function(n){typeof zizhujy=="undefined"&&(zizhujy={});window.zizhujy=zizhujy;typeof zizhujy.com=="undefined"&&(zizhujy.com={});typeof zizhujy.com.LaTexParser=="undefined"&&(zizhujy.com.LaTexParser={version:1.2,source:"",errorList:[],logBuffer:new StringBuffer,nextToken:null,tree:null,currentNode:null,tempNode:null,logPadCount:0,init:function(t){this.source=t;this.nextToken=new n.TokenLexemeStruct(n.TokenEnum.NONSENSE,"");this.errorList.clear();this.logBuffer=new StringBuffer;this.tree=null;this.currentNode=null;this.tempNode=null;n.init(t)},lex:function(){var i=!1,t=null;if(arguments.length>0)switch(typeof arguments[0]){case"boolean":i=arguments[0];switch(typeof arguments[1]){case"object":t=arguments[1]}}if(this.nextToken.token!=n.TokenEnum.END_OF_SOURCE)for(i&&(t?this.newLeafForTree(t):this.newLeafForTree()),this.nextToken=n.lex(),this.log("Call lex /* returns {0} as {1}*/".format(!this.nextToken?"<null>":this.nextToken.lexeme,!this.nextToken?"<null>":this.nextToken.token.name));!this.nextToken;)this.nextToken=n.lex(),this.log("Call lex /* returns {0} */".format(!this.nextToken?"<null>":this.nextToken.lexeme))},peek:function(){n.beginPeek();var t=this.nextToken;if(t.token!=n.TokenEnum.END_OF_SOURCE)for(t=n.lex();!t;)t=n.lex();return n.endPeek(),t},log:function(n){n.startsWith("Exit")&&(this.logPadCount-=4);this.logBuffer.append(".".duplicate(this.logPadCount)+n);n.startsWith("Enter")&&(this.logPadCount+=4)},Exception:function(){this.errorEnum=zizhujy.com.LaTexParser.errorEnum.UNKNOWN_ERROR;arguments.length>0&&(this.errorEnum=arguments[0]);this.index=n.index-zizhujy.com.LaTexParser.nextToken.lexeme.length;arguments.length>1&&(this.index=arguments[1]);this.context=zizhujy.com.LaTexParser.source.substring(this.index>=10?this.index-10:0,this.index)+zizhujy.com.LaTexParser.source.substring(this.index,this.index+zizhujy.com.LaTexParser.nextToken.lexeme.length)+zizhujy.com.LaTexParser.source.substr(this.index+zizhujy.com.LaTexParser.nextToken.lexeme.length,10);this.contextIndicator="-".duplicate(this.index>=10?10:this.index)+"^".duplicate(zizhujy.com.LaTexParser.nextToken.lexeme.length)+"-".duplicate(10);this.contextHTML=zizhujy.com.LaTexParser.source.substring(this.index>=10?this.index-10:0,this.index).htmlEncode()+'<span style="color: red; font-weight: bold; font-size: larger; border: solid 1px red; padding: 5px;">{0}<\/span>'.format(zizhujy.com.LaTexParser.source.substring(this.index,this.index+zizhujy.com.LaTexParser.nextToken.lexeme.length).htmlEncode())+zizhujy.com.LaTexParser.source.substr(this.index+zizhujy.com.LaTexParser.nextToken.lexeme.length,10).htmlEncode();this.actualToken=zizhujy.com.LaTexParser.nextToken;this.__initialized__||(zizhujy.com.LaTexParser.Exception.prototype.__calculateRowCol__=function(){var t="\n",n;arguments.length>0&&(t=arguments[0]);var f=zizhujy.com.LaTexParser.source,i=1,r=1,u=0;for(n=0;n<this.index-t.length+1;n++)f.substr(n,t.length)==t&&(i++,u=n);r+=n-u-1;this.__rowCache__=i;this.__colCache__=r},zizhujy.com.LaTexParser.Exception.prototype.row=function(){return this.__rowCache__||this.__calculateRowCol__(),this.__rowCache__},zizhujy.com.LaTexParser.Exception.prototype.col=function(){return this.__colCache__||this.__calculateRowCol__(),this.__colCache__},this.__initialized__=!0)},nodeTypeEnum:{EQUATION:{value:0,name:"Equation"},EXPRESSION:{value:1,name:"Expression"},TERM:{value:2,name:"Term"},FACTOR:{value:3,name:"Factor"},POWER:{value:4,name:"Power"},VARIABLE_NAME:{value:5,name:"Variable Name"},LATEX_COMMAND:{value:6,name:"LaTex Command"},FUNCTION_EXPRESSION:{value:7,name:"Function Expression"},CONSTANT_VALUE:{value:8,name:"Constant Value"},DIGITAL_NUMBER:{value:9,name:"Digital Number"},CONSTRAINT:{value:10,name:"Constraint"},CONSTRAINTS:{value:11,name:"Constraints"},OTHER_LEXEME:{value:26,name:"Other Lexeme"},UNKNOWN:{value:99,name:"Unknown"}},TreeNode:function(n,t,i){if(this.nodeType=zizhujy.com.LaTexParser.nodeTypeEnum.UNKNOWN,this.expression="",this.parent=null,this.children=[],arguments.length>0&&(this.nodeType=arguments[0]),arguments.length>1&&(this.expression=arguments[1]),arguments.length>2&&(arguments[2]==null||arguments[2]instanceof zizhujy.com.LaTexParser.TreeNode)&&(this.parent=arguments[2]),arguments.length>3)if(arguments[2]instanceof Array)for(var r=0;r<arguments[3].length;r++)arguments[3][r]instanceof zizhujy.com.LaTexParser.TreeNode&&this.children.push(arguments[3][r]);else arguments[3]instanceof zizhujy.com.LaTexParser.TreeNode&&this.children.push(arguments[3]);zizhujy.com.LaTexParser.log("+ A node was added to its parent node '{2}' with the expression: '{1}' as type {0}".format(this.nodeType.name,this.expression,!this.parent?"Root":this.parent.nodeType.name));this.__initialized__||(zizhujy.com.LaTexParser.TreeNode.prototype.addChildren=function(n){if(n instanceof Array)for(var t=0;t<n.length;t++)n[t]instanceof zizhujy.com.LaTexParser.TreeNode&&this.children.push(n[t]);else n instanceof zizhujy.com.LaTexParser.TreeNode&&this.children.push(n)},zizhujy.com.LaTexParser.TreeNode.prototype.getLeaves=function(){var n=[],t;if(!this.children)n.push(this);else if(this.children.length<=0)n.push(this);else for(t=0;t<this.children.length;t++)n=n.concat(this.children[t].getLeaves());return n},zizhujy.com.LaTexParser.TreeNode.prototype.eval=function(){var n,f,t,e,u,o,i,r;if(!this.evalCache){n=!0;try{switch(this.nodeType){case zizhujy.com.LaTexParser.nodeTypeEnum.CONSTRAINTS:case zizhujy.com.LaTexParser.nodeTypeEnum.CONSTRAINT:this.evalCache="";n=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.CONSTANT_VALUE:this.evalCache=this.getExpression().replaceAll("\\","");n=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.DIGITAL_NUMBER:this.evalCache=this.getExpression();Fraction&&Fraction.repeatingDecimalRegex&&Fraction.repeatingDecimalRegex.test(this.evalCache)?(f=Fraction.newFraction(this.evalCache),f.valid?(n=!0,this.evalCache="\\frac{"+f.numerator+"}{"+f.denominator+"}"):n=!1):n=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.VARIABLE_NAME:case zizhujy.com.LaTexParser.nodeTypeEnum.OTHER_LEXEME:this.evalCache=this.getExpression().replaceAll("\\cdot","*").replaceAll("\\cos","cos").replaceAll("\\sin","sin").replaceAll("\\cosec","cosec").replaceAll("\\tan","tan").replaceAll("\\cot","cot").replaceAll("\\pow","pow").replaceAll("\\exp","exp").replaceAll("\\sign","sign").replaceAll("\\log","log").replaceAll("\\ln","ln").replaceAll("\\sec","sec").replaceAll("\\sgn","sgn").replaceAll("\\arcsin","arcsin").replaceAll("\\arccos","arccos").replaceAll("\\arctan","arctan").replaceAll("\\arccot","arccot").replaceAll("\\asin","asin").replaceAll("\\acos","acos").replaceAll("\\atan","atan").replaceAll("\\acot","acot").replaceAll("\\abs","abs");n=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.FACTOR:n=this.children.reduce(function(n,t){return n&&t.isValid()},!0);this.evalCache=zizhujy.com.LaTexParser.TreeNode.evalFactor(this.children.map(function(n){return n.eval()}));break;case zizhujy.com.LaTexParser.nodeTypeEnum.EQUATION:case zizhujy.com.LaTexParser.nodeTypeEnum.EXPRESSION:case zizhujy.com.LaTexParser.nodeTypeEnum.FUNCTION_EXPRESSION:case zizhujy.com.LaTexParser.nodeTypeEnum.TERM:case zizhujy.com.LaTexParser.nodeTypeEnum.POWER:for(t=new StringBuffer,e=!1,u=0;u<this.children.length;u++)this.children[u].getExpression()=="|"?e?(t.append(")"),e=!1):(i=t.toString().trim(),i.length>0&&(r=i.substr(i.length-1,1),(!isNaN(parseFloat(r))&&isFinite(r)||r==")")&&t.append("*")),t.append("abs("),e=!0):(o=this.children[u].eval(),(o.toString().startsWith("(")||o.toString().startsWith("abs("))&&(i=t.toString().trim(),i.length>0&&(r=i.substr(i.length-1,1),(!isNaN(parseFloat(r))&&isFinite(r)||r==")")&&t.append("*"))),t.append(o),n=n&&this.children[u].isValid());this.evalCache=t.toString();break;case zizhujy.com.LaTexParser.nodeTypeEnum.LATEX_COMMAND:if(this.children.length===0)switch(this.expression){case"\\le":this.evalCache="<=";n=n&&!0;break;case"\\ge":this.evalCache=">=";n=n&&!0;break;default:this.evalCache="[Not Recognized LaTex]";n=!1}else{n=n&&this.children[0].isValid();switch(this.children[0].expression){case"\\frac":this.evalCache="({0})/({1})".format(this.children[2].eval(),this.children[5].eval());n=n&&this.children[2].isValid();n=n&&this.children[5].isValid();break;case"\\sqrt":this.evalCache="sqrt({0})".format(this.children[2].eval());n=n&&this.children[2].isValid();break;default:this.evalCache="[Not Recognized LaTex]";n=!1}}break;case zizhujy.com.LaTexParser.nodeTypeEnum.UNKNOWN:default:this.evalCache="[Unknown Node Type: {"+this.nodeType.name+"}]";n=!1}}catch(s){console.log(s);this.evalCache="[Error Thrown]";n=!1}finally{this.isValidCache=n}}return this.evalCache},zizhujy.com.LaTexParser.TreeNode.prototype.intervalEval=function(){var t,f,h,l,e,i,n;if(!this.intervalEvalCache){t=!0;try{switch(this.nodeType){case zizhujy.com.LaTexParser.nodeTypeEnum.CONSTRAINT:case zizhujy.com.LaTexParser.nodeTypeEnum.CONSTRAINTS:this.intervalEvalCache="";bug-http-zizhujycom-zh-c;t=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.VARIABLE_NAME:this.intervalEvalCache=this.getExpression();t=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.CONSTANT_VALUE:this.intervalEvalCache="IntervalArithmetic.constantValue("+this.getExpression().replace("\\","")+")";t=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.DIGITAL_NUMBER:this.intervalEvalCache="{val: [{0}, {1}], def: [true, true]}".format(this.getExpression(),this.getExpression());t=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.OTHER_LEXEME:this.intervalEvalCache=this.getExpression().replaceAll("\\cos","cos").replaceAll("\\sin","sin").replaceAll("\\cosec","cosec").replaceAll("\\tan","tan").replaceAll("\\cot","cot").replaceAll("\\pow","pow").replaceAll("\\exp","exp").replaceAll("\\sign","sign").replaceAll("\\log","log").replaceAll("\\ln","ln").replaceAll("\\sec","sec").replaceAll("\\sgn","sgn").replaceAll("\\arcsin","arcsin").replaceAll("\\arccos","arccos").replaceAll("\\arctan","arctan").replaceAll("\\arccot","arccot").replaceAll("\\asin","asin").replaceAll("\\acos","acos").replaceAll("\\atan","atan").replaceAll("\\acot","acot").replaceAll("\\abs","abs");t=!0;break;case zizhujy.com.LaTexParser.nodeTypeEnum.FACTOR:i=new StringBuffer;f=0;this.children[0].getExpression()=="-"|this.children[0].getExpression()=="+"&&(f=1);var n=f+1,u=!1,r=this.children[f].intervalEval();for(t=t&&this.children[f].isValid();!!this.children[n]&&this.children[n].expression=="^"||!!this.children[n];)!this.children[n]||this.children[n].expression!="^"?u?(r="{0}{1})".format(r,this.children[n].intervalEval()),t=t&&this.children[n].isValid(),n++,u=!1):(r="IntervalArithmetic.multiply({0}, ".format(r),t=t&&this.children[n].isValid(),n++,u=!0):(h="IntervalArithmetic.pow({0}, {1})".format(this.children[n-1].intervalEval(),!this.children[n+1]?"":this.children[n+1].intervalEval()),u?(r="{0}{1})".format(r,h),u=!1):r="IntervalArithmetic.pow({0}, {1})".format(r,!this.children[n+1]?"":this.children[n+1].intervalEval()),t=t&&!!this.children[n+1]&&this.children[n+1].isValid(),n+=2);u&&(r="{0}{1})".format(r,this.children[this.children.length-1].intervalEval()),t=t&&this.children[this.children.length-1].isValid(),u=!1);i.append(f==0?r:this.children[0].getExpression()=="-"?"IntervalArithmetic.negative({0})".format(r):r);this.intervalEvalCache=i.toString();break;case zizhujy.com.LaTexParser.nodeTypeEnum.FUNCTION_EXPRESSION:for(i=new StringBuffer,i.append("IntervalArithmetic.{0}".format(this.children[0].intervalEval())),t=t&&this.children[0].isValid(),n=1;n<this.children.length;n++)i.append(this.children[n].intervalEval()),t=t&&this.children[n].isValid();this.intervalEvalCache=i.toString();break;case zizhujy.com.LaTexParser.nodeTypeEnum.EXPRESSION:for(i=new StringBuffer,n=0;n<this.children.length;n++)this.children[n].getExpression()=="+"?(i.reset("IntervalArithmetic.add({0}, {1})".format(i.toString(),this.children[n+1].intervalEval())),t=t&&this.children[n+1].isValid(),n++):this.children[n].getExpression()=="-"?(i.reset("IntervalArithmetic.subtract({0}, {1})".format(i.toString(),this.children[n+1].intervalEval())),t=t&&this.children[n+1].isValid(),n++):(i.append(this.children[n].intervalEval()),t=t&&this.children[n].isValid());this.intervalEvalCache=i.toString();break;case zizhujy.com.LaTexParser.nodeTypeEnum.TERM:for(i=new StringBuffer,n=0;n<this.children.length;n++)this.children[n].intervalEval()=="*"||this.children[n].intervalEval()=="\\cdot"?(i.reset("IntervalArithmetic.multiply({0}, {1})".format(i.toString(),this.children[n+1].intervalEval())),t=t&&this.children[n+1].isValid(),n++):this.children[n].intervalEval()=="/"?(i.reset("IntervalArithmetic.divide({0}, {1})".format(i.toString(),this.children[n+1].intervalEval())),t=t&&this.children[n+1].isValid(),n++):(l=i.toString().trim(),e=this.children[n].intervalEval(),n==0?i.append(e):i.reset("IntervalArithmetic.multiply({0}, {1})".format(l,e)),t=t&&this.children[n].isValid());this.intervalEvalCache=i.toString();break;case zizhujy.com.LaTexParser.nodeTypeEnum.POWER:var i=new StringBuffer,o=0,a=!0,s=!1;for(this.children[0].getExpression()=="-"?(o=1,i.append("IntervalArithmetic.negative("),a=!1):this.children[0].getExpression()=="+"&&(o=1),n=o;n<this.children.length;n++)this.children[n].getExpression()=="|"?s?(i.append(")"),s=!1):(i.append("IntervalArithmetic.abs("),s=!0):(e=this.children[n].intervalEval(),i.append(e),t=t&&this.children[n].isValid());a||i.append(")");this.intervalEvalCache=i.toString();break;case zizhujy.com.LaTexParser.nodeTypeEnum.EQUATION:for(i=new StringBuffer,n=0;n<this.children.length;n++)i.append(this.children[n].intervalEval()),t=t&&this.children[n].isValid();this.intervalEvalCache=i.toString();break;case zizhujy.com.LaTexParser.nodeTypeEnum.LATEX_COMMAND:if(this.children.length===0)switch(this.expression){case"\\le":this.intervalEvalCache="<=";t=t&&!0;break;case"\\ge":this.intervalEvalCache=">=";t=t&&!0;break;default:this.intervalEvalCache="[Not Recognized LaTex]";t=!1}else{t=t&&this.children[0].isValid();switch(this.children[0].expression){case"\\frac":this.intervalEvalCache="IntervalArithmetic.divide({0}, {1})".format(this.children[2].intervalEval(),this.children[5].intervalEval());t=t&&this.children[2].isValid();t=t&&this.children[5].isValid();break;case"\\sqrt":this.intervalEvalCache="IntervalArithmetic.sqrt({0})".format(this.children[2].intervalEval());t=t&&this.children[2].isValid();break;default:this.intervalEvalCache="[Not Recognized LaTex]";t=!1}}break;case zizhujy.com.LaTexParser.nodeTypeEnum.UNKNOWN:default:this.intervalEvalCache="[Unknown Node Type: {"+this.nodeType.name+"}]";t=!1}}catch(v){this.intervalEvalCache="[Error Thrown]";t=!1}finally{this.isValidCache=t}}return this.intervalEvalCache},zizhujy.com.LaTexParser.TreeNode.prototype.isValid=function(){return this.isValidCache||this.eval(),this.isValidCache},zizhujy.com.LaTexParser.TreeNode.prototype.getExpression=function(){var t=new StringBuffer,n;for(t.append(this.expression),n=0;n<this.children.length;n++)t.append(this.children[n].getExpression());return t.toString()},this.__initialized__=!0);i!=null&&i instanceof zizhujy.com.LaTexParser.TreeNode&&i.addChildren(this)},newLeafForTree:function(){var n=this.nodeTypeEnum.OTHER_LEXEME;arguments.length>0&&(n=arguments[0]);new this.TreeNode(n,this.nextToken.lexeme,this.currentNode)},error:function(t){var i,r;if(t instanceof this.Exception){if(this.errorList.push(t),i=new StringBuffer,t.errorEnum instanceof Array)for(r=0;r<t.errorEnum.length;r++)i.append(t.errorEnum[r].message);else i.append(t.errorEnum.message);this.log("!!Error: {0}".format(i.toString(" Or ")))}else!t||!t.message?(this.errorList.push(new this.Exception(this.errorEnum.UNKNOWN_ERROR)),this.log("!!Error: {0}".format(this.errorEnum.UNKNOWN_ERROR.message))):(this.errorList.push(new this.Exception(t)),this.log("!!Error: {0}".format(t.message)));this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.newLeafForTree(this.nodeTypeEnum.UNKNOWN)},run:function(){n.eos()||(this.lex(),this.equation())},runSpecific:function(t){n.eos()||(this.lex(),t(this))},getConstraints:function(n){for(var e,f,t,r,i,o={},u=0;u<n.children.length;u++)if(n.children[u].nodeType==this.nodeTypeEnum.CONSTRAINTS){for(e=n.children[u],f=0;f<e.children.length;f++){for(t={varName:"",range:[]},r=e.children[f],i=0;i<r.children.length;i++)r.children[i].nodeType==this.nodeTypeEnum.EXPRESSION?t.range.push(r.children[i].eval()):r.children[i].nodeType==this.nodeTypeEnum.VARIABLE_NAME&&(t.varName=r.children[i].eval(),t.range.length<=0&&t.range.push(undefined));o[t.varName]=t.range}break}return o},constraints:function(){for(this.log("Enter <Constraints>"),this.currentNode=new this.TreeNode(this.nodeTypeEnum.CONSTRAINTS,"",this.currentNode),this.constraint();this.nextToken.token==n.TokenEnum.SEMICOLON;)this.lex(),this.constraint();this.currentNode=this.currentNode.parent;this.log("Exit <Constraints>")},constraint:function(){this.log("Enter <Constraint>");this.currentNode=new this.TreeNode(this.nodeTypeEnum.CONSTRAINT,"",this.currentNode);var t=this.nextToken,i=this.peek();t.token==n.TokenEnum.VARIABLE_NAME&&i.token==n.TokenEnum.LESS_THAN?(this.lex(!0,this.nodeTypeEnum.VARIABLE_NAME),this.nextToken.token==n.TokenEnum.LESS_THAN?(this.lex(),this.nextToken.token==n.TokenEnum.EVALUATION_OPERATOR&&this.lex(),this.expression()):this.error(this.errorEnum.LESS_THAN_EXPECTED)):(this.expression(),this.nextToken.token==n.TokenEnum.LESS_THAN?(this.lex(),this.nextToken.token==n.TokenEnum.EVALUATION_OPERATOR&&this.lex(),this.nextToken.token==n.TokenEnum.VARIABLE_NAME?(this.lex(!0,this.nodeTypeEnum.VARIABLE_NAME),this.nextToken.token==n.TokenEnum.LESS_THAN&&(this.lex(),this.nextToken.token==n.TokenEnum.EVALUATION_OPERATOR&&this.lex(),this.expression())):this.error(this.errorEnum.VAR_X_EXPECTED,this.errorEnum.VAR_Y_EXPECTED,this.errorEnum.VAR_T_EXPECTED,this.errorEnum.VARIABLE_NAME_EXPECTED)):this.error(this.errorEnum.LESS_THAN_EXPECTED));this.currentNode=this.currentNode.parent;this.log("Exit <Constraint>")},equation:function(){this.log("Enter <Equation>");this.currentNode=new this.TreeNode(this.nodeTypeEnum.EQUATION,"",this.currentNode);this.tree=this.currentNode;var t=this.nextToken,i=this.peek();t.lexeme=="x"&&i.token==n.TokenEnum.EVALUATION_OPERATOR?(this.log("x=f(t);y=g(t) mode"),this.lex(!0,this.nodeTypeEnum.VARIABLE_NAME),this.lex(!0),this.expression(),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&(this.nextToken.token==n.TokenEnum.SEMICOLON?(this.lex(!0),this.nextToken.lexeme=="y"?(this.lex(!0,this.nodeTypeEnum.VARIABLE_NAME),this.nextToken.token==n.TokenEnum.EVALUATION_OPERATOR?(this.lex(!0),this.expression(),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&(this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\left"?(this.lex(),this.nextToken.token==n.TokenEnum.LATEX_NAME_OPEN_BRACE?(this.lex(),this.constraints(),this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\right"?(this.lex(),this.nextToken.token!=n.TokenEnum.LATEX_NAME_CLOSING_BRACE?this.error(this.errorEnum.LATEX_CLOSING_BRACE_EXPECTED):this.lex()):this.error(this.errorEnum.RIGHT_COMMAND_EXPECTED),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.error(this.errorEnum.END_OF_SOURCE_EXPECTED)):this.error(this.errorEnum.LATEX_OPEN_BRACE_EXPECTED)):this.nextToken.token==n.TokenEnum.OPEN_BRACE?(this.lex(),this.constraints(),this.nextToken.token!=n.TokenEnum.CLOSING_BRACE?this.error(this.errorEnum.CLOSING_BRACE_EXPECTED):this.lex(),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.error(this.errorEnum.END_OF_SOURCE_EXPECTED)):this.error(new this.Exception([this.errorEnum.END_OF_SOURCE_EXPECTED,this.errorEnum.OPEN_BRACE_EXPECTED,this.errorEnum.LEFT_COMMAND_EXPECTED])))):this.error(this.errorEnum.EVALUATION_OPERATOR_EXPECTED)):this.error(this.errorEnum.VAR_Y_EXPECTED)):this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\left"?(this.lex(),this.nextToken.token==n.TokenEnum.LATEX_NAME_OPEN_BRACE?(this.lex(),this.constraints(),this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\right"?(this.lex(),this.nextToken.token!=n.TokenEnum.LATEX_NAME_CLOSING_BRACE?this.error(this.errorEnum.LATEX_CLOSING_BRACE_EXPECTED):this.lex()):this.error(this.errorEnum.RIGHT_COMMAND_EXPECTED),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.error(this.errorEnum.END_OF_SOURCE_EXPECTED)):this.error(this.errorEnum.LATEX_OPEN_BRACE_EXPECTED)):this.nextToken.token==n.TokenEnum.OPEN_BRACE?(this.lex(),this.constraints(),this.nextToken.token!=n.TokenEnum.CLOSING_BRACE?this.error(this.errorEnum.CLOSING_BRACE_EXPECTED):this.lex(),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.error(this.errorEnum.END_OF_SOURCE_EXPECTED)):this.error(new this.Exception([this.errorEnum.END_OF_SOURCE_EXPECTED,this.errorEnum.SEMICOLON_EXPECTED,this.errorEnum.OPEN_BRACE_EXPECTED,this.errorEnum.LEFT_COMMAND_EXPECTED])))):(this.expression(),this.nextToken.token==n.TokenEnum.EVALUATION_OPERATOR||this.nextToken.token==n.TokenEnum.LESS_THAN||this.nextToken.token==n.TokenEnum.GREATER_THAN||this.nextToken.token==n.TokenEnum.LESS_THAN_OR_EQUAL_TO||this.nextToken.token==n.TokenEnum.GREATER_THAN_OR_EQUAL_TO?(this.nextToken.token==n.TokenEnum.LESS_THAN_OR_EQUAL_TO||this.nextToken.token==n.TokenEnum.GREATER_THAN_OR_EQUAL_TO?this.lex(!0,this.nodeTypeEnum.LATEX_COMMAND):this.lex(!0),this.expression(),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&(this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\left"?(this.lex(),this.nextToken.token==n.TokenEnum.LATEX_NAME_OPEN_BRACE?(this.lex(),this.constraints(),this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\right"?(this.lex(),this.nextToken.token!=n.TokenEnum.LATEX_NAME_CLOSING_BRACE?this.error(this.errorEnum.LATEX_CLOSING_BRACE_EXPECTED):this.lex()):this.error(this.errorEnum.RIGHT_COMMAND_EXPECTED),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.error(this.errorEnum.END_OF_SOURCE_EXPECTED)):this.error(this.errorEnum.LATEX_OPEN_BRACE_EXPECTED)):this.nextToken.token==n.TokenEnum.OPEN_BRACE?(this.lex(),this.constraints(),this.nextToken.token!=n.TokenEnum.CLOSING_BRACE?this.error(this.errorEnum.CLOSING_BRACE_EXPECTED):this.lex(),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.error(this.errorEnum.END_OF_SOURCE_EXPECTED)):this.error(new this.Exception([this.errorEnum.END_OF_SOURCE_EXPECTED,this.errorEnum.OPEN_BRACE_EXPECTED,this.errorEnum.LEFT_COMMAND_EXPECTED])))):(this.error(this.errorEnum.EQUAL_SIGN_EXPECTED),this.lex()));this.log("Exit <Equation>")},expression:function(t){for(this.log("Enter <Expression>"),this.currentNode=new this.TreeNode(this.nodeTypeEnum.EXPRESSION,"",this.currentNode),t&&(this.tree=this.currentNode),this.term();this.nextToken.token==n.TokenEnum.PLUS_OPERATOR||this.nextToken.token==n.TokenEnum.MINUS_OPERATOR;)this.lex(!0),this.term();this.currentNode=this.currentNode.parent;this.log("Exit <Expression>")},term:function(){for(this.log("Enter <Term>"),this.currentNode=new this.TreeNode(this.nodeTypeEnum.TERM,"",this.currentNode),this.factor();this.nextToken.token!=n.TokenEnum.END_OF_SOURCE;){if((this.nextToken.token==n.TokenEnum.MULTIPLY_OPERATOR||this.nextToken.token==n.TokenEnum.DIVIDE_OPERATOR||this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\cdot")&&this.lex(!0),this.nextToken.token==n.TokenEnum.EVALUATION_OPERATOR||this.nextToken.lexeme=="\\right")break;if(this.nextToken.lexeme=="\\left"){var t=this.peek();if(t.token==n.TokenEnum.PIPE||t.token==n.TokenEnum.OPEN_PARENTHESIS){this.factor();continue}else break}if(this.nextToken.token!=n.TokenEnum.FUNCTION_NAME&&this.nextToken.token!=n.TokenEnum.CONSTANT_VALUE&&this.nextToken.token!=n.TokenEnum.VARIABLE_NAME&&this.nextToken.token!=n.TokenEnum.DIGITAL_NUMBER&&this.nextToken.token!=n.TokenEnum.IDENTIFIER&&this.nextToken.token!=n.TokenEnum.LATEX_NAME&&this.nextToken.token!=n.TokenEnum.OPEN_PARENTHESIS)break;this.factor()}this.currentNode=this.currentNode.parent;this.log("Exit <Term>")},factor:function(){this.log("Enter <Factor>");this.currentNode=new this.TreeNode(this.nodeTypeEnum.FACTOR,"",this.currentNode);switch(this.nextToken.token){case n.TokenEnum.PLUS_OPERATOR:case n.TokenEnum.MINUS_OPERATOR:this.lex(!0)}for(this.power();this.nextToken.token==n.TokenEnum.POWER_OPERATOR||this.nextToken.token==n.TokenEnum.OPEN_PARENTHESIS||this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme!="\\left"&&this.nextToken.lexeme!="\\right"&&this.nextToken.lexeme!="\\cdot"||this.nextToken.token==n.TokenEnum.DIGITAL_NUMBER||this.nextToken.token==n.TokenEnum.VARIABLE_NAME||this.nextToken.token==n.TokenEnum.CONSTANT_VALUE||this.nextToken.token==n.TokenEnum.FUNCTION_NAME;)this.nextToken.token==n.TokenEnum.POWER_OPERATOR?(this.lex(!0),this.nextToken.token==n.TokenEnum.OPEN_BRACE?(this.lex(),this.nextToken.token!=n.TokenEnum.END_OF_SOURCE&&this.expression(),this.nextToken.token==n.TokenEnum.CLOSING_BRACE?this.lex():this.error(this.errorEnum.CLOSING_BRACE_EXPECTED)):this.nextToken.token!=n.TokenEnum.END_OF_SOURCE?this.power():this.error(this.errorEnum.UNEXPECTED_END_OF_SOURCE)):this.power();this.currentNode=this.currentNode.parent;this.log("Exit <Factor>")},power:function(){var t=this.nextToken.lexeme;this.log("Enter <Power> lexeme: {0}".format(t));this.currentNode=new this.TreeNode(this.nodeTypeEnum.POWER,"",this.currentNode);switch(this.nextToken.token){case n.TokenEnum.OPEN_PARENTHESIS:this.lex(!0);this.expression();this.nextToken.token==n.TokenEnum.CLOSING_PARENTHESIS?this.lex(!0):this.error(this.errorEnum.CLOSING_PARENTHESIS_EXPECTED);break;case n.TokenEnum.LATEX_NAME:this.laTexCommand();break;case n.TokenEnum.DIGITAL_NUMBER:this.lex(!0,this.nodeTypeEnum.DIGITAL_NUMBER);break;case n.TokenEnum.VARIABLE_NAME:this.lex(!0,this.nodeTypeEnum.VARIABLE_NAME);break;case n.TokenEnum.CONSTANT_VALUE:this.lex(!0,this.nodeTypeEnum.CONSTANT_VALUE);break;case n.TokenEnum.PLUS_OPERATOR:case n.TokenEnum.MINUS_OPERATOR:this.lex(!0);switch(this.nextToken.token){case n.TokenEnum.DIGITAL_NUMBER:this.lex(!0,this.nodeTypeEnum.DIGITAL_NUMBER);break;case n.TokenEnum.VARIABLE_NAME:this.lex(!0,this.nodeTypeEnum.VARIABLE_NAME);break;case n.TokenEnum.CONSTANT_VALUE:this.lex(!0,this.nodeTypeEnum.CONSTANT_VALUE);break;case n.TokenEnum.LATEX_NAME:this.laTexCommand();break;case n.TokenEnum.FUNCTION_NAME:this.functionExpression();break;case n.TokenEnum.OPEN_PARENTHESIS:this.lex(!0);this.expression();this.nextToken.token==n.TokenEnum.CLOSING_PARENTHESIS?this.lex(!0):this.error(this.errorEnum.CLOSING_PARENTHESIS_EXPECTED);break;default:this.error(new this.Exception([this.errorEnum.DIGITAL_NUMBER_EXPECTED,this.errorEnum.VARIABLE_NAME_EXPECTED,this.errorEnum.CONSTANT_VALUE_EXPECTED]))}break;case n.TokenEnum.FUNCTION_NAME:this.functionExpression();break;default:this.error(new this.Exception([this.errorEnum.DIGITAL_NUMBER_EXPECTED,this.errorEnum.CONSTANT_VALUE_EXPECTED,this.errorEnum.VARIABLE_NAME_EXPECTED,this.errorEnum.OPEN_PARENTHESIS_EXPECTED,this.errorEnum.LATEX_COMMAND_EXPECTED,this.errorEnum.POSITIVE_SIGN_EXPECTED,this.errorEnum.NEGATIVE_SIGN_EXPECTED,this.errorEnum.FUNCTION_EXPECTED]));this.lex()}this.currentNode=this.currentNode.parent;this.log("Exit <Power> lexeme: {0}".format(t))},laTexCommand:function(){var t=this.nextToken.lexeme;this.log("Enter <LaTexCommand> lexeme: {0}".format(t));this.nextToken.lexeme!="\\left"&&this.nextToken.lexeme!="\\right"&&(this.currentNode=new this.TreeNode(this.nodeTypeEnum.LATEX_COMMAND,"",this.currentNode));switch(this.nextToken.lexeme){case"\\frac":this.lex(!0);this.nextToken.token==n.TokenEnum.OPEN_BRACE?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.CLOSING_BRACE?(this.lex(!0),this.nextToken.token==n.TokenEnum.OPEN_BRACE?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.CLOSING_BRACE?this.lex(!0):this.error(this.errorEnum.CLOSING_BRACE_EXPECTED)):this.error(this.errorEnum.OPEN_BRACE_EXPECTED)):this.error(this.errorEnum.CLOSING_BRACE_EXPECTED)):this.error(this.errorEnum.OPEN_BRACE_EXPECTED);break;case"\\sqrt":this.lex(!0);this.nextToken.token==n.TokenEnum.OPEN_BRACE?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.CLOSING_BRACE?this.lex(!0):this.error(this.errorEnum.CLOSING_BRACE_EXPECTED)):this.error(this.errorEnum.OPEN_BRACE_EXPECTED);break;case"\\left":this.lex();this.nextToken.token==n.TokenEnum.OPEN_PARENTHESIS?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\right"?(this.lex(),this.nextToken.token==n.TokenEnum.CLOSING_PARENTHESIS?this.lex(!0):this.error(this.errorEnum.CLOSING_PARENTHESIS_EXPECTED)):this.error(this.errorEnum.RIGHT_COMMAND_EXPECTED)):this.nextToken.token==n.TokenEnum.PIPE?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\right"?(this.lex(),this.nextToken.token==n.TokenEnum.PIPE?this.lex(!0):this.error(this.errorEnum.PIPE_EXPECTED)):this.error(this.errorEnum.RIGHT_COMMAND_EXPECTED)):this.error(new this.Exception(this.errorEnum.OPEN_PARENTHESIS_EXPECTED,this.errorEnum.PIPI_EXPECTED));break;case"\\right":this.error(this.errorEnum.UNEXPECTED_RIGHT_COMMAND);this.lex();break;default:this.error(this.errorEnum.UNKNOWN_LATEX_COMMAND_MET);this.log("Unknown LaTex command met: ".format(this.nextToken.lexeme));this.lex(!0)}t!="\\left"&&t!="\\right"&&(this.currentNode=this.currentNode.parent);this.log("Exit <LaTexCommand> lexeme: {0}".format(t))},functionExpression:function(){this.log("Enter <FunctionExpression>");this.currentNode=new this.TreeNode(this.nodeTypeEnum.FUNCTION_EXPRESSION,"",this.currentNode);switch(this.nextToken.lexeme){case"sin":case"\\sin":case"cos":case"\\cos":case"tan":case"\\tan":case"cot":case"\\cot":case"exp":case"\\exp":case"arcsin":case"\\arcsin":case"arccos":case"\\arccos":case"arctan":case"\\arctan":case"arccot":case"\\arccot":case"asin":case"\\asin":case"acos":case"\\acos":case"atan":case"\\atan":case"acot":case"\\acot":case"abs":case"\\abs":case"sign":case"\\sign":case"ln":case"\\ln":case"sqrt":case"sec":case"\\sec":case"cosec":case"\\cosec":case"sgn":case"\\sgn":this.lex(!0);this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\left"&&this.lex();this.nextToken.token==n.TokenEnum.OPEN_PARENTHESIS?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\right"&&this.lex(),this.nextToken.token==n.TokenEnum.CLOSING_PARENTHESIS?this.lex(!0):this.error(this.errorEnum.CLOSING_PARENTHESIS_EXPECTED)):this.error(this.errorEnum.OPEN_PARENTHESIS_EXPECTED);break;case"log":case"\\log":case"pow":case"\\pow":this.lex(!0);this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\left"&&this.lex();this.nextToken.token==n.TokenEnum.OPEN_PARENTHESIS?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.COMMA?(this.lex(!0),this.expression(),this.nextToken.token==n.TokenEnum.LATEX_NAME&&this.nextToken.lexeme=="\\right"&&this.lex(),this.nextToken.token==n.TokenEnum.CLOSING_PARENTHESIS?this.lex(!0):this.error(this.errorEnum.CLOSING_PARENTHESIS_EXPECTED)):this.error(this.errorEnum.COMMA_EXPEXTED)):this.error(this.errorEnum.OPEN_PARENTHESIS_EXPECTED);break;default:this.lex()}this.currentNode=this.currentNode.parent;this.log("Exit <FunctionExpression>")},errorEnum:{EVALUATION_OPERATOR_EXPECTED:{message:'Evaluation Operator "=" is expected.'},OPEN_BRACE_EXPECTED:{message:'Open Brace "{" is expected.'},LATEX_OPEN_BRACE_EXPECTED:{message:'Open Brace inside LaTex command "\\{" is expected.'},CLOSING_BRACE_EXPECTED:{message:'Closing Brace "}" is expected.'},LATEX_CLOSING_BRACE_EXPECTED:{message:'Closing Brace inside LaTex command "\\}" is expected.'},DEPENDENT_VAR_Y_EXPECTED:{message:"Dependent Variable y is expected."},SEMICOLON_EXPECTED:{message:'Semicolon ";" is expected.'},DEPENDENT_VAR_X_EXPECTED:{message:"Dependent Variable x is expected."},OPEN_PARENTHESIS_EXPECTED:{message:'Open Parenthesis "(" is expected.'},CLOSING_PARENTHESIS_EXPECTED:{message:'Closing Parenthesis ")" is expected.'},LATEX_COMMAND_EXPECTED:{message:"LaTex command (\\frac or \\sqrt) is expected."},DIGITAL_NUMBER_EXPECTED:{message:"Digital Number (123.123) is expected."},VAR_Y_EXPECTED:{message:"Variable y is expected."},VAR_X_EXPECTED:{message:"Variable x is expected."},VAR_T_EXPECTED:{message:"Variable t is expected."},VARIABLE_NAME_EXPECTED:{message:"Variable name (abc) is expected."},CONSTANT_VALUE_EXPECTED:{message:"Constant value (PI) is expected."},FUNCTION_EXPECTED:{message:"Function name (sin or cos) is expected."},COMMA_EXPECTED:{message:'Comma ","  is expected.'},END_OF_SOURCE_EXPECTED:{message:"End of input is expected."},EQUAL_SIGN_EXPECTED:{message:"Equal sign '=' is expected."},POSITIVE_SIGN_EXPECTED:{message:"Positive sign '+' is expected."},NEGATIVE_SIGN_EXPECTED:{message:"Negative sign '-' is expected."},UNKNOWN_ERROR:{message:"Unknown error."},UNEXPECTED_END_OF_SOURCE:{message:"Unexpected end of source met."},LEFT_COMMAND_EXPECTED:{message:"The LaTex command '\\left' is expected."},RIGHT_COMMAND_EXPECTED:{message:"The LaTex command '\\right' is expected."},LESS_THAN_EXPECTED:{message:"The operator Less Than '<' is expected."},PIPE_EXPECTED:{message:"The pipe line '|' is expected."},UNEXPECTED_RIGHT_COMMAND:{message:"Unexpected LaTex command '\\right' met."},UNKNOWN_LATEX_COMMAND_MET:{message:"Unknown LaTex command met."}}});zizhujy.com.LaTexParser.TreeNode.evalFactor=function(n){var f,u,e;n instanceof Array||(n=Array.prototype.slice.call(arguments,0));f=new StringBuffer;u=0;(n[0]=="-"||n[0]=="+")&&(u=1);for(var i=u+1,t=n[u],r=!1;!!n[i];)n[i]=="^"?(e="pow({0}, {1})".format(n[i-1],!n[i+1]?"":n[i+1]),r?(t="{0}{1}".format(t,e),r=!1):t="pow({0}, {1})".format(t,!n[i+1]?"":n[i+1]),i+=2):r?(t="{0}{1}".format(t,n[i-1]),r=!1):(t="{0} * ".format(t),i++,r=!0);return r&&(t="{0}{1}".format(t,n[n.length-1])),f.append(u==0?t:n[0]+t),f.toString()}}(zizhujy.com.LaTexLex);JSON||(JSON={}),function(){"use strict";function f(n){return n<10?"0"+n:n}function quote(n){return escapable.lastIndex=0,escapable.test(n)?'"'+n.replace(escapable,function(n){var t=meta[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function str(n,t){var r,e,u,o,s=gap,f,i=t[n];i&&typeof i=="object"&&typeof i.toJSON=="function"&&(i=i.toJSON(n));typeof rep=="function"&&(i=rep.call(t,n,i));switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,f=[],Object.prototype.toString.apply(i)==="[object Array]"){for(o=i.length,r=0;r<o;r+=1)f[r]=str(r,i)||"null";return u=f.length===0?"[]":gap?"[\n"+gap+f.join(",\n"+gap)+"\n"+s+"]":"["+f.join(",")+"]",gap=s,u}if(rep&&typeof rep=="object")for(o=rep.length,r=0;r<o;r+=1)typeof rep[r]=="string"&&(e=rep[r],u=str(e,i),u&&f.push(quote(e)+(gap?": ":":")+u));else for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(u=str(e,i),u&&f.push(quote(e)+(gap?": ":":")+u));return u=f.length===0?"{}":gap?"{\n"+gap+f.join(",\n"+gap)+"\n"+s+"}":"{"+f.join(",")+"}",gap=s,u}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(n,t,i){var r;if(gap="",indent="",typeof i=="number")for(r=0;r<i;r+=1)indent+=" ";else typeof i=="string"&&(indent=i);if(rep=t,t&&typeof t!="function"&&(typeof t!="object"||typeof t.length!="number"))throw new Error("JSON.stringify");return str("",{"":n})});typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(n,t){var r,u,i=n[t];if(i&&typeof i=="object")for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(u=walk(i,r),u!==undefined?i[r]=u:delete i[r]);return reviver.call(n,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse");})}(),function(n){"use strict";function t(n){var f,i,e,u=this;if(!(u instanceof t))return new t(n);if(n instanceof t){u.s=n.s;u.e=n.e;u.c=n.c.slice();return}for(n===0&&1/n<0?n="-0":l.test(n+="")||r(NaN),u.s=n.charAt(0)=="-"?(n=n.slice(1),-1):1,(f=n.indexOf("."))>-1&&(n=n.replace(".","")),(i=n.search(/e/i))>0?(f<0&&(f=i),f+=+n.slice(i+1),n=n.substring(0,i)):f<0&&(f=n.length),i=0;n.charAt(i)=="0";i++);if(i==(e=n.length))u.c=[u.e=0];else{for(;n.charAt(--e)=="0";);for(u.e=f-i-1,u.c=[],f=0;i<=e;u.c[f++]=+n.charAt(i++));}}function o(n,t,i,u){var e=n.c,f=n.e+t+1;if(i===1?u=e[f]>=5:i===2?u=e[f]>5||e[f]==5&&(u||f<0||e[f+1]!=null||e[f-1]&1):i===3?u=u||e[f]!=null||f<0:(u=!1,i!==0)&&r("!Big.RM!"),f<1||!e[0])n.c=u?(n.e=-t,[1]):[n.e=0];else{if(e.length=f--,u)for(;++e[f]>9;)e[f]=0,f--||(++n.e,e.unshift(1));for(f=e.length;!e[--f];e.pop());}return n}function r(n){var t=new Error(n);t.name="BigError";throw t;}function h(n,i,r){var u=i-(n=new t(n)).e,e=n.c;for(e.length>++i&&o(n,u,t.RM),u=e[0]?r?i:(e=n.c,n.e+u+1):u+1;e.length<u;e.push(0));return u=n.e,r==1||r==2&&(i<=u||u<=f)?(n.s<0&&e[0]?"-":"")+(e.length>1?(e.splice(1,0,"."),e.join("")):e[0])+(u<0?"e":"e+")+u:n.toString()}t.DP=20;t.RM=1;var u=1e6,c=1e6,f=-7,e=21,i=t.prototype,l=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,s=new t(1);i.abs=function(){var n=new t(this);return n.s=1,n};i.cmp=function(n){var o,h=this,f=h.c,e=(n=new t(n)).c,i=h.s,s=n.s,r=h.e,u=n.e;if(!f[0]||!e[0])return f[0]?i:e[0]?-s:0;if(i!=s)return i;if(o=i<0,r!=u)return r>u^o?1:-1;for(i=-1,s=(r=f.length)<(u=e.length)?r:u;++i<s;)if(f[i]!=e[i])return f[i]>e[i]^o?1:-1;return r==u?0:r>u^o?1:-1};i.div=function(n){var b=this,l=b.c,h=(n=new t(n)).c,p=b.s==n.s?1:-1,a=t.DP;if((a!==~~a||a<0||a>u)&&r("!Big.DP!"),!l[0]||!h[0])return l[0]==h[0]&&r(NaN),h[0]||r(p/0),new t(p*0);var c,k,w,v,e,it=h.slice(),d=c=h.length,rt=l.length,i=l.slice(0,c),f=i.length,y=new t(s),g=y.c=[],nt=0,tt=a+(y.e=b.e-n.e)+1;for(y.s=p,p=tt<0?0:tt,it.unshift(0);f++<c;i.push(0));do{for(w=0;w<10;w++){if(c!=(f=i.length))v=c>f?1:-1;else for(e=-1,v=0;++e<c;)if(h[e]!=i[e]){v=h[e]>i[e]?1:-1;break}if(v<0){for(k=f==c?h:it;f;){if(i[--f]<k[f]){for(e=f;e&&!i[--e];i[e]=9);--i[e];i[f]+=10}i[f]-=k[f]}for(;!i[0];i.shift());}else break}g[nt++]=v?w:++w;i[0]&&v?i[f]=l[d]||0:i=[l[d]]}while((d++<rt||i[0]!=null)&&p--);return g[0]||nt==1||(g.shift(),y.e--),nt>tt&&o(y,a,t.RM,i[0]!=null),y};i.eq=function(n){return!this.cmp(n)};i.gt=function(n){return this.cmp(n)>0};i.gte=function(n){return this.cmp(n)>-1};i.lt=function(n){return this.cmp(n)<0};i.lte=function(n){return this.cmp(n)<1};i.minus=function(n){var e,o,s,l,h=this,f=h.s,r=(n=new t(n)).s;if(f!=r)return n.s=-r,h.plus(n);var i=h.c.slice(),a=h.e,u=n.c,c=n.e;if(!i[0]||!u[0])return u[0]?(n.s=-r,n):new t(i[0]?h:0);if(f=a-c){for(e=(l=f<0)?(f=-f,i):(c=a,u),e.reverse(),r=f;r--;e.push(0));e.reverse()}else for(s=((l=i.length<u.length)?i:u).length,f=r=0;r<s;r++)if(i[r]!=u[r]){l=i[r]<u[r];break}if(l&&(e=i,i=u,u=e,n.s=-n.s),(r=-((s=i.length)-u.length))>0)for(;r--;i[s++]=0);for(r=u.length;r>f;){if(i[--r]<u[r]){for(o=r;o&&!i[--o];i[o]=9);--i[o];i[r]+=10}i[r]-=u[r]}for(;i[--s]==0;i.pop());for(;i[0]==0;i.shift(),--c);return i[0]||(n.s=1,i=[c=0]),n.c=i,n.e=c,n};i.mod=function(n){n=new t(n);var e,i=this,u=i.s,f=n.s;return n.c[0]||r(NaN),i.s=n.s=1,e=n.cmp(i)==1,i.s=u,n.s=f,e?new t(i):(u=t.DP,f=t.RM,t.DP=t.RM=0,i=i.div(n),t.DP=u,t.RM=f,this.minus(i.times(n)))};i.plus=function(n){var e,o=this,r=o.s,f=(n=new t(n)).s;if(r!=f)return n.s=-f,o.minus(n);var h=o.e,i=o.c,s=n.e,u=n.c;if(!i[0]||!u[0])return u[0]?n:new t(i[0]?o:r*0);if(i=i.slice(),r=h-s){for(e=r>0?(s=h,u):(r=-r,i),e.reverse();r--;e.push(0));e.reverse()}for(i.length-u.length<0&&(e=u,u=i,i=e),r=u.length,f=0;r;f=(i[--r]=i[r]+u[r]+f)/10^0,i[r]%=10);for(f&&(i.unshift(f),++s),r=i.length;i[--r]==0;i.pop());return n.c=i,n.e=s,n};i.pow=function(n){var f=n<0,i=new t(this),u=s;for((n!==~~n||n<-c||n>c)&&r("!pow!"),n=f?-n:n;;){if(n&1&&(u=u.times(i)),n>>=1,!n)break;i=i.times(i)}return f?s.div(u):u};i.round=function(n,i){var f=new t(this);return n==null?n=0:(n!==~~n||n<0||n>u)&&r("!round!"),o(f,n,i==null?t.RM:i),f};i.sqrt=function(){var f,n,e,u=this,h=u.c,i=u.s,s=u.e,c=new t("0.5");if(!h[0])return new t(u);i<0&&r(NaN);i=Math.sqrt(u.toString());i==0||i==1/0?(f=h.join(""),f.length+s&1||(f+="0"),n=new t(Math.sqrt(f).toString()),n.e=((s+1)/2|0)-(s<0||s&1)):n=new t(i.toString());i=n.e+(t.DP+=4);do e=n,n=c.times(e.plus(u.div(e)));while(e.c.slice(0,i).join("")!==n.c.slice(0,i).join(""));return o(n,t.DP-=4,t.RM),n};i.times=function(n){var i,h=this,e=h.c,o=(n=new t(n)).c,s=e.length,r=o.length,f=h.e,u=n.e;if(n.s=h.s==n.s?1:-1,!e[0]||!o[0])return new t(n.s*0);for(n.e=f+u,s<r&&(i=e,e=o,o=i,u=s,s=r,r=u),u=s+r,i=[];u--;i.push(0));for(f=r-1;f>-1;f--){for(r=0,u=s+f;u>f;r=i[u]+o[f]*e[u-f-1]+r,i[u--]=r%10|0,r=r/10|0);r&&(i[u]=(i[u]+r)%10)}for(r&&++n.e,i[0]||i.shift(),u=i.length;!i[--u];i.pop());return n.c=i,n};i.toString=i.valueOf=i.toJSON=function(){var r=this,t=r.e,n=r.c.join(""),i=n.length;if(t<=f||t>=e)n=n.charAt(0)+(i>1?"."+n.slice(1):"")+(t<0?"e":"e+")+t;else if(t<0){for(;++t;n="0"+n);n="0."+n}else if(t>0)if(++t>i)for(t-=i;t--;n+="0");else t<i&&(n=n.slice(0,t)+"."+n.slice(t));else i>1&&(n=n.charAt(0)+"."+n.slice(1));return r.s<0&&r.c[0]?"-"+n:n};i.toExponential=function(n){return n==null?n=this.c.length-1:(n!==~~n||n<0||n>u)&&r("!toExp!"),h(this,n,1)};i.toFixed=function(n){var t,i=this,o=f,s=e;return f=-(e=1/0),n==null?t=i.toString():n===~~n&&n>=0&&n<=u&&(t=h(i,i.e+n),i.s<0&&i.c[0]&&t.indexOf("-")<0&&(t="-"+t)),f=o,e=s,t||r("!toFix!"),t};i.toPrecision=function(n){return n==null?this.toString():((n!==~~n||n<1||n>u)&&r("!toPre!"),h(this,n-1,2))};typeof module!="undefined"&&module.exports?module.exports=t:typeof define=="function"&&define.amd?define(function(){return t}):n.Big=t}(this),function(n){function t(){function n(n){var t=Math.gcd(n.numerator,n.denominator);return{valid:!0,numerator:n.numerator/t,denominator:n.denominator/t}}function r(n){Math.power=Math.power||Math.pow;return{valid:!0,numerator:parseInt(n),denominator:Math.power(10,n.length)-1}}function u(n,t){Math.power=Math.power||Math.pow;var i=r(t),f=Number.getFractal(n).length,u=i.denominator*Math.power(10,f),e=n*u+i.numerator;return typeof Big=="function"&&(u=new Big(i.denominator).times(Math.power(10,f)),e=new Big(n).times(u).plus(i.numerator)),typeof math=="object"&&(u=math.eval(i.denominator+" * 10 ^ "+f),e=math.eval(n+" * "+u+" + "+i.numerator)),{valid:!0,numerator:e.toString(),denominator:u.toString()}}function t(n,t){var i=t,f,e,r={valid:!1,numerator:0,denominator:0},o,s;return(Math.power=Math.power||Math.pow,typeof i!="undefined"&&i!==null&&i!=="")?u(n,i):(o=Number.getFractal(n),s=o.length,f=Math.power(10,s),e=n*f,r.valid=!0,r.numerator=e,r.denominator=f,r)}function f(n){var r=i.exec(n),t=r[1],u;return t[0]==="."&&(t="0"+t),u=r[2],{fractal:t,period:u}}function e(n,t){for(var r=new RegExp(t+"$"),i=n.toString();!r.test(i);)i=i.substr(0,i.length-1);return i}function s(){var r={valid:!1,numerator:0,denominator:0},u,s,h,c;if(arguments.length<=0)throw"The number of arguments must be greater than or equal 1.";if(typeof arguments[0]!="number")return typeof arguments[0]!="string"||i.test(arguments[0])?(u=f(arguments[0]),r=t(parseFloat(u.fractal),u.period),n(r)):this.fromFiniteDecimal(arguments[0],math||null);if(arguments.length>2)throw"Only 1 or 2 arguments are allowed.";if(Number.isInteger(arguments[0]))if(typeof arguments[1]=="undefined"||typeof arguments[1]=="boolean")r.valid=!0,r.numerator=arguments[0],r.denominator=1;else if(Number.isInteger(arguments[1])&&arguments[1]!==0)r.valid=!0,r.numerator=arguments[0],r.denominator=arguments[1];else throw"The denominator must be an non-zero INTEGER.";else if(arguments.length===2&&typeof arguments[1]!="boolean")throw"Given 2 arguments, then the 1st argument must be a INTEGER numerator, and the 2nd argument must be a INTEGER denominator; or the 1st argument is a number and the 2nd argument is a boolean valud indicating whether auto detect the repeating decimals (period). But actually the 1st argument is "+arguments[0]+", and the 2nd argument is "+arguments[1];else s=!0,typeof arguments[1]!="undefined"&&(s=!!arguments[1]),s?(h=o(arguments[0]),c=e(arguments[0],h),r=t(c,h)):r=t(arguments[0]);return n(r)}function o(n){var i=Number.getFractal(n),f,t,r,u,e;if(i==="")return"";for(f=1,t="";f<i.length;){for(t=i.substr(0,f),r=t.length;r+t.length<i.length;r+=t.length)if(i.substr(r,t.length)==t)continue;else{f++;break}if(r+t.length>=i.length)if(u=i.substr(r),e=t.toString()+t.toString(),parseFloat("0."+u)==Math.round(parseFloat("0."+e),u.length)||parseFloat("0."+u)==Math.floor(parseFloat("0."+e),u.length))break;else{t="";break}}return t}function h(t,i){var u=t.toString(),f=u.substr(u.indexOf(".")+1).length,r=Math.pow(10,f),e=t*r;return i&&(r=i.eval("10 ^ "+f),e=i.eval(u+" * "+r)),n({valid:!0,denominator:r,numerator:e})}var i=/^([+-]?\d*\.\d*)`(\d+)`$/;return{getPeriodicDigits:o,parseRepeatingDecimal:f,trimEndFromRepeatingDecimal:e,reduce:n,newFraction:s,newFractionFromRepeatingDecimal:u,newFractionFromDecimal:t,newFractionFromBasicRepeatingDecimal:r,repeatingDecimalRegex:i,fromFiniteDecimal:h}}if(!Number.isNaN)try{if(typeof Object.defineProperty!="function")throw new TypeError("Object.defineProperty is not a function");(function(n){var t=n.isNaN;Object.defineProperty(Number,"isNaN",{value:function(n){return typeof n=="number"&&t(n)},configurable:!0,enumerable:!1,writable:!0})})(this)}catch(r){Number.isNaN=function(n){return typeof n=="number"&&n.toString()==="NaN"}}if(!Math.floorInBase){function i(n,t,i){var r=t*Math.floor(n/t);return i?i(t).times(i(n).div(i(t)).round()).toString():r}try{if(typeof Object.defineProperty!="function")throw new TypeError("Object.defineProperty is not a function");Object.defineProperty(Math,"floorInBase",{value:i,configurable:!0,enumerable:!1,writable:!0})}catch(r){Math.floorInBase=i}}Math.gcd=function(n,t){if(!isFinite(n)||!isFinite(t))return 1;while(t!=0){var i=t;t=n%i;n=i}return n};n.gcd=Math.gcd;Number.isInteger||(Number.isInteger=function(n){return typeof n=="number"&&isFinite(n)&&n>-9007199254740992&&n<9007199254740992&&Math.floor(n)===n});Number.getFractal||(Number.getFractal=function(n){if(Number.isNaN(parseFloat(n)))throw"The argument '"+n+"' is not a valid number.";var t=n.toString(),i=t.indexOf(".");return i>=0?t.substring(i+1):""});Number.fractalLength||(Number.fractalLength=function(n){return Number.getFractal(n).length});typeof module!="undefined"&&module.exports?module.exports=t():typeof define=="function"&&define.amd?define(function(){return t()}):n.Fraction=t()}(this),function(n){n.sin=Math.sin;Math.csc=function(n){return 1/Math.sin(n)};n.csc=Math.csc;n.cos=Math.cos;n.tan=Math.tan;n.cot=Math.cot=function(n){return 1/Math.tan(n)};n.tg=Math.tan;n.abs=Math.abs;n.acos=Math.acos;n.arccos=Math.acos;n.asin=Math.asin;n.arcsin=Math.asin;n.atan=Math.atan;n.arctan=Math.atan;n.atg=Math.atan;n.arctg=Math.atan;n.atan2=Math.atan2;n.arctan2=Math.atan2;n.atg2=Math.atan2;n.arctg2=Math.atan2;n.arccot=Math.acot=Math.arccot=function(n){return n==0?Math.PI/2:n<0?Math.atan(1/n)+Math.PI:Math.atan(1/n)};n.ceil=Math.ceil;n.E=Math.E;n.e=Math.E;n.exp=Math.exp;Math.floorToInt=Math.floor;Math.floor=function(n,t){var i=Math.power(10,t||0);return Math.floorToInt(n*i)/i};n.floor=Math.floor;n.ln=Math.log;n.log=Math.log=function(){if(arguments.length>0){var n=10,t=arguments[0];return arguments.length>1&&(n=arguments[0],t=arguments[1]),ln(t)/ln(n)}return NaN};n.lg=Math.lg=function(n){return Math.log(2,n)};n.max=Math.max;n.min=Math.min;n.PI=Math.PI;n.pi=Math.PI;Math.power=Math.pow;Math.pow=function(n,t){if(!Number.isInteger(t)&&n<0){var i=Fraction.newFraction(t);return i.valid&&i.denominator%2==1?i.numerator%2==0?Math.pow(-n,t):-Math.power(-n,t):Math.power(n,t)}return Math.power(n,t)};n.pow=Math.pow;var t=Math.random;Math.random=function(){if(arguments.length<=0)return t();var n=arguments[0],i=arguments[1],r=i-n;return Math.floor(t()*r+n,Math.max(Number.getFractal(n).length,Number.getFractal(i).length))};n.random=Math.random;Math.roundToInt=Math.round;Math.round=function(n,t){var i=Math.power(10,t||0);return Math.roundToInt(n*i)/i};n.round=Math.round;n.sqrt=Math.sqrt;n.sec=Math.sec=function(n){return 1/Math.cos(n)};n.cosec=Math.cosec=function(n){return 1/Math.sin(n)};n.sign=n.sgn=function(n){return n>0?1:n==0?0:-1}}(this),function(n){function i(n,t,r,u,f,e,o,s){this.left=n;this.right=t;this.top=u;this.bottom=r;this.leftContext=f;this.rightContext=e;this.bottomContext=o;this.topContext=s;this.origin={x:this.leftContext-this.left*(this.rightContext-this.leftContext)/(this.right-this.left),y:this.bottomContext+this.bottom*(this.topContext-this.bottomContext)/(this.top-this.bottom)};this.pixelWidth=Math.abs((this.right-this.left)/(this.rightContext-this.leftContext));this.pixelHeight=Math.abs((this.top-this.bottom)/(this.topContext-this.bottomContext));typeof i.__initialized__=="undefined"&&(i.prototype.outerBoundary=function(n){return n},i.prototype.innerBoundary=function(n){return n},i.prototype.context2coordinate=function(n,t){var i={};return i.x=this.left+(n-this.leftContext)*(this.right-this.left)/(this.rightContext-this.leftContext),i.y=this.bottom+(t-this.bottomContext)*(this.top-this.bottom)/(this.topContext-this.bottomContext),i},i.prototype.coordinate2context=function(n,t){var i={};return i.x=this.leftContext+(n-this.left)*(this.rightContext-this.leftContext)/(this.right-this.left),i.y=this.bottomContext+(t-this.bottom)*(this.topContext-this.bottomContext)/(this.top-this.bottom),i.x=Math.round(i.x),i.y=Math.round(i.y),i},i.__initialized__=!0)}function r(n,t,u,f,e,o){i.call(this,n,t,u,f,0,e,0,o);this.left=n;this.right=t;this.top=f;this.bottom=u;this.contextWidth=e;this.contextHeight=o;this.origin={x:-n*e/(t-n),y:f*o/(f-u)};this.pixelWidth=Math.abs((this.right-this.left)/this.contextWidth);this.pixelHeight=Math.abs((this.top-this.bottom)/this.contextHeight);typeof r.__initialized__=="undefined"&&(r.__initialized__=!0)}function t(n,r,u,f,e,o,s,h,c){i.call(this,r,u,f,e,o,s,h,c);this.context=n;typeof t.__initialized__=="undefined"&&(t.prototype.save=function(){this.context.save()},t.prototype.restore=function(){this.context.restore()},t.prototype.fillStyle=function(n){this.context.fillStyle=n},t.prototype.fillRect=function(n,t,i,r){this.save();var u=this.coordinate2context(n,t),f=this.coordinate2context(i,r),e=Math.max(Math.abs(f.x-u.x),1),o=Math.max(Math.abs(f.y-u.y),1);this.context.fillRect(Math.min(u.x,f.x),Math.min(u.y,f.y),e,o);this.restore()},t.prototype.fillRegion=function(n,t){this.save();this.fillStyle(t);this.fillRect(n.xRange.val[0],n.yRange.val[0],n.xRange.val[1],n.yRange.val[1]);this.restore()},t.prototype.strokeStyle=function(n){this.context.strokeStyle=n},t.prototype.strokeRegion=function(n,t){this.save();this.strokeStyle(t);var i=this.coordinate2context(n.xRange.val[0],n.yRange.val[0]),r=this.coordinate2context(n.xRange.val[1],n.yRange.val[1]),u=Math.max(Math.abs(r.x-i.x),1),f=Math.max(Math.abs(r.y-i.y),1);this.context.strokeRect(Math.min(i.x,r.x),Math.min(i.y,r.y),u,f);this.restore()},t.prototype.point=function(n,t){var i=this.coordinate2context(n,t);this.context.fillRect(i.x,i.y,1,1)},t.prototype.line=function(n,t,i,r){this.save();var u=this.coordinate2context(n,t),f=this.coordinate2context(i,r);this.context.moveTo(u.x,u.y);this.context.lineTo(f.x,f.y);this.context.stroke();this.restore()},t.prototype.drawAxis=function(){this.line(r,0,u,0);this.line(0,e,0,f)},t.__initialized__=!0)}typeof zizhujy=="undefined"&&(zizhujy={},n.zizhujy=zizhujy);typeof zizhujy.com=="undefined"&&(zizhujy.com={});typeof zizhujy.com.coordinate=="undefined"&&(zizhujy.com.RectangularCoordinate=t,zizhujy.com.GeneralRectangularCoordinate=r);r.prototype=new i;t.prototype=new i}(window),function(n){typeof zizhujy=="undefined"&&(zizhujy={},n.zizhujy=zizhujy);typeof zizhujy.com=="undefined"&&(zizhujy.com={});zizhujy.com.TupperIntervalArithmetic={constantValue:function(n){return{val:[n,n],def:[!0,!0]}},zero:function(){return this.constantValue(0)},add:function(n,t){return{val:[n.val[0]+t.val[0],n.val[1]+t.val[1]],def:[n.def[0]&&t.def[0],n.def[1]&&t.def[1]]}},subtract:function(n,t){return{val:[n.val[0]-t.val[1],n.val[1]-t.val[0]],def:[n.def[0]&&t.def[0],n.def[1]&&t.def[1]]}},negative:function(n){return{val:[-n.val[1],-n.val[0]],def:n.def}},multiply:function(n,t){var i=n.val[0],r=n.val[1],u=t.val[0],f=t.val[1],e=i*u,o=i*f,s=r*u,h=r*f;return{val:[Math.min(e,o,s,h),Math.max(e,o,s,h)],def:[n.def[0]&&t.def[0],n.def[1]&&t.def[1]]}},divide:function(n,t){var s=n.val[0],h=n.val[1],e=t.val[0],o=t.val[1],i=s/e,r=s/o,u=h/e,f=h/o;return e<=0&&o>=0?{val:[Math.min(i,r,u,f),Math.max(i,r,u,f)],def:[!1,!0]}:{val:[Math.min(i,r,u,f),Math.max(i,r,u,f)],def:[n.def[0]&&t.def[0],n.def[1]&&t.def[1]]}},pow:function(n,t){var i,u,f,r;if(t.val[0]==t.val[1])return i=t.val[0],i%2==0?n.val[0]>=0?{val:[Math.pow(n.val[0],i),Math.pow(n.val[1],i)],def:n.def}:n.val[1]<0?{val:[Math.pow(n.val[1],i),Math.pow(n.val[0],i)],def:n.def}:{val:[0,Math.max(Math.pow(n.val[0],i),Math.pow(n.val[1],i))],def:n.def}:parseFloat(i)!=parseInt(i,10)||isNaN(i)?this.greaterThan({val:[0,0],def:[!0,!0]},n).val.equals([!0,!0])?{val:[-Infinity,Infinity],def:[!1,!1]}:(u=Math.pow(n.val[0],i),f=Math.pow(n.val[1],i),isNaN(u)||isNaN(f)?{val:[-Infinity,Infinity],def:[!1,!0]}:{val:[u,f],def:[!0,!0]}):{val:[Math.pow(n.val[0],i),Math.pow(n.val[1],i)],def:n.def};if(n.val[0]==n.val[1]){if(r=n.val[0],r>1)return{val:[Math.pow(r,t.val[0]),Math.pow(r,t.val[1])],def:t.def};throw"Don't know how to calculate it yet. arguments: "+JSON.stringify(n)+"; "+JSON.stringify(t);}else throw"Don't know how to calculate it yet. arguments: "+JSON.stringify(n)+"; "+JSON.stringify(t);},greaterThan:function(n,t){return n.val[0]===t.val[0]&&n.val[1]===t.val[1]&&n.def[0]===!0&&n.def[1]===!0&&t.def[0]===!0&&t.def[1]===!0?{val:[!1,!1],def:[!0,!0]}:{val:[n.val[0]>t.val[1],n.val[1]>t.val[0]],def:this.and(n.def,t.def)}},overlaps:function(n,t){return this.greaterThan(n,t).val.equals([!0,!0])?{val:[!1,!1],def:[!0,!0]}:this.greaterThan(t,n).val.equals([!0,!0])?{val:[!1,!1],def:[!0,!0]}:{val:[!0,!0],def:[!0,!0]}},equals2:function(n,t){return this.include(n,t).val.equals([!0,!0])&&this.include(t,n).val.equals([!0,!0])?{val:[!0,!0],def:[!0,!0]}:this.greaterThan(n,t).val.equals([!0,!0])?{val:[!1,!1],def:[!0,!0]}:this.greaterThan(t,n).val.equals([!0,!0])?{val:[!1,!1],def:[!0,!0]}:{val:[!1,!0],def:[!0,!0]}},equals:function(n,t){var i=this.greaterThan(n,t),r=this.greaterThan(t,n);return i=this.not(i),r=this.not(r),this.and(i,r)},include:function(n,t){return{val:[n.val[0]<=t.val[0]&&n.val[1]>=t.val[1],n.val[1]>=t.val[0]&&n.val[0]<=t.val[1]],def:[!0,!0]}},and:function(n,t){return n instanceof Array&&t instanceof Array?[n[0]&&t[0],n[1]&&t[1]]:{val:[n.val[0]&&t.val[0],n.val[1]&&t.val[1]],def:[n.def[0]&&t.def[0],n.def[1]&&t.def[1]]}},not:function(n){return{val:[!n.val[1],!n.val[0]],def:n.def}},sin:function(n){var t=Math.sin(n.val[0]),i=Math.sin(n.val[1]),r=Math.min(t,i),u=Math.max(t,i);return Math.ceil((2*n.val[0]/Math.PI-1)/4)==Math.floor((2*n.val[1]/Math.PI-1)/4)&&(u=1),Math.ceil((2*n.val[0]/Math.PI+1)/4)==Math.floor((2*n.val[1]/Math.PI+1)/4)&&(r=-1),{val:[r,u],def:[!0,!0]}},cos:function(n){var t=Math.cos(n.val[0]),i=Math.cos(n.val[1]),r=Math.min(t,i),u=Math.max(t,i);return Math.ceil(n.val[0]/2/Math.PI)==Math.floor(n.val[1]/2/Math.PI)&&(u=1),Math.ceil((n.val[0]/Math.PI-1)/2)==Math.floor((n.val[1]/Math.PI-1)/2)&&(r=-1),{val:[r,u],def:[!0,!0]}},tan:function(n){var t=Math.tan(n.val[0]),i=Math.tan(n.val[1]);return Math.floor(n.val[0]/Math.PI+.5)==Math.ceil(n.val[1]/Math.PI-.5)?{val:[Math.min(t,i),Math.max(t,i)],def:[!0,!0]}:{val:[-Infinity,Infinity],def:[!1,!0]}},cot:function(n){return this.divide(this.constantValue(1),this.tan(n))},arcsin:function(n){var t=Math.asin(n.val[0]),i=Math.asin(n.val[1]),r=n.def;return isNaN(t)&&isNaN(i)?r=[!1,!1]:(isNaN(t)||isNaN(i))&&(r=[!1,n.def[1]]),{val:[t,i],def:r}},arccos:function(n){var t=Math.acos(n.val[1]),i=Math.acos(n.val[0]),r=n.def;return isNaN(t)&&isNaN(i)?r=[!1,!1]:(isNaN(t)||isNaN(i))&&(r=[!1,n.def[1]]),{val:[t,i],def:r}},arctan:function(n){var t=Math.atan(n.val[0]),i=Math.atan(n.val[1]),r=n.def;return isNaN(t)&&isNaN(i)?r=[!1,!1]:(isNaN(t)||isNaN(i))&&(r=[!1,n.def[1]]),{val:[t,i],def:r}},arccot:function(n){var t=Math.acot(n.val[1]),i=Math.acot(n.val[0]),r=n.def;return isNaN(t)&&isNaN(i)?r=[!1,!1]:(isNaN(t)||isNaN(i))&&(r=[!1,n.def[1]]),{val:[t,i],def:r}},sec:function(n){return n=this.cos(n),this.greaterThan(n,this.zero()).val.equals([!0,!0])||this.greaterThan(this.zero(),n).val.equals([!0,!0])?this.divide({val:[1,1],def:[!0,!0]},n):{val:[-Infinity,Infinity],def:[!1,!0]}},cosec:function(n){return this.divide(this.constantValue(1),this.sin(n))},sgn:function(n){return this.greaterThan(n,{val:[0,0],def:[!0,!0]}).val.equals([!0,!0])?{val:[1,1],def:[!0,!0]}:this.greaterThan({val:[0,0],def:[!0,!0]},n).val.equals([!0,!0])?{val:[-1,-1],def:[!0,!0]}:this.include({val:[0,0],def:[!0,!0]},n).val.equals([!0,!0])?{val:[0,0],def:[!0,!0]}:{val:[-1,1],def:[!0,!0]}},sign:function(n){return this.sgn(n)},log:function(n,t){if(n.val[0]==n.val[1]){var i=n.val[0];if(i>1&&t.val[0]>0)return{val:[Math.log(t.val[0])/Math.log(i),Math.log(t.val[1])/Math.log(i)],def:t.def};throw"Don't know how to compute it yet.";}else throw"Don't know how to compute it yet.";},ln:function(n){var t=Math.ln(n.val[0]),i=Math.ln(n.val[1]),r=n.def;return isNaN(t)&&isNaN(i)?r=[!1,!1]:(isNaN(t)||isNaN(i))&&(r=[!1,n.def[1]]),{val:[t,i],def:r}},exp:function(n){return{val:[Math.exp(n.val[0]),Math.exp(n.val[1])],def:n.def}},abs:function(n){var t=Math.abs(n.val[0]),i=Math.abs(n.val[1]),r;return t>i&&(r=t,t=i,i=r),this.include(n,this.zero()).val.equals([!0,!0])&&(t=0),{val:[t,i],def:n.def}},sqrt:function(n){var t=Math.sqrt(n.val[0]),i=Math.sqrt(n.val[1]),r=n.def;return isNaN(t)&&isNaN(i)?r=[!1,!1]:(isNaN(t)||isNaN(i))&&(r=[!1,n.def[1]]),{val:[t,i],def:r}}};n.IntervalArithmetic=zizhujy.com.TupperIntervalArithmetic}(window),function(console){function floatMiddle(n,t){var u,i;n>t&&(u=n,n=t,t=temp);var r=n>0,f=t>0,e=Math.abs(n)>.01,o=Math.abs(t)>.01;return e||o?Distance.mean(n,t):n===0?t*Math.abs(t):t===0?n*Math.abs(n):r!=f?0:(i=r?Math.sqrt(n*t):-Math.sqrt(n*t),i>=n&&t>=i?i:Distance.mean(n,t))}function bisectFinite(n,t,i,r,u){if(isFinite(t)===isFinite(r)){console.log("bisectFinite called with bad y values",[t,r]);return}for(;;){var f=floatMiddle(n,i),e=u(f);if(f===n||f===i)return isFinite(t)?[n,t]:[i,r];isFinite(e)!==isFinite(t)?(i=f,r=e):(n=f,t=e)}}function bisectFiniteTY(n,t,i,r,u,f,e,o){if(isFinite(i)===isFinite(f)){console.log("bisectFiniteTY called with bad y values",[i,f]);return}while(!isNaN(n)&&!isNaN(t)&&!isNaN(i)&&!isNaN(r)&&!isNaN(u)&&!isNaN(f)){var s=floatMiddle(n,r),h=e(s),c=o(s);if(h===t||h===u)return isFinite(i)?[n,t,i]:[r,u,f];isFinite(c)!==isFinite(i)?(r=s,u=h,f=c):(n=s,t=h,i=c)}}function bisectFiniteTX(n,t,i,r,u,f,e,o){if(isFinite(t)!==isFinite(u))for(;;){var s=floatMiddle(n,r),c=e(s),h=o(s);if(h===i||h===f)return isFinite(t)?[n,t,i]:[r,u,f];isFinite(c)!==isFinite(t)?(r=s,u=c,f=h):(n=s,t=c,i=h)}}function largestJump(n,t,i,r,u,f,e,o){var s=Math.abs(r-t),c=Math.abs(f-r),h=Math.abs(o-f);return s>c&&s>h?[[n,t],[i,r]]:h>c&&h>s?[[u,f],[e,o]]:[[i,r],[u,f]]}function largestJumpX(n,t,i,r,u,f,e,o){var s=Math.abs(i-n),c=Math.abs(u-i),h=Math.abs(e-u);return s>c&&s>h?[[n,t],[i,r]]:h>c&&h>s?[[u,f],[e,o]]:[[i,r],[u,f]]}function bisectJump(n,t,i,r,u,f,e,o){if(!(n<i&&i<u)){console.log("bisectJump called with bad x values",[n,i,u]);return}if(!(isFinite(t)&&isFinite(r)&&isFinite(f))){console.log("bisectJump called with bad y values",[t,r,f]);return}for(;;){var s=floatMiddle(n,i),a=e(s),h=floatMiddle(i,u),v=e(h),y=Math.abs(a-Distance.mean(t,r)),p=Math.abs(v-Distance.mean(r,f)),c,l;if(o||(o=0),y<=o&&p<=o)return null;if(!isFinite(a))return c=bisectFinite(n,t,s,a,e),l=bisectFinite(s,a,u,f,e),[c,l];if(!isFinite(v))return c=bisectFinite(n,t,h,v,e),l=bisectFinite(h,v,u,f,e),[c,l];if((s===n||s===i)&&(h===i||h===u))return Math.abs(r-t)>Math.abs(f-r)?(c=[n,t],l=[i,r]):(c=[i,r],l=[u,f]),[c,l];if(s===n||s===i)return largestJump(n,t,i,r,h,v,u,f);if(h===i||h===u)return largestJump(n,t,s,a,i,r,u,f);y>p?(u=i,f=r,i=s,r=a):(n=i,t=r,i=h,r=v)}}function bisectJumpTY(n,t,i,r,u,f,e,o,s,h,c,l){if(t<u&&u<o){if(!(isFinite(i)&&isFinite(f)&&isFinite(s))){console.log("bisectJumpTY called with bad y values",[i,f,s]);return}for(;;){var k=floatMiddle(n,r),y=h(k),w=c(k),d=floatMiddle(r,e),p=h(d),b=c(d),g=Math.abs(w-Distance.mean(i,f)),nt=Math.abs(b-Distance.mean(f,s)),a,v;if(l||(l=0),g<=l&&nt<=l)return null;if(!isFinite(w))return a=bisectFiniteTY(n,t,i,k,y,w,h,c),v=bisectFiniteTY(k,y,w,e,o,s,h,c),[[a[1],a[2]],[v[1],v[2]]];if(!isFinite(b))return a=bisectFiniteTY(n,t,i,d,p,b,h,c),v=bisectFiniteTY(d,p,b,e,o,s,h,c),[[a[1],a[2]],[v[1],v[2]]];if((y===t||y===u)&&(p===u||p===o))return Math.abs(f-i)>Math.abs(s-f)?(a=[t,i],v=[u,f]):(a=[u,f],v=[o,s]),[a,v];if(y===t||y===u)return largestJump(t,i,u,f,p,b,o,s);if(p===u||p===o)return largestJump(t,i,y,w,u,f,o,s);g>nt?(e=r,o=u,s=f,r=k,u=y,f=w):(n=r,t=u,i=f,r=d,u=p,f=b)}}}function bisectJumpTX(n,t,i,r,u,f,e,o,s,h,c,l){if(!(i<f&&f<s)){console.log("bisectJumpTY called with bad y values",[i,f,s]);return}if(!(isFinite(t)&&isFinite(u)&&isFinite(o))){console.log("bisectJumpTY called with bad x values",[t,u,o]);return}for(;;){var k=floatMiddle(n,r),w=h(k),y=c(k),d=floatMiddle(r,e),b=h(d),p=h(d),g=Math.abs(w-Distance.mean(t,u)),nt=Math.abs(b-Distance.mean(u,o)),a,v;if(l||(l=0),g<=l&&nt<=l)return null;if(!isFinite(w))return a=bisectFiniteTX(n,t,i,k,w,y,h,c),v=bisectFiniteTX(k,w,y,e,o,s,h,c),[[a[1],a[2]],[v[1],v[2]]];if(!isFinite(b))return a=bisectFiniteTY(n,t,i,d,b,p,h,c),v=bisectFiniteTY(d,b,p,e,o,s,h,c),[[a[1],a[2]],[v[1],v[2]]];if((y===i||y===f)&&(p===f||p===s))return Math.abs(u-t)>Math.abs(o-u)?(a=[t,i],v=[u,f]):(a=[u,f],v=[o,s]),[a,v];if(y===i||y===f)return largestJumpX(t,i,u,f,b,p,o,s);if(p===f||p===s)return largestJumpX(t,i,w,y,u,f,o,s);g>nt?(e=r,o=u,s=f,r=k,u=w,f=y):(n=r,t=u,i=f,r=d,u=b,f=p)}}var Distance={hypot:function(n,t){return n===0&&t===0?0:Math.abs(n)>Math.abs(t)?Math.abs(n)*Math.sqrt(t/n*(t/n)+1):Math.abs(t)*Math.sqrt(n/t*(n/t)+1)},mean:function(n,t){return n>0==t>0?n+.5*(t-n):.5*(n+t)}},POI={bisectJump:bisectJump,bisectJumpTY:bisectJumpTY,bisectJumpTX:bisectFiniteTX,bisectFinite:bisectFinite,bisectFiniteTY:bisectFiniteTY,bisectFiniteTX:bisectFiniteTX},Plotter={sampleXYNaive:function(n,t){var r=[],i,u;try{for(i=t.min;i<=t.max;i+=t.step)u=n(i),r.push([i,u])}catch(f){r.push([i,null])}return r},sampleXY:function(n,t,i){var u,f,r,e,h,o,s;i=$.extend(!0,{min:-Infinity,max:Infinity},i);u=[];try{for(f=t.min,r=n(f),e=[f,r],!t||(h=t.ytolerance||t.tolerance),o=function(t,i){var r,f;f=Distance.mean(t[0],i[0]);r=POI.bisectJump(t[0],t[1],f,n(f),i[0],i[1],n,h);r&&(u.push(r[0]),u.push(null),u.push(r[1]))},isFinite(r)&&u.push([f,r>=i.min&&r<=i.max?r:null]),f+=t.step;f<t.max+t.step;f+=t.step)r=n(f),isFinite(r)&&isFinite(e[1])?(o(e,[f,r]),u.push([f,r>=i.min&&r<=i.max?r:null])):isFinite(r)&&!isFinite(e[1])?(edge=POI.bisectFinite(e[0],e[1],f,r,n),edge[0]!==f&&(u.push(null),u.push(edge),u.push(null)),o(edge,[f,r]),u.push(null),u.push([f,r>=i.min&&r<=i.max?r:null]),u.push(null)):!isFinite(r)&&isFinite(e[1])&&(edge=POI.bisectFinite(e[0],e[1],f,r,n),o(e,edge),edge[0]!==e[0]&&(u.push(null),u.push(edge),u.push(null))),e=[f,r]}catch(c){s=zizhujy.com.deserializeUrlParams();!s||!s.debug||console.log(c);u.push([f,null])}return u},sampleTXY:function(n,t,i,r){var e,s,u,f,o,l,h,c;for($.extend(!0,[{min:-Infinity,max:Infinity},{min:-Infinity,max:Infinity}],r),e=[],s=i.min,u=n(s),f=t(s);(isNaN(f)||isNaN(u))&&s<i.max+i.step;)s+=i.step,u=n(s),f=t(s);if(s>=i.max+i.step)return e;for(o=[s,u,f],!i||(l=i.tolerance),h=function(i,r){var u,f,o,s;f=Distance.mean(i[0],r[0]);o=Distance.mean(i[1],r[1]);s=t(f);u=POI.bisectJumpTY(i[0],i[1],i[2],f,o,s,r[0],r[1],r[2],n,t,l);u&&(e.push(u[0]),e.push(null),e.push(u[1]))},c=function(i,r){var u,f,o,s;f=Distance.mean(i[0],r[0]);o=n(f);s=Distance.mean(i[2],r[2]);u=POI.bisectJumpTX(i[0],i[1],i[2],f,o,s,r[0],r[1],r[2],n,t,l);u&&(e.push(u[0]),e.push(null),e.push(u[1]))},isFinite(u)&&isFinite(f)&&e.push([u,f]),s+=i.step;s<i.max+i.step;s+=i.step)(u=n(s),f=t(s),isNaN(u)||isNaN(f))||(isFinite(f)&&isFinite(o[2])?(h(o,[s,u,f]),e.pushUnique([u>=r[0].min&&u<=r[0].max?u:null,f>=r[1].min&&f<=r[1].max?f:null],function(n){return!!n&&n[0]==u&&n[1]==f})):isFinite(f)&&!isFinite(o[2])?(edge=POI.bisectFiniteTY(o[0],o[1],o[2],s,u,f,n,t),edge[1]!==u&&(e.push(null),e.push([edge[1],edge[2]]),e.push(null)),h(edge,[s,u,f]),e.push(null),e.pushUnique([u>=r[0].min&&u<=r[0].max?u:null,f>=r[1].min&&f<=r[1].max?f:null],function(n){return!!n&&n[0]==u&&n[1]==f}),e.push(null)):!isFinite(f)&&isFinite(o[2])&&(edge=POI.bisectFiniteTY(o[0],o[1],o[2],s,u,f,n,t),h(o,edge),edge[1]!==o[1]&&(e.push(null),e.push([edge[1],edge[2]]),e.push(null))),isFinite(u)&&isFinite(o[1])?(c(o,[s,u,f]),e.pushUnique([u>=r[0].min&&u<=r[0].max?u:null,f>=r[1].min&&f<=r[1].max?f:null],function(n){return!!n&&n[0]==u&&n[1]==f})):isFinite(u)&&!isFinite(o[1])?(edge=POI.bisectFiniteTX(o[0],o[1],o[2],s,u,f,n,t),edge[2]!==f&&(e.push(null),e.push([edge[1],edge[2]]),e.push(null)),c(edge,[s,u,f]),e.push(null),e.pushUnique([u>=r[0].min&&u<=r[0].max?u:null,f>=r[1].min&&f<=r[1].max?f:null],function(n){return!!n&&n[0]==u&&n[1]==f}),e.push(null)):!isFinite(u)&&isFinite(o[1])&&(edge=POI.bisectFiniteTX(o[0],o[1],o[2],s,u,f,n,t),c(o,edge),edge[2]!==o[2]&&(e.push(null),e.push([edge[1],edge[2]]),e.push(null))),o=[s,u,f]);return e},sampleImplicit:function(r,left,right,bottom,top,leftContext,rightContext,bottomContext,topContext,context,domain,debug){function getPointsFromRegion(n,t){return[[t.xRange.val[0],t.yRange.val[0]]]}function paintCoorColor(n,t,i){!n.fillRegion||n.fillRegion(t,i)}function strokeCoorRegion(n,t,i){!n.strokeRegion||n.strokeRegion(t,i)}function refinePixels(n,t,i,r,u){var s=[],o,f,e;if(!!i&&i.length>0)for(o=0;o<i.length;o++)f=i[o],!u||paintCoorColor(n,f,"#FFFF00"),e=t(n.outerBoundary(f)),e.val.equals([!0,!0])&&e.def.equals([!0,!0])?(paintCoorColor(n,f,"#000000"),!u||(data=data.concat(getPointsFromRegion(n,f)))):e.val.equals([!1,!1])&&e.def.equals([!0,!0])||e.def.equals([!1,!1])?!u||paintCoorColor(n,f,"#ffffff"):s=s.concat(fourCoorSubsquares(n,f,r,u));return s}function handleRestU(n,t,i){var e,r,u,f;if(!!i&&i.length>0)for(e=[],r=0;r<i.length;r++)u=i[r],f=t(n.outerBoundary(u)),f.def.equals([!0,!0])&&(f.val.equals([!1,!1])||(paintCoorColor(n,u,"#000000"),data=data.concat(getPointsFromRegion(n,u))))}function fourCoorSubsquares(n,t,i){var r=[],e,o,u,f;return!t||(e=t.xRange.val[1]-t.xRange.val[0],o=t.yRange.val[1]-t.yRange.val[0],e>n.pixelWidth&&o>n.pixelHeight?(u=t.xRange.val[0]+e/2,f=t.yRange.val[0]+o/2,r.push({xRange:{val:[t.xRange.val[0],u],def:[!0,!0]},yRange:{val:[t.yRange.val[0],f],def:[!0,!0]}}),r.push({xRange:{val:[u,t.xRange.val[1]],def:[!0,!0]},yRange:{val:[t.yRange.val[0],f],def:[!0,!0]}}),r.push({xRange:{val:[t.xRange.val[0],u],def:[!0,!0]},yRange:{val:[f,t.yRange.val[1]],def:[!0,!0]}}),r.push({xRange:{val:[u,t.xRange.val[1]],def:[!0,!0]},yRange:{val:[f,t.yRange.val[1]],def:[!0,!0]}})):e>n.pixelWidth?(u=t.xRange.val[0]+e/2,r.push({xRange:{val:[t.xRange.val[0],u],def:[!0,!0]},yRange:t.yRange}),r.push({xRange:{val:[u,t.xRange.val[1]],def:[!0,!0]},yRange:t.yRange})):o>n.pixelHeight?(f=t.yRange.val[0]+o/2,r.push({xRange:t.xRange,yRange:{val:[t.yRange.val[0],f],def:[!0,!0]}}),r.push({xRange:t.xRange,yRange:{val:[f,t.yRange.val[1]],def:[!0,!0]}})):i.push(t)),r}var data=[],coor=context?new zizhujy.com.RectangularCoordinate(context,left,right,bottom,top,leftContext,rightContext,bottomContext,topContext):new zizhujy.com.BaseRectangularCoordinate(left,right,bottom,top,leftContext,rightContext,bottomContext,topContext);var width=right-left,height=top-bottom,k=15,U=[],undecidedU=[],xMin=left,xMax=right,yMin=bottom,yMax=top;for(!domain||(typeof domain.xMin!="undefined"&&(xMin=eval(domain.xMin)),typeof domain.xMax!="undefined"&&(xMax=eval(domain.xMax)),typeof domain.yMin!="undefined"&&(yMin=eval(domain.yMin)),typeof domain.yMax!="undefined"&&(yMax=eval(domain.yMax))),U=fourCoorSubsquares(coor,{xRange:{val:[xMin,xMax],def:[!0,!0]},yRange:{val:[yMin,yMax],def:[!0,!0]}},undecidedU,debug);k>=0&&!!U&&U.length>0;)U=refinePixels(coor,r,U,undecidedU,debug),k--;return handleRestU(coor,r,undecidedU.concat(U)),data}};window.Plotter=Plotter}(zizhujy.com.Console),function(n){function u(s){var l,c=this,h=s.data||{};if(h.elem)c=s.dragTarget=h.elem,s.dragProxy=t.proxy||c,s.cursorOffsetX=h.pageX-h.left,s.cursorOffsetY=h.pageY-h.top,s.offsetX=s.pageX-s.cursorOffsetX,s.offsetY=s.pageY-s.cursorOffsetY;else if(t.dragging||h.which>0&&s.which!=h.which||n(s.target).is(h.not))return;switch(s.type){case"mousedown":return n.extend(h,n(c).offset(),{elem:c,target:s.target,pageX:s.pageX,pageY:s.pageY}),r.add(document,"mousemove mouseup",u,h),o(c,!1),t.dragging=null,!1;case!t.dragging&&"mousemove":if(e(s.pageX-h.pageX)+e(s.pageY-h.pageY)<h.distance)break;s.target=h.target;l=f(s,"dragstart",c);l!==!1&&(t.dragging=c,t.proxy=s.dragProxy=n(l||c)[0]);case"mousemove":if(t.dragging){if(l=f(s,"drag",c),i.drop&&(i.drop.allowed=l!==!1,i.drop.handler(s)),l!==!1)break;s.type="mouseup"}case"mouseup":r.remove(document,"mousemove mouseup",u);t.dragging&&(i.drop&&i.drop.handler(s),f(s,"dragend",c));o(c,!0);t.dragging=t.proxy=h.elem=!1}return!0}function f(t,i,r){t.type=i;var u=n.event.dispatch.call(r,t);return u===!1?!1:u||t.result}function e(n){return Math.pow(n,2)}function s(){return t.dragging===!1}function o(n,t){n&&(n.unselectable=t?"off":"on",n.onselectstart=function(){return t},n.style&&(n.style.MozUserSelect=t?"":"none"))}n.fn.drag=function(n,t,i){return t&&this.bind("dragstart",n),i&&this.bind("dragend",i),n?this.bind("drag",t?t:n):this.trigger("drag")};var r=n.event,i=r.special,t=i.drag={not:":input",distance:0,which:1,dragging:!1,setup:function(i){i=n.extend({distance:t.distance,which:t.which,not:t.not},i||{});i.distance=e(i.distance);r.add(this,"mousedown",u,i);this.attachEvent&&this.attachEvent("ondragstart",s)},teardown:function(){r.remove(this,"mousedown",u);this===t.dragging&&(t.dragging=t.proxy=!1);o(this,!0);this.detachEvent&&this.detachEvent("ondragstart",s)}};i.dragstart=i.dragend={setup:function(){},teardown:function(){}}}(jQuery),function(n){function i(t){var i=t||window.event,e=[].slice.call(arguments,1),r=0,f=0,u=0,t=n.event.fix(i);return t.type="mousewheel",i.wheelDelta&&(r=i.wheelDelta/120),i.detail&&(r=-i.detail/3),u=r,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(u=0,f=-1*r),void 0!==i.wheelDeltaY&&(u=i.wheelDeltaY/120),void 0!==i.wheelDeltaX&&(f=i.wheelDeltaX/-120),e.unshift(t,r,f,u),(n.event.dispatch||n.event.handle).apply(this,e)}var t=["DOMMouseScroll","mousewheel"],r;if(n.event.fixHooks)for(r=t.length;r;)n.event.fixHooks[t[--r]]=n.event.mouseHooks;n.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var n=t.length;n;)this.addEventListener(t[--n],i,!1);else this.onmousewheel=i},teardown:function(){if(this.removeEventListener)for(var n=t.length;n;)this.removeEventListener(t[--n],i,!1);else this.onmousewheel=null}};n.fn.extend({mousewheel:function(n){return n?this.bind("mousewheel",n):this.trigger("mousewheel")},unmousewheel:function(n){return this.unbind("mousewheel",n)}})}(jQuery),function(n){function t(t){function f(n,i){var r=t.offset();r.left=n.pageX-r.left;r.top=n.pageY-r.top;i?t.zoomOut({center:r}):t.zoom({center:r})}function e(n,t){return n.preventDefault(),f(n,t<0),!1}function s(n){if(n.which!=1)return!1;var i=t.getPlaceholder().css("cursor");i&&(o=i);t.getPlaceholder().css("cursor",t.getOptions().pan.cursor);r=n.pageX;u=n.pageY}function h(n){var f=t.getOptions().pan.frameRate;!i&&f&&(i=setTimeout(function(){t.pan({left:r-n.pageX,top:u-n.pageY});r=n.pageX;u=n.pageY;i=null},1e3/f))}function c(n){i&&(clearTimeout(i),i=null);t.getPlaceholder().css("cursor",o);t.pan({left:r-n.pageX,top:u-n.pageY})}function l(n,t){var i=n.getOptions();i.zoom.interactive&&(t[i.zoom.trigger](f),t.mousewheel(e));i.pan.interactive&&(t.bind("dragstart",{distance:10},s),t.bind("drag",h),t.bind("dragend",c))}function a(n,t){t.unbind(n.getOptions().zoom.trigger,f);t.unbind("mousewheel",e);t.unbind("dragstart",s);t.unbind("drag",h);t.unbind("dragend",c);i&&clearTimeout(i)}var o="default",r=0,u=0,i=null;t.zoomOut=function(n){n||(n={});n.amount||(n.amount=t.getOptions().zoom.amount);n.amount=1/n.amount;t.zoom(n)};t.zoom=function(i){i||(i={});var r=i.center,u=i.amount||t.getOptions().zoom.amount,f=t.width(),e=t.height();r||(r={left:f/2,top:e/2});var o=r.left/f,s=r.top/e,h={x:{min:r.left-o*f/u,max:r.left+(1-o)*f/u},y:{min:r.top-s*e/u,max:r.top+(1-s)*e/u}};n.each(t.getAxes(),function(n,t){var e=t.options,i=h[t.direction].min,r=h[t.direction].max,f=e.zoomRange,u=e.panRange,s,o;f!==!1&&((i=t.c2p(i),r=t.c2p(r),i>r&&(s=i,i=r,r=s),u&&(u[0]!=null&&i<u[0]&&(i=u[0]),u[1]!=null&&r>u[1]&&(r=u[1])),o=r-i,f&&(f[0]!=null&&o<f[0]||f[1]!=null&&o>f[1]))||(e.min=i,e.max=r))});t.setupGrid();t.draw();i.preventEvent||t.getPlaceholder().trigger("plotzoom",[t,i])};t.pan=function(i){var r={x:+i.left,y:+i.top};isNaN(r.x)&&(r.x=0);isNaN(r.y)&&(r.y=0);n.each(t.getAxes(),function(n,t){var o=t.options,f,e,u=r[t.direction],i;(f=t.c2p(t.p2c(t.min)+u),e=t.c2p(t.p2c(t.max)+u),i=o.panRange,i!==!1)&&(i&&(i[0]!=null&&i[0]>f&&(u=i[0]-f,f+=u,e+=u),i[1]!=null&&i[1]<e&&(u=i[1]-e,f+=u,e+=u)),o.min=f,o.max=e)});t.setupGrid();t.draw();i.preventEvent||t.getPlaceholder().trigger("plotpan",[t,i])};t.hooks.bindEvents.push(l);t.hooks.shutdown.push(a)}n.plot.plugins.push({init:t,options:{xaxis:{zoomRange:null,panRange:null},zoom:{interactive:!1,trigger:"dblclick",amount:1.5},pan:{interactive:!1,cursor:"move",frameRate:20}},name:"navigate",version:"1.3"})}(jQuery),function(n,t,i){function l(){h=t[f](function(){r.each(function(){var i=n(this),r=i.width(),u=i.height(),t=n.data(this,e);(r!==t.w||u!==t.h)&&i.trigger(s,[t.w=r,t.h=u])});l()},u[c])}var r=n([]),u=n.resize=n.extend(n.resize,{}),h,f="setTimeout",s="resize",e=s+"-special-event",c="delay",o="throttleWindow";u[c]=250;u[o]=!0;n.event.special[s]={setup:function(){if(!u[o]&&this[f])return!1;var t=n(this);r=r.add(t);n.data(this,e,{w:t.width(),h:t.height()});r.length===1&&l()},teardown:function(){if(!u[o]&&this[f])return!1;var t=n(this);r=r.not(t);t.removeData(e);r.length||clearTimeout(h)},add:function(t){function s(t,u,f){var o=n(this),s=n.data(this,e);s.w=u!==i?u:o.width();s.h=f!==i?f:o.height();r.apply(this,arguments)}if(!u[o]&&this[f])return!1;var r;if(n.isFunction(t))return r=t,s;r=t.handler;t.handler=s}}}(jQuery,this),function(n){function t(t){function i(){var i=t.getPlaceholder();i.width()!=0&&i.height()!=0&&(n.each(t.getAxes(),function(n,t){t.options.min=t.min;t.options.max=t.max}),t.resize(),t.setupGrid(),t.draw())}function r(n){n.getPlaceholder().resize(i)}function u(n){n.getPlaceholder().unbind("resize",i)}t.hooks.bindEvents.push(r);t.hooks.shutdown.push(u)}n.plot.plugins.push({init:t,options:{},name:"resize",version:"1.0"})}(jQuery),function(){function w(){}function t(n){var t=lt.call(arguments,1);return function(){return n.apply(this,t)}}function a(n,t){if(!t)throw new Error("prayer failed: "+n);}function d(n){a("a direction was passed",n===i||n===r)}function si(n,t,u,f){function p(){l=wt;var n=e.selection?"$"+e.selection.latex()+"$":"";a.select(n)}var v=n.contents().detach(),e,h,s,l,c,b,a;if(u||n.addClass("mathquill-rendered-math"),t.jQ=n.attr(y,t.id),t.revert=function(){n.empty().unbind(".mathquill").removeClass("mathquill-rendered-math mathquill-editable mathquill-textbox").append(v)},e=t.cursor=nr(t),t.renderLatex(v.text()),h=t.textarea=o('<span class="textarea"><textarea><\/textarea><\/span>'),isAndroidChrome&&(h=t.textarea=o('<span class="textarea"><input type="password" value="#" /><\/span>')),s=h.children(),t.selectionChanged=function(){l===wt&&(l=setTimeout(p));hi(n[0])},n.bind("selectstart.mathquill",function(n){n.target!==s[0]&&n.preventDefault();n.stopPropagation()}),b=e.blink,n.bind("mousedown.mathquill",function(t){function u(n){return e.seek(o(n.target),n.pageX,n.pageY),(e[i]!==c[i]||e.parent!==c.parent)&&e.selectFrom(c),!1}function l(n){return delete n.target,u(n)}function a(t){c=wt;e.blink=b;e.selection||(f?e.show():h.detach());n.unbind("mousemove",u);o(t.target.ownerDocument).unbind("mousemove",l).unbind("mouseup",a)}return setTimeout(function(){s.focus()}),e.blink=w,e.seek(o(t.target),t.pageX,t.pageY),c=kt(e.parent,e[i],e[r]),f||n.prepend(h),n.mousemove(u),o(t.target.ownerDocument).mousemove(l).mouseup(a),!1}),!f){a=oi(s,{container:n});n.bind("cut paste",!1).bind("copy",p).prepend('<span class="selectable">$'+t.latex()+"$<\/span>");s.blur(function(){e.clearSelection();setTimeout(k)});function k(){h.detach()}return}a=oi(s,{container:n,key:function(n,t){e.parent.bubble("onKey",n,t)},text:function(n){if(n!="#")if(n==" "){var t=e.parent;if(t===e.root)return;t.bubble("onKey","Tab")}else e.parent.bubble("onText",n)},cut:function(n){e.selection&&setTimeout(function(){e.prepareEdit();e.parent.bubble("redraw")});n.stopPropagation()},paste:function(n){n=n.slice(0,1)==="$"&&n.slice(-1)==="$"?n.slice(1,-1):"\\text{"+n+"}";e.writeLatex(n).show()}});n.prepend(h);n.addClass("mathquill-editable");u&&n.addClass("mathquill-textbox");s.focus(function(n){e.parent||e.insAtRightEnd(t);e.parent.jQ.addClass("hasCursor");e.selection?(e.selection.jQ.removeClass("blur"),setTimeout(t.selectionChanged)):e.show();n.stopPropagation()}).blur(function(n){e.hide().parent.blur();e.selection&&e.selection.jQ.addClass("blur");n.stopPropagation()});n.bind("focus.mathquill blur.mathquill",function(n){s.trigger(n)}).blur()}function tt(n,t,i){return f(pt,{ctrlSeq:n,htmlTemplate:"<"+t+" "+i+">&0<\/"+t+">"})}var fi=navigator.userAgent,lt,ti,nt,b,ht,ii,yt,ri,l,u,et,it,e,ct,rt,ui;isAndroidChrome=/android/i.test(fi)&&/chrome/i.test(fi);var k=window.jQuery,wt,ei="mathquill-command-id",y="mathquill-block-id",bt=Math.min,tr=Math.max;k.fn.selectRange=function(n,t){return t||(t=n),this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(n,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}})};lt=[].slice;var f=function(n,t,i){function u(n){return typeof n=="object"}function r(n){return typeof n=="function"}function f(){}function e(o,s){function h(){var n=new a;return r(n.init)&&n.init.apply(n,arguments),n}function a(){}s===i&&(s=o,o=Object);h.Bare=a;var v=f[n]=o[n],l=a[n]=h[n]=new f,c;return l.constructor=h,h.mixin=function(t){return a[n]=h[n]=e(h,t)[n],h},(h.open=function(n){if(c={},r(n)?c=n.call(h,l,v,h,o):u(n)&&(c=n),u(c))for(var i in c)t.call(c,i)&&(l[i]=c[i]);return r(l.init)||(l.init=o),h})(s)}return e}("prototype",{}.hasOwnProperty),oi=function(){function t(t){var u=t.which||t.keyCode,f=n[u],r,i=[];return(t.ctrlKey&&i.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&i.push("Meta"),t.altKey&&i.push("Alt"),t.shiftKey&&i.push("Shift"),r=f||String.fromCharCode(u),!i.length&&!f)?r:(i.push(r),i.join("-"))}var n={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"};return function(n,i){function l(n){e=n;clearTimeout(s);s=setTimeout(n)}function d(n){e();e=w;clearTimeout(s);r.val(n);n&&r[0].select()}function g(){var n=r[0];return("selectionStart"in n)?n.selectionStart!==n.selectionEnd:!1}function a(n){var t;isAndroidChrome?(t=u,u="",t&&(n(t),r.val("#"))):(t=r.val(),r.val(""),t&&n(t))}function nt(){h(t(f),f)}function tt(n){f=n;/Windows Phone/i.test(navigator.userAgent)||v()}function it(){var n=o(this).find(".textarea > *");n.selectRange(n.val().length)}function rt(n){var t,i;u=o(n).val();isAndroidChrome&&(t=u.indexOf("#"),t>=0?u=u.substr(t+1):(o(n).blur(),o(n).val("#"),setTimeout(function(){h("Backspace")}),i=o("<input type='text' value='deleted an input.' style='width: 1px; height: 1px;' />").appendTo(o(n).parent()).focus(),setTimeout(function(){o(n).selectRange(o(n).val().length);o(n).focus();i.remove()},100)))}function ut(n){rt(n.srcElement)}function v(){f&&nt();l(ft)}function ft(){g()||a(y)}function et(){f=null}function ot(){r.focus();l(st)}function st(){a(p)}var f=null,u;i||(i={});var y=i.text||w,h=i.key||w,p=i.paste||w,b=i.cut||w,r=k(n),c=k(i.container||r),e=w,s;return c.bind("keydown keypress input keyup focusout paste",function(){e()}),u="",c.bind({keydown:tt,keypress:v,input:ut,focus:it,focusout:et,cut:b,paste:ot}),{select:d}}}(),s=f(function(n,t,i){function f(n,t){n=n?"'"+n+"'":"EOF";throw"Parse Error: "+t+" at "+n;}n.init=function(n){this._=n};n.parse=function(n){function t(n,t){return t}return this.skip(e)._(n,t,f)};n.or=function(n){a("or is passed a parser",n instanceof i);var t=this;return i(function(i,r,u){function f(){return n._(i,r,u)}return t._(i,r,f)})};n.then=function(n){var t=this;return i(function(r,u,f){function e(t,r){var e=n instanceof i?n:n(r);return a("a parser is returned",e instanceof i),e._(t,u,f)}return t._(r,e,f)})};n.many=function(){var n=this;return i(function(t,i){function u(n,i){return t=n,r.push(i),!0}function f(){return!1}for(var r=[];n._(t,u,f););return i(t,r)})};n.times=function(n,t){arguments.length<2&&(t=n);var r=this;return i(function(i,u,f){function c(n,t){return s.push(t),i=n,!0}function l(n,t){return h=t,i=n,!1}function a(){return!1}for(var s=[],e=!0,h,o=0;o<n;o+=1)if(e=r._(i,c,l),!e)return f(i,h);for(;o<t&&e;o+=1)e=r._(i,c,a);return u(i,s)})};n.result=function(n){return this.then(u(n))};n.atMost=function(n){return this.times(0,n)};n.atLeast=function(n){var t=this;return t.times(n).then(function(n){return t.many().map(function(t){return n.concat(t)})})};n.map=function(n){return this.then(function(t){return u(n(t))})};n.skip=function(n){return this.then(function(t){return n.result(t)})};var o=this.string=function(n){var t=n.length,r="expected '"+n+"'";return i(function(i,u,f){var e=i.slice(0,t);return e===n?u(i.slice(t),e):f(i,r)})},r=this.regex=function(n){a("regexp parser is anchored",n.toString().charAt(1)==="^");var t="expected "+n;return i(function(i,r,u){var e=n.exec(i),f;return e?(f=e[0],r(i.slice(f.length),f)):u(i,t)})},u=i.succeed=function(n){return i(function(t,i){return i(t,n)})},s=i.fail=function(n){return i(function(t,i,r){return r(t,n)})},h=i.letter=r(/^[a-z]/i),c=i.letters=r(/^[a-z]*/i),l=i.digit=r(/^[0-9]/),v=i.digits=r(/^[0-9]*/),y=i.whitespace=r(/^\s+/),p=i.optWhitespace=r(/^\s*/),w=i.any=i(function(n,t,i){return n?t(n.slice(1),n.charAt(0)):i(n,"expected any character")}),b=i.all=i(function(n,t){return t("",n)}),e=i.eof=i(function(n,t,i){return n?i(n,"expected EOF"):t(n,n)})}),i=-1,r=1;var o=f(k,function(n){n.insDirOf=function(n,t){return n===i?this.insertBefore(t.first()):this.insertAfter(t.last())};n.insAtDirEnd=function(n,t){return n===i?this.prependTo(t):this.appendTo(t)}}),kt=f(function(n){n.parent=0;n[i]=0;n[r]=0;n.init=function(n,t,u){this.parent=n;this[i]=t;this[r]=u}}),dt=f(function(n){n[i]=0;n[r]=0;n.parent=0;n.init=function(){this.ends={};this.ends[i]=0;this.ends[r]=0};n.children=function(){return at(this.ends[i],this.ends[r])};n.eachChild=function(n){return this.children().each(n)};n.foldChildren=function(n,t){return this.children().fold(n,t)};n.adopt=function(n,t,i){return at(this,this).adopt(n,t,i),this};n.disown=function(){return at(this,this).disown(),this}}),at=f(function(n){function t(n,t,u){a("a parent is always present",n);a("leftward is properly set up",function(){return t?t[r]===u&&t.parent===n:n.ends[i]===u}());a("rightward is properly set up",function(){return u?u[i]===t&&u.parent===n:n.ends[r]===t}())}n.init=function(n,t){(a("no half-empty fragments",!n==!t),this.ends={},n)&&(a("left end node is passed to Fragment",n instanceof dt),a("right end node is passed to Fragment",t instanceof dt),a("leftEnd and rightEnd have the same parent",n.parent===t.parent),this.ends[i]=n,this.ends[r]=t)};n.adopt=function(n,u,f){var e,o,s;return(t(n,u,f),e=this,e.disowned=!1,o=e.ends[i],!o)?this:(s=e.ends[r],u||(n.ends[i]=o),f?f[i]=s:n.ends[r]=s,e.ends[r][r]=f,e.each(function(t){t[i]=u;t.parent=n;u&&(u[r]=t);u=t}),e)};n.disown=function(){var f=this,n=f.ends[i],u,e;return!n||f.disowned?f:(f.disowned=!0,u=f.ends[r],e=n.parent,t(e,n[i],n),t(e,u,u[r]),n[i]?n[i][r]=u[r]:e.ends[i]=u[r],u[r]?u[r][i]=n[i]:e.ends[r]=n[i],f)};n.each=function(n){var t=this,u=t.ends[i];if(!u)return t;for(;u!==t.ends[r][r];u=u[r])if(n.call(t,u)===!1)break;return t};n.fold=function(n,t){return this.each(function(i){n=t.call(this,n,i)}),n}}),ai=function(){var n=0;return function(){return n+=1}}(),h=f(dt,function(n,t){n.init=function(){t.init.call(this);this.id=ai();h[this.id]=this};n.toString=function(){return"[MathElement "+this.id+"]"};n.bubble=function(n){for(var i,r=lt.call(arguments,1),t=this;t;t=t.parent)if(i=t[n]&&t[n].apply(t,r),i===!1)break;return this};n.postOrder=function(n){var i=lt.call(arguments,1),t;typeof n=="string"&&(t=n,n=function(n){t in n&&n[t].apply(n,i)}),function r(t){t.eachChild(r);n(t)}(this)};n.jQ=o();n.jQadd=function(n){this.jQ=this.jQ.add(n)};this.jQize=function(n){var t=o(n);return t.find("*").andSelf().each(function(){var n=o(this),t=n.attr("mathquill-command-id"),i=n.attr("mathquill-block-id");t&&h[t].jQadd(n);i&&h[i].jQadd(n)}),t};n.finalizeInsert=function(){var n=this;n.postOrder("finalizeTree");n.postOrder("blur");n.postOrder("respace");n[r].respace&&n[r].respace();n[i].respace&&n[i].respace();n.postOrder("redraw");n.bubble("redraw")}}),c=f(h,function(n,t){n.init=function(n,i,r){var u=this;t.init.call(u);u.ctrlSeq||(u.ctrlSeq=n);i&&(u.htmlTemplate=i);r&&(u.textTemplate=r)};n.replaces=function(n){n.disown();this.replacedFragment=n};n.isEmpty=function(){return this.foldChildren(!0,function(n,t){return n&&t.isEmpty()})};n.parser=function(){var t=ut.block,n=this;return t.times(n.numBlocks()).map(function(t){n.blocks=t;for(var i=0;i<t.length;i+=1)t[i].adopt(n,n.ends[r],0);return n})};n.createLeftOf=function(n){var t=this,u=t.replacedFragment;t.createBlocks();h.jQize(t.html());u&&(u.adopt(t.ends[i],0,0),u.jQ.appendTo(t.ends[i].jQ));n.jQ.before(t.jQ);n[i]=t.adopt(n.parent,n[i],n[r]);t.finalizeInsert(n);t.placeCursor(n)};n.createBlocks=function(){for(var u,n=this,i=n.numBlocks(),f=n.blocks=Array(i),t=0;t<i;t+=1)u=f[t]=p(),u.adopt(n,n.ends[r],0)};n.respace=w;n.placeCursor=function(n){n.insAtRightEnd(this.foldChildren(this.ends[i],function(n,t){return n.isEmpty()?n:t}))};n.remove=function(){return this.disown(),this.jQ.remove(),this.postOrder(function(n){delete h[n.id]}),this};n.numBlocks=function(){var n=this.htmlTemplate.match(/&\d+/g);return n?n.length:0};n.html=function(){var u=this,f=u.blocks,e=" mathquill-command-id="+u.id,t=u.htmlTemplate.match(/<[^<>]+>|[^<>]+/g),i,n,r;for(a("no unmatched angle brackets",t.join("")===this.htmlTemplate),i=0,n=t[0];n;i+=1,n=t[i])if(n.slice(-2)==="/>")t[i]=n.slice(0,-2)+e+"/>";else if(n.charAt(0)==="<"){a("not an unmatched top-level close tag",n.charAt(1)!=="/");t[i]=n.slice(0,-1)+e+">";r=1;do i+=1,n=t[i],a("no missing close tags",n),n.slice(0,2)==="<\/"?r-=1:n.charAt(0)==="<"&&n.slice(-2)!=="/>"&&(r+=1);while(r>0)}return t.join("").replace(/>&(\d+)/g,function(n,t){return" mathquill-block-id="+f[t].id+">"+f[t].join("html")})};n.latex=function(){return this.foldChildren(this.ctrlSeq,function(n,t){return n+"{"+(t.latex()||" ")+"}"})};n.textTemplate=[""];n.text=function(){var n=this,t=0;return n.foldChildren(n.textTemplate[t],function(i,r){t+=1;var u=r.text();return i&&n.textTemplate[t]==="("&&u[0]==="("&&u.slice(-1)===")"?i+u.slice(1,-1)+n.textTemplate[t]:i+r.text()+(n.textTemplate[t]||"")})}}),g=f(c,function(n,t){n.init=function(n,i,r){r||(r=n&&n.length>1?n.slice(1):n);t.init.call(this,n,i,[r])};n.parser=function(){return s.succeed(this)};n.numBlocks=function(){return 0};n.replaces=function(n){n.remove()};n.createBlocks=w;n.latex=function(){return this.ctrlSeq};n.text=function(){return this.textTemplate};n.placeCursor=w;n.isEmpty=function(){return!0}}),p=f(h,function(t){t.join=function(n){return this.foldChildren("",function(t,i){return t+i[n]()})};t.latex=function(){return this.join("latex")};t.text=function(){return this.ends[i]===this.ends[r]?this.ends[i].text():"("+this.join("text")+")"};t.isEmpty=function(){return this.ends[i]===0&&this.ends[r]===0};t.write=function(t,i,r){var f;f=i.match(/^[a-eg-zA-Z]$/)?l(i):(f=v[i]||n[i])?f(i):u(i);r&&f.replaces(r);f.createLeftOf(t)};t.focus=function(){return this.jQ.addClass("hasCursor"),this.jQ.removeClass("empty"),this};t.blur=function(){return this.jQ.removeClass("hasCursor"),this.isEmpty()&&this.jQ.addClass("empty"),this}}),vt=f(at,function(n,t){n.init=function(n,i){t.init.call(this,n,i||n);this.jQ=this.fold(o(),function(n,t){return t.jQ.add(n)})};n.latex=function(){return this.fold("",function(n,t){return n+t.latex()})};n.remove=function(){return this.jQ.remove(),this.each(function(n){n.postOrder(function(n){delete h[n.id]})}),this.disown()}});var ot=f(p,function(n,t){n.latex=function(){return t.latex.call(this).replace(/(\\[a-z]+) (?![a-z])/ig,"$1")};n.text=function(){return this.foldChildren("",function(n,t){return n+t.text()})};n.renderLatex=function(n){var t=this.jQ;t.children().slice(1).remove();this.ends[i]=this.ends[r]=0;delete this.cursor.selection;this.cursor.insAtRightEnd(this).writeLatex(n)};n.onKey=function(n,t){var u;switch(n){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":while(this.cursor[i]||this.cursor.selection)this.cursor.backspace();break;case"Shift-Backspace":case"Backspace":this.cursor.backspace();break;case"Esc":case"Tab":case"Spacebar":if(u=this.cursor.parent,u===this.cursor.root){n==="Spacebar"&&t.preventDefault();return}this.cursor.prepareMove();u[r]?this.cursor.insAtLeftEnd(u[r]):this.cursor.insRightOf(u.parent);break;case"Shift-Tab":case"Shift-Esc":case"Shift-Spacebar":if(u=this.cursor.parent,u===this.cursor.root){n==="Shift-Spacebar"&&t.preventDefault();return}this.cursor.prepareMove();u[i]?this.cursor.insAtRightEnd(u[i]):this.cursor.insLeftOf(u.parent);break;case"Enter":break;case"End":this.cursor.prepareMove().insAtRightEnd(this.cursor.parent);break;case"Ctrl-End":this.cursor.prepareMove().insAtRightEnd(this);break;case"Shift-End":while(this.cursor[r])this.cursor.selectRight();break;case"Ctrl-Shift-End":while(this.cursor[r]||this.cursor.parent!==this)this.cursor.selectRight();break;case"Home":this.cursor.prepareMove().insAtLeftEnd(this.cursor.parent);break;case"Ctrl-Home":this.cursor.prepareMove().insAtLeftEnd(this);break;case"Shift-Home":while(this.cursor[i])this.cursor.selectLeft();break;case"Ctrl-Shift-Home":while(this.cursor[i]||this.cursor.parent!==this)this.cursor.selectLeft();break;case"Left":this.cursor.moveLeft();break;case"Shift-Left":this.cursor.selectLeft();break;case"Ctrl-Left":break;case"Right":this.cursor.moveRight();break;case"Shift-Right":this.cursor.selectRight();break;case"Ctrl-Right":break;case"Up":this.cursor.moveUp();break;case"Down":this.cursor.moveDown();break;case"Shift-Up":if(this.cursor[i])while(this.cursor[i])this.cursor.selectLeft();else this.cursor.selectLeft();case"Shift-Down":if(this.cursor[r])while(this.cursor[r])this.cursor.selectRight();else this.cursor.selectRight();case"Ctrl-Up":break;case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":while(this.cursor[r]||this.cursor.selection)this.cursor.deleteForward();break;case"Shift-Del":case"Del":this.cursor.deleteForward();break;case"Meta-A":case"Ctrl-A":if(this!==this.cursor.root)return;for(this.cursor.prepareMove().insAtRightEnd(this);this.cursor[i];)this.cursor.selectLeft();break;default:return!1}return t.preventDefault(),!1};n.onText=function(n){return this.cursor.write(n),!1}}),gt=f(c,function(n,t){n.init=function(n){t.init.call(this,"$");this.cursor=n};n.htmlTemplate='<span class="mathquill-rendered-math">&0<\/span>';n.createBlocks=function(){this.ends[i]=this.ends[r]=ot();this.blocks=[this.ends[i]];this.ends[i].parent=this;this.ends[i].cursor=this.cursor;this.ends[i].write=function(n,t,f){t!=="$"?p.prototype.write.call(this,n,t,f):this.isEmpty()?(n.insRightOf(this.parent).backspace().show(),u("\\$","$").createLeftOf(n)):n[r]?n[i]?p.prototype.write.call(this,n,t,f):n.insLeftOf(this.parent):n.insRightOf(this.parent)}};n.latex=function(){return"$"+this.ends[i].latex()+"$"}}),vi=f(p,function(n){n.renderLatex=function(n){var t=this,e=t.cursor,f,a;t.jQ.children().slice(1).remove();t.ends[i]=t.ends[r]=0;delete e.selection;e.show().insAtRightEnd(t);var v=s.regex,o=s.string,l=s.eof,y=s.all,p=o("$").then(ut).skip(o("$").or(l)).map(function(n){var t=gt(e),r;return t.createBlocks(),r=t.ends[i],n.children().adopt(r,0,0),t}),w=o("\\$").result("$"),b=w.or(v(/^[^$]/)).map(u),k=p.or(b).many(),c=k.skip(l).or(y.result(!1)).parse(n);if(c){for(f=0;f<c.length;f+=1)c[f].adopt(t,t.ends[r],0);a=t.join("html");h.jQize(a).appendTo(t.jQ);this.finalizeInsert()}};n.onKey=function(n){n!=="Spacebar"&&n!=="Shift-Spacebar"&&ot.prototype.onKey.apply(this,arguments)};n.onText=ot.prototype.onText;n.write=function(n,t,i){if(i&&i.remove(),t==="$")gt(n).createLeftOf(n);else{var r;t==="<"?r="&lt;":t===">"&&(r="&gt;");u(t,r).createLeftOf(n)}}}),v={},n={},ft,hi=w,yi=document.createElement("div"),ci=yi.style,ni;for(ti in{transform:1,WebkitTransform:1,MozTransform:1,OTransform:1,msTransform:1})if(ti in ci){ni=ti;break}ni?ft=function(n,t,i){n.css(ni,"scale("+t+","+i+")")}:"filter"in ci?(hi=function(n){n.className=n.className},ft=function(n,t,i){function r(){n.css("marginRight",(u.width()-1)*(t-1)/t+"px")}var u,f;t/=1+(i-1)/2;n.css("fontSize",i+"em");n.hasClass("matrixed-container")||n.addClass("matrixed-container").wrapInner('<span class="matrixed"><\/span>');u=n.children().css("filter","progid:DXImageTransform.Microsoft.Matrix(M11="+t+",SizingMethod='auto expand')");r();f=setInterval(r);o(window).load(function(){clearTimeout(f);r()})}):ft=function(n,t,i){n.css("fontSize",i+"em")};nt=f(c,function(n,t){n.init=function(n,i,r){t.init.call(this,n,"<"+i+" "+r+">&0<\/"+i+">")}});n.mathrm=t(nt,"\\mathrm","span",'class="roman font"');n.mathit=t(nt,"\\mathit","i",'class="font"');n.mathbf=t(nt,"\\mathbf","b",'class="font"');n.mathsf=t(nt,"\\mathsf","span",'class="sans-serif font"');n.mathtt=t(nt,"\\mathtt","span",'class="monospace font"');n.underline=t(nt,"\\underline","span",'class="non-leaf underline"');n.overline=n.bar=t(nt,"\\overline","span",'class="non-leaf overline"');b=f(c,function(n,t){n.init=function(n,i,r){t.init.call(this,n,"<"+i+' class="non-leaf">&0<\/'+i+">",[r])};n.finalizeTree=function(){function n(n){var i=this.parent,t=n;do{if(t[r])return n.insLeftOf(i),!1;t=t.parent.parent}while(t!==i);return n.insRightOf(i),!1}a("SupSub is only _ and ^",this.ctrlSeq==="^"||this.ctrlSeq==="_");this.ctrlSeq==="_"?(this.down=this.ends[i],this.ends[i].up=n):(this.up=this.ends[i],this.ends[i].down=n)};n.latex=function(){var n=this.ends[i].latex();return n.length===1?this.ctrlSeq+n:this.ctrlSeq+"{"+(n||" ")+"}"};n.redraw=function(){this[i]&&this[i].respace();this[i]instanceof b||(this.respace(),!this[r]||this[r]instanceof b||this[r].respace())};n.respace=function(){if(this[i].ctrlSeq==="\\int "||this[i]instanceof b&&this[i].ctrlSeq!=this.ctrlSeq&&this[i][i]&&this[i][i].ctrlSeq==="\\int "?this.limit||(this.limit=!0,this.jQ.addClass("limit")):this.limit&&(this.limit=!1,this.jQ.removeClass("limit")),this.respaced=this[i]instanceof b&&this[i].ctrlSeq!=this.ctrlSeq&&!this[i].respaced,this.respaced){var n=+this.jQ.css("fontSize").slice(0,-2),t=this[i].jQ.outerWidth(),u=this.jQ.outerWidth();this.jQ.css({left:(this.limit&&this.ctrlSeq==="_"?-.25:0)-t/n+"em",marginRight:.1-bt(u,t)/n+"em"})}else this.limit&&this.ctrlSeq==="_"?this.jQ.css({left:"-.25em",marginRight:""}):this.jQ.css({left:"",marginRight:""});return this[r]instanceof b&&this[r].respace(),this}});n.subscript=n._=t(b,"_","sub","_");n.superscript=n.supscript=n["^"]=t(b,"^","sup","**");var pi=n.frac=n.dfrac=n.cfrac=n.fraction=f(c,function(n){n.ctrlSeq="\\frac";n.htmlTemplate='<span class="fraction non-leaf"><span class="numerator">&0<\/span><span class="denominator">&1<\/span><span style="display:inline-block;width:0">&nbsp;<\/span><\/span>';n.textTemplate=["(","/",")"];n.finalizeTree=function(){this.up=this.ends[r].up=this.ends[i];this.down=this.ends[i].down=this.ends[r]}}),wi=n.over=v["/"]=f(pi,function(n,t){n.createLeftOf=function(n){if(!this.replacedFragment){for(var u=n[i];u&&!(u instanceof e||u instanceof pt||u instanceof rt||",;:".split("").indexOf(u.ctrlSeq)>-1);)u=u[i];u instanceof rt&&u[r]instanceof b&&(u=u[r],u[r]instanceof b&&u[r].ctrlSeq!=u.ctrlSeq&&(u=u[r]));u!==n[i]&&(this.replaces(vt(u[r]||n.parent.ends[i],n[i])),n[i]=u)}t.createLeftOf.call(this,n)}}),bi=n.sqrt=n[""]=f(c,function(n,t){n.ctrlSeq="\\sqrt";n.htmlTemplate='<span class="non-leaf"><span class="scaled sqrt-prefix">&radic;<\/span><span class="non-leaf sqrt-stem">&0<\/span><\/span>';n.textTemplate=["sqrt(",")"];n.parser=function(){return ut.optBlock.then(function(n){return ut.block.map(function(t){var i=ki();return i.blocks=[n,t],n.adopt(i,0,0),t.adopt(i,n,0),i})}).or(t.parser.call(this))};n.redraw=function(){var n=this.ends[r].jQ;ft(n.prev(),1,n.innerHeight()/+n.css("fontSize").slice(0,-2)-.1)}}),ir=n.vec=f(c,function(n){n.ctrlSeq="\\vec";n.htmlTemplate='<span class="non-leaf"><span class="vector-prefix">&rarr;<\/span><span class="vector-stem">&0<\/span><\/span>';n.textTemplate=["vec(",")"]}),ki=n.nthroot=f(bi,function(n){n.htmlTemplate='<sup class="nthroot non-leaf">&0<\/sup><span class="scaled"><span class="sqrt-prefix scaled">&radic;<\/span><span class="sqrt-stem non-leaf">&1<\/span><\/span>';n.textTemplate=["sqrt[","](",")"];n.latex=function(){return"\\sqrt["+this.ends[i].latex()+"]{"+this.ends[r].latex()+"}"}}),st=f(c,function(n,t){n.init=function(n,i,r,u){t.init.call(this,"\\left"+r,'<span class="non-leaf"><span class="scaled paren">'+n+'<\/span><span class="non-leaf">&0<\/span><span class="scaled paren">'+i+"<\/span><\/span>",[n,i]);this.end="\\right"+u};n.jQadd=function(){t.jQadd.apply(this,arguments);var n=this.jQ;this.bracketjQs=n.children(":first").add(n.children(":last"))};n.latex=function(){return this.ctrlSeq+this.ends[i].latex()+this.end};n.redraw=function(){var n=this.ends[i].jQ,t=n.outerHeight()/+n.css("fontSize").slice(0,-2);ft(this.bracketjQs,bt(1+.2*(t-1),1.2),1.05*t)}});n.left=f(c,function(n){n.parser=function(){var n=s.regex,i=s.string,r=s.succeed,t=s.optWhitespace;return t.then(n(/^(?:[([|]|\\\{)/)).then(function(u){u.charAt(0)==="\\"&&(u=u.slice(1));var f=v[u]();return ut.map(function(n){f.blocks=[n];n.adopt(f,0,0)}).then(i("\\right")).skip(t).then(n(/^(?:[\])|]|\\\})/)).then(function(n){return n.slice(-1)!==f.end.slice(-1)?s.fail("open doesn't match close"):r(f)})})}});n.right=f(c,function(n){n.parser=function(){return s.fail("unmatched \\right")}});n.lbrace=v["{"]=t(st,"{","}","\\{","\\}");n.langle=n.lang=t(st,"&lang;","&rang;","\\langle ","\\rangle ");ht=f(st,function(n,t){n.createLeftOf=function(n){n[r]||!n.parent.parent||n.parent.parent.end!==this.end||this.replacedFragment?t.createLeftOf.call(this,n):n.insRightOf(n.parent.parent)};n.placeCursor=function(n){this.ends[i].blur();n.insRightOf(this)}});n.rbrace=v["}"]=t(ht,"{","}","\\{","\\}");n.rangle=n.rang=t(ht,"&lang;","&rang;","\\langle ","\\rangle ");ii=function(n,t){n.init=function(n,i){t.init.call(this,n,i,n,i)}};yt=f(st,ii);n.lparen=v["("]=t(yt,"(",")");n.lbrack=n.lbracket=v["["]=t(yt,"[","]");ri=f(ht,ii);n.rparen=v[")"]=t(ri,"(",")");n.rbrack=n.rbracket=v["]"]=t(ri,"[","]");var rr=n.lpipe=n.rpipe=v["|"]=f(yt,function(n,t){n.init=function(){t.init.call(this,"|","|")};n.createLeftOf=ht.prototype.createLeftOf}),pt=v.$=n.text=n.textnormal=n.textrm=n.textup=n.textmd=f(c,function(n,t){n.ctrlSeq="\\text";n.htmlTemplate='<span class="text">&0<\/span>';n.replaces=function(n){n instanceof vt?this.replacedText=n.remove().jQ.text():typeof n=="string"&&(this.replacedText=n)};n.textTemplate=['"','"'];n.parser=function(){var n=this,t=s.string,f=s.regex,e=s.optWhitespace;return e.then(t("{")).then(f(/^[^}]*/)).skip(t("}")).map(function(t){var e,f,o;for(n.createBlocks(),e=n.ends[i],f=0;f<t.length;f+=1)o=u(t.charAt(f)),o.adopt(e,e.ends[r],0);return n})};n.createBlocks=function(){this.ends[i]=this.ends[r]=di();this.blocks=[this.ends[i]];this.ends[i].parent=this};n.finalizeInsert=function(){this.ends[i].blur=function(){return delete this.blur,this};t.finalizeInsert.call(this)};n.createLeftOf=function(n){if(t.createLeftOf.call(this,this.cursor=n),this.replacedText)for(var r=0;r<this.replacedText.length;r+=1)this.ends[i].write(n,this.replacedText.charAt(r))}}),di=f(p,function(n,t){n.onKey=function(n){if(n==="Spacebar"||n==="Shift-Spacebar")return!1};n.deleteOutOf=function(n,t){this.isEmpty()&&t.insRightOf(this.parent)};n.write=function(n,t,f){var o,e;return f&&f.remove(),t!=="$"?(t==="<"?o="&lt;":t===">"&&(o="&gt;"),u(t,o).createLeftOf(n)):this.isEmpty()?(n.insRightOf(this.parent).backspace(),u("\\$","$").createLeftOf(n)):n[r]?n[i]?(e=pt(),e.replaces(vt(n[r],this.ends[r])),n.insRightOf(this.parent),e.adopt=function(){delete this.adopt;this.adopt.apply(this,arguments);this[i]=0},e.createLeftOf(n),e[i]=this.parent,n.insLeftOf(e)):n.insLeftOf(this.parent):n.insRightOf(this.parent),!1};n.blur=function(){if(this.jQ.removeClass("hasCursor"),this.isEmpty()){var t=this.parent,n=t.cursor;n.parent===this?this.jQ.addClass("empty"):(n.hide(),t.remove(),n[r]===t?n[r]=t[r]:n[i]===t&&(n[i]=t[i]),n.show().parent.bubble("redraw"))}return this};n.focus=function(){var n,u;if(t.focus.call(this),n=this.parent,n[r].ctrlSeq===n.ctrlSeq){var e=this,u=n.cursor,f=n[r].ends[i];f.eachChild(function(n){n.parent=e;n.jQ.appendTo(e.jQ)});this.ends[r]?this.ends[r][r]=f.ends[i]:this.ends[i]=f.ends[i];f.ends[i][i]=this.ends[r];this.ends[r]=f.ends[r];f.parent.remove();u[i]?u.insRightOf(u[i]):u.insAtLeftEnd(this);u.parent.bubble("redraw")}else n[i].ctrlSeq===n.ctrlSeq&&(u=n.cursor,u[i]?n[i].ends[i].focus():u.insAtRightEnd(n[i].ends[i]));return this}});n.em=n.italic=n.italics=n.emph=n.textit=n.textsl=tt("\\textit","i",'class="text"');n.strong=n.bold=n.textbf=tt("\\textbf","b",'class="text"');n.sf=n.textsf=tt("\\textsf","span",'class="sans-serif text"');n.tt=n.texttt=tt("\\texttt","span",'class="monospace text"');n.textsc=tt("\\textsc","span",'style="font-variant:small-caps" class="text"');n.uppercase=tt("\\uppercase","span",'style="text-transform:uppercase" class="text"');n.lowercase=tt("\\lowercase","span",'style="text-transform:lowercase" class="text"');var ur=v["\\"]=f(c,function(n,t){n.ctrlSeq="\\";n.replaces=function(n){this._replacedFragment=n.disown();this.isEmpty=function(){return!1}};n.htmlTemplate='<span class="latex-command-input non-leaf">\\<span>&0<\/span><\/span>';n.textTemplate=["\\"];n.createBlocks=function(){t.createBlocks.call(this);this.ends[i].focus=function(){return this.parent.jQ.addClass("hasCursor"),this.isEmpty()&&this.parent.jQ.removeClass("empty"),this};this.ends[i].blur=function(){return this.parent.jQ.removeClass("hasCursor"),this.isEmpty()&&this.parent.jQ.addClass("empty"),this}};n.createLeftOf=function(n){if(t.createLeftOf.call(this,n),this.cursor=n.insAtRightEnd(this.ends[i]),this._replacedFragment){var r=this.jQ[0];this.jQ=this._replacedFragment.jQ.addClass("blur").bind("mousedown mousemove",function(n){return o(n.target=r).trigger(n),!1}).insertBefore(this.jQ).add(this.jQ)}this.ends[i].write=function(n,t,i){i&&i.remove();t.match(/[a-z]/i)?u(t).createLeftOf(n):(this.parent.renderCommand(),t==="\\"&&this.isEmpty()||this.parent.parent.write(n,t))}};n.latex=function(){return"\\"+this.ends[i].latex()+" "};n.onKey=function(n,t){if(n==="Tab"||n==="Enter"||n==="Spacebar")return this.renderCommand(),t.preventDefault(),!1};n.renderCommand=function(){this.jQ=this.jQ.last();this.remove();this[r]?this.cursor.insLeftOf(this[r]):this.cursor.insAtRightEnd(this.parent);var n=this.ends[i].latex();n||(n="backslash");this.cursor.insertCmd(n,this._replacedFragment)}}),gi=n.binom=n.binomial=f(c,function(n){n.ctrlSeq="\\binom";n.htmlTemplate='<span class="paren scaled">(<\/span><span class="non-leaf"><span class="array non-leaf"><span>&0<\/span><span>&1<\/span><\/span><\/span><span class="paren scaled">)<\/span>';n.textTemplate=["choose(",",",")"];n.redraw=function(){var n=this.jQ.eq(1),t=n.outerHeight()/+n.css("fontSize").slice(0,-2),i=this.jQ.filter(".paren");ft(i,bt(1+.2*(t-1),1.2),1.05*t)}}),fr=n.choose=f(gi,function(n){n.createLeftOf=wi.prototype.createLeftOf}),er=n.vector=f(c,function(n,t){n.ctrlSeq="\\vector";n.htmlTemplate='<span class="array"><span>&0<\/span><\/span>';n.latex=function(){return"\\begin{matrix}"+this.foldChildren([],function(n,t){return n.push(t.latex()),n}).join("\\\\")+"\\end{matrix}"};n.text=function(){return"["+this.foldChildren([],function(n,t){return n.push(t.text()),n}).join()+"]"};n.createLeftOf=function(n){t.createLeftOf.call(this,this.cursor=n)};n.onKey=function(n,t){var u=this.cursor.parent,f;if(u.parent===this){if(n==="Enter")return f=p(),f.parent=this,f.jQ=o("<span><\/span>").attr(y,f.id).insertAfter(u.jQ),u[r]?u[r][i]=f:this.ends[r]=f,f[r]=u[r],u[r]=f,f[i]=u,this.bubble("redraw").cursor.insAtRightEnd(f),t.preventDefault(),!1;if(n!=="Tab"||u[r]){if(t.which===8){if(u.isEmpty())return u[i]?(this.cursor.insAtRightEnd(u[i]),u[i][r]=u[r]):(this.cursor.insLeftOf(this),this.ends[i]=u[r]),u[r]?u[r][i]=u[i]:this.ends[r]=u[i],u.jQ.remove(),this.isEmpty()?this.cursor.deleteForward():this.bubble("redraw"),t.preventDefault(),!1;if(!this.cursor[i])return t.preventDefault(),!1}}else return u.isEmpty()?u[i]?(this.cursor.insRightOf(this),delete u[i][r],this.ends[r]=u[i],u.jQ.remove(),this.bubble("redraw"),t.preventDefault(),!1):void 0:(f=p(),f.parent=this,f.jQ=o("<span><\/span>").attr(y,f.id).appendTo(this.jQ),this.ends[r]=f,u[r]=f,f[i]=u,this.bubble("redraw").cursor.insAtRightEnd(f),t.preventDefault(),!1)}}});n.editable=f(gt,function(n,t){n.init=function(){c.prototype.init.call(this,"\\editable")};n.jQadd=function(){var n=this,u,f;t.jQadd.apply(n,arguments);u=n.ends[i].disown();f=n.jQ.children().detach();n.ends[i]=n.ends[r]=ot();n.blocks=[n.ends[i]];n.ends[i].parent=n;si(n.jQ,n.ends[i],!1,!0);n.cursor=n.ends[i].cursor;u.children().adopt(n.ends[i],0,0);f.appendTo(n.ends[i].jQ);n.ends[i].cursor.insAtRightEnd(n.ends[i])};n.latex=function(){return this.ends[i].latex()};n.text=function(){return this.ends[i].text()}});n.f=t(g,"f",'<var class="florin">&fnof;<\/var><span style="display:inline-block;width:0">&nbsp;<\/span>');l=f(g,function(n,t){n.init=function(n,i){t.init.call(this,n,"<var>"+(i||n)+"<\/var>")};n.text=function(){var n=this.ctrlSeq;return!this[i]||this[i]instanceof l||this[i]instanceof e||(n="*"+n),!this[r]||this[r]instanceof e||this[r].ctrlSeq==="^"||(n+="*"),n}});u=f(g,function(n,t){n.init=function(n,i){t.init.call(this,n,"<span>"+(i||n)+"<\/span>")}});v[" "]=t(u,"\\:"," ");n.prime=v["'"]=t(u,"'","&prime;");et=f(g,function(n,t){n.init=function(n,i){t.init.call(this,n,'<span class="nonSymbola">'+(i||n)+"<\/span>")}});n["@"]=et;n["&"]=t(et,"\\&","&amp;");n["%"]=t(et,"\\%","%");n.alpha=n.beta=n.gamma=n.delta=n.zeta=n.eta=n.theta=n.iota=n.kappa=n.mu=n.nu=n.xi=n.rho=n.sigma=n.tau=n.chi=n.psi=n.omega=f(l,function(n,t){n.init=function(n){t.init.call(this,"\\"+n+" ","&"+n+";")}});n.phi=t(l,"\\phi ","&#981;");n.phiv=n.varphi=t(l,"\\varphi ","&phi;");n.epsilon=t(l,"\\epsilon ","&#1013;");n.epsiv=n.varepsilon=t(l,"\\varepsilon ","&epsilon;");n.piv=n.varpi=t(l,"\\varpi ","&piv;");n.sigmaf=n.sigmav=n.varsigma=t(l,"\\varsigma ","&sigmaf;");n.thetav=n.vartheta=n.thetasym=t(l,"\\vartheta ","&thetasym;");n.upsilon=n.upsi=t(l,"\\upsilon ","&upsilon;");n.gammad=n.Gammad=n.digamma=t(l,"\\digamma ","&#989;");n.kappav=n.varkappa=t(l,"\\varkappa ","&#1008;");n.rhov=n.varrho=t(l,"\\varrho ","&#1009;");n.pi=n[""]=t(et,"\\pi ","&pi;");n.lambda=t(et,"\\lambda ","&lambda;");n.Upsilon=n.Upsi=n.upsih=n.Upsih=t(g,"\\Upsilon ",'<var style="font-family: serif">&upsih;<\/var>');n.Gamma=n.Delta=n.Theta=n.Lambda=n.Xi=n.Pi=n.Sigma=n.Phi=n.Psi=n.Omega=n.forall=f(u,function(n,t){n.init=function(n){t.init.call(this,"\\"+n+" ","&"+n+";")}});it=f(c,function(n){n.init=function(n){this.latex=n};n.createLeftOf=function(n){n.writeLatex(this.latex)};n.parser=function(){var n=ut.parse(this.latex).children();return s.succeed(n)}});n[""]=t(it,"^1");n[""]=t(it,"^2");n[""]=t(it,"^3");n[""]=t(it,"\\frac14");n[""]=t(it,"\\frac12");n[""]=t(it,"\\frac34");e=f(g,function(n,t){n.init=function(n,i,r){t.init.call(this,n,'<span class="binary-operator">'+i+"<\/span>",r)}});ct=f(e,function(n){n.init=u.prototype.init;n.respace=function(){return this.jQ[0].className=this[i]?this[i]instanceof e&&this[r]&&!(this[r]instanceof e)?"unary-operator":"binary-operator":"",this}});n["+"]=t(ct,"+","+");n[""]=n["-"]=t(ct,"-","&minus;");n[""]=n.pm=n.plusmn=n.plusminus=t(ct,"\\pm ","&plusmn;");n.mp=n.mnplus=n.minusplus=t(ct,"\\mp ","&#8723;");v["*"]=n.sdot=n.cdot=t(e,"\\cdot ","&middot;");n["="]=t(e,"=","=");n["<"]=t(e,"<","&lt;");n[">"]=t(e,">","&gt;");n.notin=n.sim=n.cong=n.equiv=n.oplus=n.otimes=f(e,function(n,t){n.init=function(n){t.init.call(this,"\\"+n+" ","&"+n+";")}});n.times=t(e,"\\times ","&times;","[x]");n[""]=n.div=n.divide=n.divides=t(e,"\\div ","&divide;","[/]");n[""]=n.ne=n.neq=t(e,"\\ne ","&ne;");n.ast=n.star=n.loast=n.lowast=t(e,"\\ast ","&lowast;");n.therefor=n.therefore=t(e,"\\therefore ","&there4;");n.cuz=n.because=t(e,"\\because ","&#8757;");n.prop=n.propto=t(e,"\\propto ","&prop;");n[""]=n.asymp=n.approx=t(e,"\\approx ","&asymp;");n.lt=t(e,"<","&lt;");n.gt=t(e,">","&gt;");n[""]=n.le=n.leq=t(e,"\\le ","&le;");n[""]=n.ge=n.geq=t(e,"\\ge ","&ge;");n.isin=n["in"]=t(e,"\\in ","&isin;");n.ni=n.contains=t(e,"\\ni ","&ni;");n.notni=n.niton=n.notcontains=n.doesnotcontain=t(e,"\\not\\ni ","&#8716;");n.sub=n.subset=t(e,"\\subset ","&sub;");n.sup=n.supset=n.superset=t(e,"\\supset ","&sup;");n.nsub=n.notsub=n.nsubset=n.notsubset=t(e,"\\not\\subset ","&#8836;");n.nsup=n.notsup=n.nsupset=n.notsupset=n.nsuperset=n.notsuperset=t(e,"\\not\\supset ","&#8837;");n.sube=n.subeq=n.subsete=n.subseteq=t(e,"\\subseteq ","&sube;");n.supe=n.supeq=n.supsete=n.supseteq=n.supersete=n.superseteq=t(e,"\\supseteq ","&supe;");n.nsube=n.nsubeq=n.notsube=n.notsubeq=n.nsubsete=n.nsubseteq=n.notsubsete=n.notsubseteq=t(e,"\\not\\subseteq ","&#8840;");n.nsupe=n.nsupeq=n.notsupe=n.notsupeq=n.nsupsete=n.nsupseteq=n.notsupsete=n.notsupseteq=n.nsupersete=n.nsuperseteq=n.notsupersete=n.notsuperseteq=t(e,"\\not\\supseteq ","&#8841;");rt=f(g,function(n,t){n.init=function(n,i){t.init.call(this,n,"<big>"+i+"<\/big>")}});n[""]=n.sum=n.summation=t(rt,"\\sum ","&sum;");n[""]=n.prod=n.product=t(rt,"\\prod ","&prod;");n.coprod=n.coproduct=t(rt,"\\coprod ","&#8720;");n[""]=n.int=n.integral=t(rt,"\\int ","&int;");n.N=n.naturals=n.Naturals=t(u,"\\mathbb{N}","&#8469;");n.P=n.primes=n.Primes=n.projective=n.Projective=n.probability=n.Probability=t(u,"\\mathbb{P}","&#8473;");n.Z=n.integers=n.Integers=t(u,"\\mathbb{Z}","&#8484;");n.Q=n.rationals=n.Rationals=t(u,"\\mathbb{Q}","&#8474;");n.R=n.reals=n.Reals=t(u,"\\mathbb{R}","&#8477;");n.C=n.complex=n.Complex=n.complexes=n.Complexes=n.complexplane=n.Complexplane=n.ComplexPlane=t(u,"\\mathbb{C}","&#8450;");n.H=n.Hamiltonian=n.quaternions=n.Quaternions=t(u,"\\mathbb{H}","&#8461;");n.quad=n.emsp=t(u,"\\quad ","    ");n.qquad=t(u,"\\qquad ","        ");n.diamond=t(u,"\\diamond ","&#9671;");n.bigtriangleup=t(u,"\\bigtriangleup ","&#9651;");n.ominus=t(u,"\\ominus ","&#8854;");n.uplus=t(u,"\\uplus ","&#8846;");n.bigtriangledown=t(u,"\\bigtriangledown ","&#9661;");n.sqcap=t(u,"\\sqcap ","&#8851;");n.triangleleft=t(u,"\\triangleleft ","&#8882;");n.sqcup=t(u,"\\sqcup ","&#8852;");n.triangleright=t(u,"\\triangleright ","&#8883;");n.odot=t(u,"\\odot ","&#8857;");n.bigcirc=t(u,"\\bigcirc ","&#9711;");n.dagger=t(u,"\\dagger ","&#0134;");n.ddagger=t(u,"\\ddagger ","&#135;");n.wr=t(u,"\\wr ","&#8768;");n.amalg=t(u,"\\amalg ","&#8720;");n.models=t(u,"\\models ","&#8872;");n.prec=t(u,"\\prec ","&#8826;");n.succ=t(u,"\\succ ","&#8827;");n.preceq=t(u,"\\preceq ","&#8828;");n.succeq=t(u,"\\succeq ","&#8829;");n.simeq=t(u,"\\simeq ","&#8771;");n.mid=t(u,"\\mid ","&#8739;");n.ll=t(u,"\\ll ","&#8810;");n.gg=t(u,"\\gg ","&#8811;");n.parallel=t(u,"\\parallel ","&#8741;");n.bowtie=t(u,"\\bowtie ","&#8904;");n.sqsubset=t(u,"\\sqsubset ","&#8847;");n.sqsupset=t(u,"\\sqsupset ","&#8848;");n.smile=t(u,"\\smile ","&#8995;");n.sqsubseteq=t(u,"\\sqsubseteq ","&#8849;");n.sqsupseteq=t(u,"\\sqsupseteq ","&#8850;");n.doteq=t(u,"\\doteq ","&#8784;");n.frown=t(u,"\\frown ","&#8994;");n.vdash=t(u,"\\vdash ","&#8870;");n.dashv=t(u,"\\dashv ","&#8867;");n.longleftarrow=t(u,"\\longleftarrow ","&#8592;");n.longrightarrow=t(u,"\\longrightarrow ","&#8594;");n.Longleftarrow=t(u,"\\Longleftarrow ","&#8656;");n.Longrightarrow=t(u,"\\Longrightarrow ","&#8658;");n.longleftrightarrow=t(u,"\\longleftrightarrow ","&#8596;");n.updownarrow=t(u,"\\updownarrow ","&#8597;");n.Longleftrightarrow=t(u,"\\Longleftrightarrow ","&#8660;");n.Updownarrow=t(u,"\\Updownarrow ","&#8661;");n.mapsto=t(u,"\\mapsto ","&#8614;");n.nearrow=t(u,"\\nearrow ","&#8599;");n.hookleftarrow=t(u,"\\hookleftarrow ","&#8617;");n.hookrightarrow=t(u,"\\hookrightarrow ","&#8618;");n.searrow=t(u,"\\searrow ","&#8600;");n.leftharpoonup=t(u,"\\leftharpoonup ","&#8636;");n.rightharpoonup=t(u,"\\rightharpoonup ","&#8640;");n.swarrow=t(u,"\\swarrow ","&#8601;");n.leftharpoondown=t(u,"\\leftharpoondown ","&#8637;");n.rightharpoondown=t(u,"\\rightharpoondown ","&#8641;");n.nwarrow=t(u,"\\nwarrow ","&#8598;");n.ldots=t(u,"\\ldots ","&#8230;");n.cdots=t(u,"\\cdots ","&#8943;");n.vdots=t(u,"\\vdots ","&#8942;");n.ddots=t(u,"\\ddots ","&#8944;");n.surd=t(u,"\\surd ","&#8730;");n.triangle=t(u,"\\triangle ","&#9653;");n.ell=t(u,"\\ell ","&#8467;");n.top=t(u,"\\top ","&#8868;");n.flat=t(u,"\\flat ","&#9837;");n.natural=t(u,"\\natural ","&#9838;");n.sharp=t(u,"\\sharp ","&#9839;");n.wp=t(u,"\\wp ","&#8472;");n.bot=t(u,"\\bot ","&#8869;");n.clubsuit=t(u,"\\clubsuit ","&#9827;");n.diamondsuit=t(u,"\\diamondsuit ","&#9826;");n.heartsuit=t(u,"\\heartsuit ","&#9825;");n.spadesuit=t(u,"\\spadesuit ","&#9824;");n.oint=t(u,"\\oint ","&#8750;");n.bigcap=t(u,"\\bigcap ","&#8745;");n.bigcup=t(u,"\\bigcup ","&#8746;");n.bigsqcup=t(u,"\\bigsqcup ","&#8852;");n.bigvee=t(u,"\\bigvee ","&#8744;");n.bigwedge=t(u,"\\bigwedge ","&#8743;");n.bigodot=t(u,"\\bigodot ","&#8857;");n.bigotimes=t(u,"\\bigotimes ","&#8855;");n.bigoplus=t(u,"\\bigoplus ","&#8853;");n.biguplus=t(u,"\\biguplus ","&#8846;");n.lfloor=t(u,"\\lfloor ","&#8970;");n.rfloor=t(u,"\\rfloor ","&#8971;");n.lceil=t(u,"\\lceil ","&#8968;");n.rceil=t(u,"\\rceil ","&#8969;");n.slash=t(u,"\\slash ","&#47;");n.opencurlybrace=t(u,"\\opencurlybrace ","&#123;");n.closecurlybrace=t(u,"\\closecurlybrace ","&#125;");n.caret=t(u,"\\caret ","^");n.underscore=t(u,"\\underscore ","_");n.backslash=t(u,"\\backslash ","\\");n.vert=t(u,"|");n.perp=n.perpendicular=t(u,"\\perp ","&perp;");n.nabla=n.del=t(u,"\\nabla ","&nabla;");n.hbar=t(u,"\\hbar ","&#8463;");n.AA=n.Angstrom=n.angstrom=t(u,"\\text\\AA ","&#8491;");n.ring=n.circ=n.circle=t(u,"\\circ ","&#8728;");n.bull=n.bullet=t(u,"\\bullet ","&bull;");n.setminus=n.smallsetminus=t(u,"\\setminus ","&#8726;");n.not=n[""]=n.neg=t(u,"\\neg ","&not;");n[""]=n.dots=n.ellip=n.hellip=n.ellipsis=n.hellipsis=t(u,"\\dots ","&hellip;");n.converges=n.darr=n.dnarr=n.dnarrow=n.downarrow=t(u,"\\downarrow ","&darr;");n.dArr=n.dnArr=n.dnArrow=n.Downarrow=t(u,"\\Downarrow ","&dArr;");n.diverges=n.uarr=n.uparrow=t(u,"\\uparrow ","&uarr;");n.uArr=n.Uparrow=t(u,"\\Uparrow ","&uArr;");n.to=t(e,"\\to ","&rarr;");n.rarr=n.rightarrow=t(u,"\\rightarrow ","&rarr;");n.implies=t(e,"\\Rightarrow ","&rArr;");n.rArr=n.Rightarrow=t(u,"\\Rightarrow ","&rArr;");n.gets=t(e,"\\gets ","&larr;");n.larr=n.leftarrow=t(u,"\\leftarrow ","&larr;");n.impliedby=t(e,"\\Leftarrow ","&lArr;");n.lArr=n.Leftarrow=t(u,"\\Leftarrow ","&lArr;");n.harr=n.lrarr=n.leftrightarrow=t(u,"\\leftrightarrow ","&harr;");n.iff=t(e,"\\Leftrightarrow ","&hArr;");n.hArr=n.lrArr=n.Leftrightarrow=t(u,"\\Leftrightarrow ","&hArr;");n.Re=n.Real=n.real=t(u,"\\Re ","&real;");n.Im=n.imag=n.image=n.imagin=n.imaginary=n.Imaginary=t(u,"\\Im ","&image;");n.part=n.partial=t(u,"\\partial ","&part;");n.inf=n.infin=n.infty=n.infinity=t(u,"\\infty ","&infin;");n.alef=n.alefsym=n.aleph=n.alephsym=t(u,"\\aleph ","&alefsym;");n.xist=n.xists=n.exist=n.exists=t(u,"\\exists ","&exist;");n.and=n.land=n.wedge=t(u,"\\wedge ","&and;");n.or=n.lor=n.vee=t(u,"\\vee ","&or;");n.o=n.O=n.empty=n.emptyset=n.oslash=n.Oslash=n.nothing=n.varnothing=t(e,"\\varnothing ","&empty;");n.cup=n.union=t(e,"\\cup ","&cup;");n.cap=n.intersect=n.intersection=t(e,"\\cap ","&cap;");n.deg=n.degree=t(u,"^\\circ ","&deg;");n.ang=n.angle=t(u,"\\angle ","&ang;");ui=f(g,function(n,t){n.init=function(n){t.init.call(this,"\\"+n+" ","<span>"+n+"<\/span>")};n.respace=function(){this.jQ[0].className=this[r]instanceof b||this[r]instanceof st?"":"non-italicized-function"}});n.ln=n.lg=n.log=n.span=n.proj=n.det=n.dim=n.min=n.max=n.mod=n.lcm=n.gcd=n.gcf=n.hcf=n.lim=ui,function(){var t=["sin","cos","tan","sec","cosec","csc","cotan","cot"];for(var i in t)n[t[i]]=n[t[i]+"h"]=n["a"+t[i]]=n["arc"+t[i]]=n["a"+t[i]+"h"]=n["arc"+t[i]+"h"]=ui}();var ut=function(){function v(n){var t=p();return n.adopt(t,0,0),t}function h(n){for(var t=n[0]||p(),i=1;i<n.length;i+=1)n[i].children().adopt(t,t.ends[r],0);return t}var t=s.string,i=s.regex,y=s.letter,w=s.any,f=s.optWhitespace,b=s.succeed,c=s.fail,k=y.map(l),d=i(/^[^${}\\_^]/).map(u),g=i(/^[^\\a-eg-zA-Z]/).or(t("\\").then(i(/^[a-z]+/i).or(i(/^\s+/).result(" ")).or(w))).then(function(t){var i=n[t];return i?i(t).parser():c("unknown command: \\"+t)}),nt=g.or(k).or(d),tt=t("{").then(function(){return a}).skip(t("}")),e=f.then(tt.or(nt.map(v))),a=e.many().map(h).skip(f),it=t("[").then(e.then(function(n){return n.join("latex")!=="]"?b(n):c()}).many().map(h).skip(f)).skip(t("]")),o=a;return o.block=e,o.optBlock=it,o}(),nr=f(kt,function(t){function e(n,t){var e,u,o,s;if(n[r][t])n.insAtLeftEnd(n[r][t]);else if(n[i][t])n.insAtRightEnd(n[i][t]);else{e=n.parent;do{if(u=e[t],u&&(typeof u=="function"&&(u=e[t](n)),u===!1||u instanceof p)){n.upDownCache[e.id]=kt(n.parent,n[i],n[r]);u instanceof p&&(o=n.upDownCache[u.id],o?o[r]?n.insLeftOf(o[r]):n.insAtRightEnd(o.parent):(s=f(n).left,n.insAtRightEnd(u),n.seekHoriz(s,u)));break}e=e.parent.parent}while(e)}return n.clearSelection().show()}function f(n){var t=n.jQ.removeClass("cursor").offset();return n.jQ.addClass("cursor"),t}function u(n){n.upDownCache={}}t.init=function(n){this.parent=this.root=n;var t=this.jQ=this._jQ=o('<span class="cursor">&zwj;<\/span>');this.blink=function(){t.toggleClass("blink")};this.upDownCache={}};t.show=function(){return this.jQ=this._jQ.removeClass("blink"),"intervalId"in this?clearInterval(this.intervalId):(this[r]?this.selection&&this.selection.ends[i][i]===this[i]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[r].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this};t.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=o(),this};t.withDirInsertAt=function(n,t,i,r){var u=this.parent;this.parent=t;this[n]=i;this[-n]=r;u.blur()};t.insDirOf=function(n,t){return d(n),this.withDirInsertAt(n,t.parent,t[n],t),this.parent.jQ.addClass("hasCursor"),this.jQ.insDirOf(n,t.jQ),this};t.insLeftOf=function(n){return this.insDirOf(i,n)};t.insRightOf=function(n){return this.insDirOf(r,n)};t.insAtDirEnd=function(n,t){return d(n),this.withDirInsertAt(n,t,0,t.ends[n]),n===i&&t.textarea?this.jQ.insDirOf(-n,t.textarea):this.jQ.insAtDirEnd(n,t.jQ),t.focus(),this};t.insAtLeftEnd=function(n){return this.insAtDirEnd(i,n)};t.insAtRightEnd=function(n){return this.insAtDirEnd(r,n)};t.hopDir=function(n){return d(n),this.jQ.insDirOf(n,this[n].jQ),this[-n]=this[n],this[n]=this[n][n],this};t.hopLeft=function(){return this.hopDir(i)};t.hopRight=function(){return this.hopDir(r)};t.moveDirWithin=function(n,t){if(d(n),this[n])this[n].ends[-n]?this.insAtDirEnd(-n,this[n].ends[-n]):this.hopDir(n);else{if(this.parent===t)return;this.parent[n]?this.insAtDirEnd(-n,this.parent[n]):this.insDirOf(n,this.parent.parent)}};t.moveLeftWithin=function(n){return this.moveDirWithin(i,n)};t.moveRightWithin=function(n){return this.moveDirWithin(r,n)};t.moveDir=function(n){return d(n),u(this),this.selection?this.insDirOf(n,this.selection.ends[n]).clearSelection():this.moveDirWithin(n,this.root),this.show()};t.moveLeft=function(){return this.moveDir(i)};t.moveRight=function(){return this.moveDir(r)};t.moveUp=function(){return e(this,"up")};t.moveDown=function(){return e(this,"down")};t.seek=function(n,t){u(this);var r,f,i=this.clearSelection().show();return n.hasClass("empty")?(i.insAtLeftEnd(h[n.attr(y)]),i):(r=h[n.attr(ei)],r instanceof g)?(n.outerWidth()>2*(t-n.offset().left)?i.insLeftOf(r):i.insRightOf(r),i):(r||(f=h[n.attr(y)],f||(n=n.parent(),r=h[n.attr(ei)],r||(f=h[n.attr(y)],f||(f=i.root)))),r?i.insRightOf(r):i.insAtRightEnd(f),i.seekHoriz(t,i.root))};t.seekHoriz=function(n,t){var r=this,u=f(r).left-n,e;do r.moveLeftWithin(t),e=u,u=f(r).left-n;while(u>0&&(r[i]||r.parent!==t));return-u>e&&r.moveRightWithin(t),r};t.writeLatex=function(n){var t=this;u(t);t.show().deleteSelection();var e=s.all,o=s.eof,f=ut.skip(o).or(e.result(!1)).parse(n);return f&&(f.children().adopt(t.parent,t[i],t[r]),h.jQize(f.join("html")).insertBefore(t.jQ),t[i]=f.ends[r],f.finalizeInsert(),t.parent.bubble("redraw")),this.hide()};t.write=function(n){var t=this.prepareWrite();return this.insertCh(n,t)};t.insertCh=function(n,t){return this.parent.write(this,n,t),this};t.insertCmd=function(t,r){var u=n[t];return u?(u=u(t),r&&u.replaces(r),u.createLeftOf(this)):(u=pt(),u.replaces(t),u.ends[i].focus=function(){return delete this.focus,this},u.createLeftOf(this),this.insRightOf(u),r&&r.remove()),this};t.unwrapGramp=function(){var n=this.parent.parent,t=n.parent,f=n[r],e=this,u=n[i];if(n.disown().eachChild(function(i){i.isEmpty()||(i.children().adopt(t,u,f).each(function(t){t.jQ.insertBefore(n.jQ.first())}),u=i.ends[r])}),!this[r])if(this[i])this[r]=this[i][r];else while(!this[r])if(this.parent=this.parent[r],this.parent)this[r]=this.parent.ends[i];else{this[r]=n[r];this.parent=t;break}this[r]?this.insLeftOf(this[r]):this.insAtRightEnd(t);n.jQ.remove();n[i]&&n[i].respace();n[r]&&n[r].respace()};t.deleteDir=function(n){if(d(n),u(this),this.show(),!this.deleteSelection())if(this[n])this[n].isEmpty()?this[n]=this[n].remove()[n]:this.selectDir(n);else if(this.parent!==this.root){if(this.parent.parent.isEmpty())return this.insDirOf(-n,this.parent.parent).deleteDir(n);this.unwrapGramp()}return this[i]&&this[i].respace(),this[r]&&this[r].respace(),this.parent.bubble("redraw"),this};t.backspace=function(){return this.deleteDir(i)};t.deleteForward=function(){return this.deleteDir(r)};t.selectFrom=function(n){var f=this,e=n,o,s,u,t,c,h;n:for(;;){for(o=this;o!==f.parent.parent;o=o.parent.parent)if(o.parent===e.parent){u=o;t=e;break n}for(s=n;s!==e.parent.parent;s=s.parent.parent)if(f.parent===s.parent){u=f;t=s;break n}f.parent.parent&&(f=f.parent.parent);e.parent.parent&&(e=e.parent.parent)}if(u[r]!==t){for(h=u;h;h=h[r])if(h===t[i]){c=!0;break}c||(c=t,t=u,u=c)}this.hide().selection=li(u[i][r]||u.parent.ends[i],t[r][i]||t.parent.ends[r]);this.insRightOf(t[r][i]||t.parent.ends[r]);this.root.selectionChanged()};t.selectDir=function(n){if(d(n),u(this),this.selection)if(this.selection.ends[n]===this[-n])this[n]?this.hopDir(n).selection.extendDir(n):this.parent!==this.root&&this.insDirOf(n,this.parent.parent).selection.levelUp();else{if(this.hopDir(n),this.selection.ends[n]===this.selection.ends[-n]){this.clearSelection().show();return}this.selection.retractDir(n)}else{if(this[n])this.hopDir(n);else{if(this.parent===this.root)return;this.insDirOf(n,this.parent.parent)}this.hide().selection=li(this[-n])}this.root.selectionChanged()};t.selectLeft=function(){return this.selectDir(i)};t.selectRight=function(){return this.selectDir(r)};t.prepareMove=function(){return u(this),this.show().clearSelection()};t.prepareEdit=function(){return u(this),this.show().deleteSelection()};t.prepareWrite=function(){return u(this),this.show().replaceSelection()};t.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.root.selectionChanged()),this};t.deleteSelection=function(){return this.selection?(this[i]=this.selection.ends[i][i],this[r]=this.selection.ends[r][r],this.selection.remove(),this.root.selectionChanged(),delete this.selection):!1};t.replaceSelection=function(){var n=this.selection;return n&&(this[i]=n.ends[i][i],this[r]=n.ends[r][r],delete this.selection),n}}),li=f(vt,function(n,t){n.init=function(){var n=this;t.init.apply(n,arguments);n.jQwrap(n.jQ)};n.jQwrap=function(n){this.jQ=n.wrapAll('<span class="selection"><\/span>').parent()};n.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),t.adopt.apply(this,arguments)};n.clear=function(){return this.jQ.replaceWith(this.jQ.children()),this};n.levelUp=function(){var n=this,t=n.ends[i]=n.ends[r]=n.ends[r].parent.parent;return n.clear().jQwrap(t.jQ),n};n.extendDir=function(n){return d(n),this.ends[n]=this.ends[n][n],this.ends[n].jQ.insAtDirEnd(n,this.jQ),this};n.extendLeft=function(){return this.extendDir(i)};n.extendRight=function(){return this.extendDir(r)};n.retractDir=function(n){d(n);this.ends[-n].jQ.insDirOf(-n,this.jQ);this.ends[-n]=this.ends[-n][n]};n.retractRight=function(){return this.retractDir(r)};n.retractLeft=function(){return this.retractDir(i)}});k.fn.mathquill=function(n,t){var i,r;switch(n){case"redraw":return this.each(function(){var n=o(this).attr(y),t=n&&h[n];t&&function i(n){n.eachChild(i);n.redraw&&n.redraw()}(t)});case"revert":return this.each(function(){var t=o(this).attr(y),n=t&&h[t];n&&n.revert&&n.revert()});case"latex":return arguments.length>1?this.each(function(){var n=o(this).attr(y),i=n&&h[n];i&&i.renderLatex(t)}):(i=o(this).attr(y),r=i&&h[i],r&&r.latex());case"text":return i=o(this).attr(y),r=i&&h[i],r&&r.text();case"html":return this.html().replace(/ ?hasCursor|hasCursor /,"").replace(/ class=(""|(?= |>))/g,"").replace(/<span class="?cursor( blink)?"?><\/span>/i,"").replace(/<span class="?textarea"?><textarea><\/textarea><\/span>/i,"").replace(/<span class="?textarea"?><input type="password" \/><\/span>/i,"");case"write":if(arguments.length>1)return this.each(function(){var n=o(this).attr(y),i=n&&h[n],r=i&&i.cursor;r&&r.writeLatex(t).parent.blur()});case"cmd":if(arguments.length>1)return this.each(function(){var r=o(this).attr(y),u=r&&h[r],n=u&&u.cursor,i;n&&(i=n.prepareWrite(),/^\\[a-z]+$/i.test(t)?n.insertCmd(t.slice(1),i):n.insertCh(t,i),n.hide().parent.blur())});default:var u=n==="textbox",f=u||n==="editable",e=u?vi:ot;return this.each(function(){si(o(this),e(),u,f)})}};k(function(){k(".mathquill-editable:not(.mathquill-rendered-math)").mathquill("editable");k(".mathquill-textbox:not(.mathquill-rendered-math)").mathquill("textbox");k(".mathquill-embedded-latex").mathquill()})}(),function(){function i(t){var i,r,e,u,f,o;for(e=t.length,r=0,i="";r<e;){if(u=t.charCodeAt(r++)&255,r==e){i+=n.charAt(u>>2);i+=n.charAt((u&3)<<4);i+="==";break}if(f=t.charCodeAt(r++),r==e){i+=n.charAt(u>>2);i+=n.charAt((u&3)<<4|(f&240)>>4);i+=n.charAt((f&15)<<2);i+="=";break}o=t.charCodeAt(r++);i+=n.charAt(u>>2);i+=n.charAt((u&3)<<4|(f&240)>>4);i+=n.charAt((f&15)<<2|(o&192)>>6);i+=n.charAt(o&63)}return i}function r(n){var s,o,r,u,i,e,f;for(e=n.length,i=0,f="";i<e;){do s=t[n.charCodeAt(i++)&255];while(i<e&&s==-1);if(s==-1)break;do o=t[n.charCodeAt(i++)&255];while(i<e&&o==-1);if(o==-1)break;f+=String.fromCharCode(s<<2|(o&48)>>4);do{if(r=n.charCodeAt(i++)&255,r==61)return f;r=t[r]}while(i<e&&r==-1);if(r==-1)break;f+=String.fromCharCode((o&15)<<4|(r&60)>>2);do{if(u=n.charCodeAt(i++)&255,u==61)return f;u=t[u]}while(i<e&&u==-1);if(u==-1)break;f+=String.fromCharCode((r&3)<<6|u)}return f}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];window.btoa||(window.btoa=i);window.atob||(window.atob=r);window.base64encode||(window.base64encode=i);window.base64decode||(window.base64decode=r)}();Canvas2Image=function(){var f=!1,n=document.createElement("canvas");if(!n.getContext||!n.getContext("2d")||(f=!0),!f)return{saveAsBMP:function(){},saveAsPNG:function(){},saveAsJPEG:function(){}};var h=!!n.getContext&&!!n.getContext("2d").getImageData,e=!!n.toDataURL,c=!!window.btoa,t="image/octet-stream",l=function(n){var t=parseInt(n.width),i=parseInt(n.height);return n.getContext("2d").getImageData(0,0,t,i)},o=function(n){var i="",r,t;if(typeof n=="string")i=n;else for(r=n,t=0;t<r.length;t++)i+=String.fromCharCode(r[t]);return btoa(i)},a=function(n){var i=[],s=n.width,c=n.height,r,t,u,f,e,y,l,h,a,v,w;for(i.push(66),i.push(77),r=s*c*3+54,i.push(r%256),r=Math.floor(r/256),i.push(r%256),r=Math.floor(r/256),i.push(r%256),r=Math.floor(r/256),i.push(r%256),i.push(0),i.push(0),i.push(0),i.push(0),i.push(54),i.push(0),i.push(0),i.push(0),t=[],t.push(40),t.push(0),t.push(0),t.push(0),u=s,t.push(u%256),u=Math.floor(u/256),t.push(u%256),u=Math.floor(u/256),t.push(u%256),u=Math.floor(u/256),t.push(u%256),f=c,t.push(f%256),f=Math.floor(f/256),t.push(f%256),f=Math.floor(f/256),t.push(f%256),f=Math.floor(f/256),t.push(f%256),t.push(1),t.push(0),t.push(24),t.push(0),t.push(0),t.push(0),t.push(0),t.push(0),e=s*c*3,t.push(e%256),e=Math.floor(e/256),t.push(e%256),e=Math.floor(e/256),t.push(e%256),e=Math.floor(e/256),t.push(e%256),y=0;y<16;y++)t.push(0);var d=(4-s*3%4)%4,p=n.data,b="",k=c;do{for(l=s*(k-1)*4,h="",a=0;a<s;a++)v=4*a,h+=String.fromCharCode(p[l+v+2]),h+=String.fromCharCode(p[l+v+1]),h+=String.fromCharCode(p[l+v]);for(w=0;w<d;w++)h+=String.fromCharCode(0);b+=h}while(--k);return o(i.concat(t))+o(b)},i=function(n){document.location.href=n},s=function(n,t){return"data:"+t+";base64,"+n},r=function(n){var t=document.createElement("img");return t.src=n,t},u=function(n,t,i){var r,u;return t&&i?(r=document.createElement("canvas"),r.width=t,r.height=i,r.style.width=t+"px",r.style.height=i+"px",u=r.getContext("2d"),u.drawImage(n,0,0,n.width,n.height,0,0,t,i),r):n};return{saveAsPNG:function(n,f,o,s){if(!e)return!1;var c=u(n,o,s),h=c.toDataURL("image/png");return f?r(h):(i(h.replace("image/png",t)),!0)},saveAsJPEG:function(n,f,o,s){if(!e)return!1;var l=u(n,o,s),h="image/jpeg",c=l.toDataURL(h);return c.indexOf(h)!=5?!1:f?r(c):(i(c.replace(h,t)),!0)},saveAsBMP:function(n,f,e,o){if(!(h&&c))return!1;var y=u(n,e,o),p=l(y),v=a(p);return f?r(s(v,"image/bmp")):(i(s(v,t)),!0)}}}(),function(n,t){function f(n){function r(n,i){i.mousedown(t)}function u(n,i){i.unbind("mousedown",t)}function t(t){t.button==2&&(i(n),e(n,n.getOptions().imageFormat),setTimeout(function(){i(n)},500))}n.hooks.bindEvents.push(r);n.hooks.shutdown.push(u)}function u(n){setTimeout(function(){i(n)},100)}function i(){n(r).unbind("mouseup",u).remove()}function e(i,f){var o=i.getCanvas(),e=null;switch(f.toLowerCase()){case"png":e=t.saveAsPNG(o,f);break;case"bmp":e=t.saveAsBMP(o,f);break;case"jpeg":e=t.saveAsJPEG(o,f)}if(e||(e=t.saveAsPNG(o,"png")),e||(e=t.saveAsPNG(o,"bmp")),e||(e=t.saveAsJPEG(o,"jpeg")),!e)return alert(i.getOptions().notSupportMessage||"Oh Sorry, but this browser is not capable of creating image files, please use PRINT SCREEN key instead!"),!1;n(e).attr("class",i.getOptions().imageClassName);n(e).css({border:n(o).css("border"),"z-index":"9999",position:"absolute"});n(e).insertBefore(n(o));n(e).mouseup(i,u);r=e}var r=null;n.plot.plugins.push({init:f,options:{imageClassName:"canvas-image",imageFormat:"png"},name:"saveAsImage",version:"1.2"})}(jQuery,Canvas2Image),function(){typeof zizhujy!="undefined"&&typeof zizhujy.com!="undefined"&&typeof zizhujy.com.Collection=="undefined"&&(zizhujy.com.Collection=function(){this.__elements__=[];for(var n=0;n<arguments.length;n++)this.__elements__.push(arguments[n]);this.elements=this.__elements__;zizhujy.com.Collection.__initialized__||(zizhujy.com.Collection.prototype.add=function(n){this.__elements__.push(n)},zizhujy.com.Collection.prototype.remove=function(n){var t=this.__elements__.indexOf(n);t>=0&&this.__elements__.splice(t,1)},zizhujy.com.Collection.prototype.removeAt=function(n){this.__elements__.splice(n,1)},zizhujy.com.Collection.prototype.clear=function(){this.__elements__.clear()},zizhujy.com.Collection.prototype.count=function(){return this.__elements__.length},zizhujy.com.Collection.prototype.get=function(n){return this.__elements__[n]},zizhujy.com.Collection.__initialized__=!0)})}(),function(){if(typeof zizhujy=="undefined"&&(zizhujy={}),window.zizhujy=zizhujy,typeof zizhujy.com=="undefined"&&(zizhujy.com={}),typeof zizhujy.com.Collection=="undefined")throw"zizhujy.com.DataTable is dependent on zizhujy.com.Collection which hasn't been referenced yet!";typeof zizhujy.com.DataTableCell=="undefined"&&(zizhujy.com.DataTableCell=function(){if(this.row=0,this.col=0,this.value="",arguments.length>0)switch(typeof arguments[0]){case"object":try{this.value=arguments[0].value;this.row=arguments[0].row;this.col=arguments[0].col}catch(n){throw" DataTableCell()  {0}".format(n);}break;default:this.value=arguments[0]}arguments.length>1&&(this.row=arguments[1]);arguments.length>2&&(this.col=arguments[2]);this.__initialized__||(zizhujy.com.DataTableCell.prototype.toHtml=function(n){var t="&nbsp;";return!!this.value&&this.value.length>0&&(t=this.value,!n||(t=t.htmlEncode())),"<td>{0}<\/td>".format(t)},this.__initialized__=!0)});typeof zizhujy.com.DataTableRow=="undefined"&&(zizhujy.com.DataTableRow=function(){var t,n;if(this.rowNo=0,this.cells=[],arguments.length>0)for(t=Array.prototype.slice.call(arguments),arguments[0]instanceof Array&&(t=arguments[0]),n=0;n<t.length;n++)if(t[n]instanceof zizhujy.com.DataTableCell)this.cells.push(t[n]);else switch(typeof t[n]){case"object":this.cells.push(new zizhujy.com.DataTableCell(t[n]));break;default:this.cells.push(new zizhujy.com.DataTableCell(t[n],this.rowNo,n))}this.__initialized__||(zizhujy.com.DataTableRow.prototype.setRowNo=function(n){this.rowNo=n;for(var t=0;t<this.cells.length;t++)this.cells[t].row=n},zizhujy.com.DataTableRow.prototype.toHtml=function(n){for(var i=new StringBuffer,t=0;t<this.cells.length;t++)i.append(this.cells[t].toHtml(n));return"<tr>{0}<\/tr>".format(i.toString())},this.__initialized__=!0)});typeof zizhujy.com.DataTableColumn=="undefined"&&(zizhujy.com.DataTableColumn=function(){this.colNo=0;this.colName="";this.cells=[];arguments.length>0&&(this.colName=arguments[0]);this.__initialized__||(zizhujy.com.DataTableColumn.prototype.setColumnNo=function(n){this.colNo=n;for(var t=0;t<this.cells.length;t++)this.cells[t].col=n},zizhujy.com.DataTableColumn.prototype.toHtml=function(){return"<col />"},this.__initialized__=!0)});typeof zizhujy.com.DataTableCellCollection=="undefined"&&(zizhujy.com.DataTableCellCollection=function(){zizhujy.com.Collection.call(this,arguments);zizhujy.com.DataTableCellCollection.__initialized__||(zizhujy.com.DataTableCellCollection.prototype.toHtml=function(n){for(var r,i=new StringBuffer,t=0;t<this.elements.length;t++)r=this.elements[t],i.append(r.toHtml(n));return i.toString()},zizhujy.com.DataTableCellCollection.__initialized__=!0)},zizhujy.com.DataTableCellCollection.prototype=new zizhujy.com.Collection);typeof zizhujy.com.DataTableRowCollection=="undefined"&&(zizhujy.com.DataTableRowCollection=function(){zizhujy.com.Collection.call(this,arguments);zizhujy.com.DataTableRowCollection.__initialized__||(zizhujy.com.DataTableRowCollection.prototype.add=function(){var n=null,t;arguments[0]instanceof zizhujy.com.DataTableRow?n=arguments[0]:(t=Array.prototype.slice.call(arguments),n=new zizhujy.com.DataTableRow(t));zizhujy.com.Collection.prototype.add.call(this,n)},zizhujy.com.DataTableRowCollection.prototype.toHtml=function(n){for(var r,i=new StringBuffer,t=0;t<this.elements.length;t++)r=this.elements[t],i.append(r.toHtml(n));return i.toString()},zizhujy.com.DataTableRowCollection.__initialized__=!0)},zizhujy.com.DataTableRowCollection.prototype=new zizhujy.com.Collection);typeof zizhujy.com.DataTableColumnCollection=="undefined"&&(zizhujy.com.DataTableColumnCollection=function(){zizhujy.com.Collection.call(this,arguments);zizhujy.com.DataTableColumnCollection.__initialized__||(zizhujy.com.DataTableColumnCollection.prototype.add=function(){var n=null;n=arguments[0]instanceof zizhujy.com.DataTableColumn?arguments[0]:new zizhujy.com.DataTableColumn(arguments[0]);zizhujy.com.Collection.prototype.add.call(this,n)},zizhujy.com.DataTableColumnCollection.prototype.toHtml=function(n){for(var r,i=new StringBuffer,t=0;t<this.elements.length;t++)r=this.elements[t],i.append(r.toHtml(n));return i.toString()},zizhujy.com.DataTableColumnCollection.__initialized__=!0)},zizhujy.com.DataTableColumnCollection.prototype=new zizhujy.com.Collection);typeof zizhujy.com.DataTable=="undefined"&&(zizhujy.com.DataTable=function(){this.rows=new zizhujy.com.DataTableRowCollection;this.columns=new zizhujy.com.DataTableColumnCollection;this.__initialized__||(zizhujy.com.DataTable.prototype.clear=function(){this.rows.clear();this.columns.clear()},zizhujy.com.DataTable.prototype.toHtml=function(){var u="",i=!1,t="",n,r,f;switch(typeof arguments[0]){case"boolean":i=arguments[0];switch(typeof arguments[1]){case"string":t=arguments[1]}break;case"string":u=arguments[0];switch(typeof arguments[1]){case"boolean":i=arguments[1];switch(typeof arguments[2]){case"string":t=arguments[2]}break;case"string":t=arguments[1]}}for(n=new StringBuffer,n.append("<table "),u.length>0&&n.append('class="{0}"'.format(u)),n.append(">"),!!t&&t.length>0&&n.append("<caption>{0}<\/caption>".format(t)),n.append("<colgroup>"),n.append(this.columns.toHtml(i)),n.append("<\/colgroup>"),n.append("<thead>"),n.append("<tr>"),r=0;r<this.columns.elements.length;r++)f=this.columns.elements[r],n.append("<th>{0}<\/th>".format(f.colName));return n.append("<\/tr>"),n.append("<\/thead>"),n.append("<tbody>"),n.append(this.rows.toHtml(i)),n.append("<\/tbody>"),n.append("<\/table>"),n.toString()},this.__initialized__=!0)})}(),function(n){function t(){function f(n){if(!n.extendedBy||!n.extendedBy.indexOf("jquery.flot.mathquillLegend")<0){var t=n.setupGrid;n.setupGrid=function(){t();i(n,n.getCanvas())}}return n}var u=!1,t=n.plot,r;if(!u){n.plot=function(n,i,r){var u=f(t(n,i,r),r);return window.testPlot=u,u.extendedBy=u.extendedBy||[],u.extendedBy.push("jquery.flot.mathquillLegend"),u};for(r in t)n.plot[r]=t[r];n.plot.extendedBy=n.plot.extendedBy||[];n.plot.extendedBy.push("jquery.flot.mathquillLegend");u=!0}}function i(){n(".mathquill-embedded-latex").mathquill();var t=n("div.legend > table"),i=n("div.legend > div");i.width(t.outerWidth());i.height(t.outerHeight())}t()}(jQuery),function(n){function f(n){n.hooks.draw.push(e);n.hooks.shutdown.push(o)}function e(t){var o=t.getOptions(),v=o.navigationControl.display||"none",y="<div class='navigation-control' style='width: 0; height: 0; left: "+o.navigationControl.position.left+"; top: "+o.navigationControl.position.top+"; position: absolute; display: "+v+";'>Control<\/div>",f="<div class='{0}' style='box-sizing: border-box; position: absolute; left: {1}; top: {2}; height: 28px; width: 28px; border: solid 1px #666; padding: 0; line-height: 28px; border-radius: 5px; cursor: pointer; background-color: #f5f5f5; display: inline-block; text-align: center; -webkit-box-shadow: 0 0 4px rgba(0, 0, 0, 0.15); box-shadow: 0 0 4px rgba(0, 0, 0, 0.15); text-shadow: 1px 1px 5px rgba(100, 100, 100, 0.75);'><div><span class='icon' style='color: #666; vertical-align: baseline;{4}'>{3}<\/span><\/div><\/div>",p=f.format("zoom-in-horizontal","0","0","&#xe603;"," font-size: larger!important;"),w=f.format("zoom-in","29px","0","+",""),b=f.format("zoom-in-vertical","58px","0","&#xe600;"," font-size: larger!important;"),k=f.format("zoom-home","29px","58px","",""),d=f.format("zoom-out-horizontal","0","116px","&#xe603;"," font-size: larger!important;"),g=f.format("zoom-out","29px","116px","-",""),nt=f.format("zoom-out-vertical","58px","116px","&#xe600;"," font-size: larger!important;"),tt=f.format("pan-up","29px","29px","",""),it=f.format("pan-right","58px","58px","",""),rt=f.format("pan-down","29px","87px","",""),ut=f.format("pan-left","0","58px","",""),e="",i=t.getPlaceholder();i.find(".navigation-control").remove();n(y).html(p+w+b+e+tt+e+ut+k+it+e+rt+e+d+g+nt).appendTo(i);i.find(".zoom-in-horizontal").click(function(){r(t,"xaxis","yaxis")});i.find(".zoom-in").click(function(){r(t)});i.find(".zoom-in-vertical").click(function(){r(t,"yaxis","xaxis")});i.find(".zoom-out-horizontal").click(function(){u(t,"xaxis","yaxis")});i.find(".zoom-out").click(function(){u(t)});i.find(".zoom-out-vertical").click(function(){u(t,"yaxis","xaxis")});i.find(".zoom-home").click(function(){s(t)});i.find(".pan-up").click(function(){h(t)});i.find(".pan-right").click(function(){c(t)});i.find(".pan-down").click(function(){l(t)});i.find(".pan-left").click(function(){a(t)})}function o(n){var t=n.getPlaceholder();t.find(".zoom-in-horizontal").unbind("click");t.find(".zoom-in").unbind("click");t.find(".zoom-in-vertical").unbind("click");t.find(".zoom-out-horizontal").unbind("click");t.find(".zoom-out").unbind("click");t.find(".zoom-out-vertical").unbind("click");t.find(".zoom-home").unbind("click");t.find(".pan-up").unbind("click");t.find(".pan-right").unbind("click");t.find(".pan-down").unbind("click");t.find(".pan-left").unbind("click")}function r(r,u,f){var e=r.getAxes(),o=e.xaxis,s=e.yaxis,c=r.p2c({x:(o.min+o.max)/2,y:(s.min+s.max)/2}),h=null;f&&(h=r.getAxes()[f].options.zoomRange,r.getAxes()[f].options.zoomRange=!1,r.getOptions().coordinate&&r.getOptions().coordinate.ratioXY&&(i=r.getOptions().coordinate.ratioXY,r.getOptions().coordinate.ratioXY=!1));n.each(r.getAxes(),function(n,t){t.options.min=t.min;t.options.max=t.max});r.zoom({amount:t.navigationControl.zoomAmount,center:c});f&&(r.getAxes()[f].options.zoomRange=h)}function u(r,u,f){var e=r.getAxes(),o=e.xaxis,s=e.yaxis,c=r.p2c({x:(o.min+o.max)/2,y:(s.min+s.max)/2}),h=null;f&&(h=r.getAxes()[f].options.zoomRange,r.getAxes()[f].options.zoomRange=!1,r.getOptions().coordinate&&r.getOptions().coordinate.ratioXY&&(i=r.getOptions().coordinate.ratioXY,r.getOptions().coordinate.ratioXY=!1));n.each(r.getAxes(),function(n,t){t.options.min=t.min;t.options.max=t.max});r.zoomOut({amount:t.navigationControl.zoomAmount,center:c});f&&(r.getAxes()[f].options.zoomRange=h)}function s(n){var t=n.getOptions(),r=n.getAxes(),u=r.xaxis,f=r.yaxis;u.options.min=t.navigationControl.homeRange.xmin;u.options.max=t.navigationControl.homeRange.xmax;f.options.min=t.navigationControl.homeRange.ymin;f.options.max=t.navigationControl.homeRange.ymax;n.getOptions().coordinate&&i&&(n.getOptions().coordinate.ratioXY=i);n.setupGrid();n.draw()}function h(n){n.pan({top:t.navigationControl.panAmount})}function c(n){n.pan({left:-t.navigationControl.panAmount})}function l(n){n.pan({top:-t.navigationControl.panAmount})}function a(n){n.pan({left:t.navigationControl.panAmount})}var i,t;String.prototype.format=function(){if(arguments.length<=0)return this;var t=this,n=arguments,i=t.replace(/(?:[^{]|^|\b|)(?:{{)*(?:{(\d+)}){1}(?:}})*(?=[^}]|$|\b)/g,function(t,i){return i=parseInt(i),typeof n[i]!="undefined"?t.replace(/{\d+}/g,n[i]):t});return i.replace(/{{/g,"{").replace(/}}/g,"}")};i=!1;t={navigationControl:{homeRange:{xmin:-10,xmax:10,ymin:-10,ymax:10},panAmount:100,zoomAmount:1.5,position:{left:"20px",top:"45px"}}};n.plot.plugins.push({init:f,options:t,name:"navigationControl",version:"1.4"})}(jQuery)